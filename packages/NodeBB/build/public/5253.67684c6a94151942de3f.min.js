"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5253],{55253:(t,n,o)=>{var i,e;i=[o(3547),o(7927),o(74344)],void 0===(e=function(t,n,o){const i={};let e,s,c,a;function p(){"topic"===ajaxify.data.template.name&&ajaxify.data.tid===a||(f(),$(window).off("action:ajaxify.end",p))}function d(i,e){i.attr("disabled",!0),Promise.all(t.pids.map((t=>o.delete(e(t),{})))).then(f).catch(n.error).finally((()=>{i.removeAttr("disabled")}))}function l(){t.pids.length?e.find("#pids").translateHtml("[[topic:fork_pid_count, "+t.pids.length+"]]"):e.find("#pids").translateHtml("[[topic:fork_no_pids]]")}function f(){e&&(e.remove(),e=null,t.disable())}return i.init=function(){a=ajaxify.data.tid,$(window).off("action:ajaxify.end",p).on("action:ajaxify.end",p),e||app.parseAndTranslate("partials/delete_posts_modal",{},(function(n){e=n,$("body").append(e),s=e.find("#delete_posts_confirm"),c=e.find("#purge_posts_confirm"),e.find(".close,#delete_posts_cancel").on("click",f),t.init((function(){t.pids.length?(s.removeAttr("disabled"),c.removeAttr("disabled")):(s.attr("disabled",!0),c.attr("disabled",!0)),l()})),l(),s.on("click",(function(){d(s,(t=>`/posts/${t}/state`))})),c.on("click",(function(){d(c,(t=>`/posts/${t}`))}))}))},i}.apply(n,i))||(t.exports=e)},3547:(t,n,o)=>{var i,e;i=[o(7237)],void 0===(e=function(t){const n={};let o;n.pids=[];let i=!1;function e(t){t.stopPropagation();const o=$(this).attr("data-pid"),e=$('[component="topic"] [data-pid="'+o+'"]');(i||0!==parseInt($(this).attr("data-index"),10))&&n.togglePostSelection(e,o)}function s(){return!1}return n.init=function(t,c){n.pids.length=0,o=t,i=(c=c||{}).allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',e),$("#content").on("click",'[component="post"] button, [component="post"] a',s)},n.disable=function(){n.pids.forEach((function(n){t.get("post","pid",n).toggleClass("bg-success",!1)})),$("#content").off("click",'[component="topic"] [component="post"]',e),$("#content").off("click",'[component="post"] button, [component="post"] a',s)},n.togglePostSelection=function(t,i){if(i){const e=n.pids.indexOf(i);-1===e?(n.pids.push(i),t.toggleClass("bg-success",!0)):(n.pids.splice(e,1),t.toggleClass("bg-success",!1)),n.pids.length&&n.pids.sort((function(t,n){return t-n})),"function"==typeof o&&o()}},n}.apply(n,i))||(t.exports=e)}}]);