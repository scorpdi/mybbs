"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7378],{57378:(e,t,o)=>{var n,i;n=[o(50548),o(7927),o(85233)],void 0===(i=function(e,t,o){const n={};let i,c;function s(e){c=e,i.find("#move_thread_commit").prop("disabled",!1)}function a(){const e=i.find("#move_thread_commit");if(!e.prop("disabled")&&c&&c.cid){e.prop("disabled",!0),i.modal("hide");let o="[[topic:topic_move_success, "+c.name+"]]";n.tids&&n.tids.length>1?o="[[topic:topic_move_multiple_success, "+c.name+"]]":n.tids||(o="[[topic:topic_move_all_success, "+c.name+"]]");const s={tids:n.tids?n.tids.slice():null,cid:c.cid,currentCid:n.currentCid,onComplete:n.onComplete};if(config.undoTimeout>0)return t.alert({alert_id:"tids_move_"+(n.tids?n.tids.join("-"):"all"),title:"[[topic:thread_tools.move]]",message:o,type:"success",timeout:config.undoTimeout,timeoutfn:function(){l(s)},clickfn:function(e,o){delete o.timeoutfn,t.success("[[topic:topic_move_undone]]")}});l(s)}}function l(e){o.fire("action:topic.move",e),socket.emit(e.tids?"topics.move":"topics.moveAll",e,(function(o){if(o)return t.error(o);"function"==typeof e.onComplete&&e.onComplete()}))}return n.init=function(t,o,c){n.tids=t,n.currentCid=o,n.onComplete=c,n.moveAll=!t,app.parseAndTranslate("partials/move_thread_modal",{},(function(t){i=t,i.on("hidden.bs.modal",(function(){i.remove()})),i.find("#move-confirm").addClass("hide"),(n.moveAll||n.tids&&n.tids.length>1)&&i.find(".modal-header h3").translateText("[[topic:move_topics]]"),e.init(i.find('[component="category-selector"]'),{onSelect:s,privilege:"moderate"}),i.find("#move_thread_commit").on("click",a),i.modal("show")}))},n}.apply(t,n))||(e.exports=i)},22905:(e,t,o)=>{var n,i;n=[o(7927)],void 0===(i=function(e){const t={init:function(t,o){let n=null;(o=o||{}).privilege=o.privilege||"topics:read",o.states=o.states||["watching","notwatching","ignoring"];let i=[];Array.isArray(o.localCategories)&&(i=o.localCategories.map((e=>({...e})))),o.selectedCids=o.selectedCids||ajaxify.data.selectedCids||[];const c=t.find('[component="category-selector-search"]');if(!c.length)return;const s=c.parent('[component="category/dropdown"]').length>0||c.parent('[component="category-selector"]').length>0;function a(e){app.parseAndTranslate(o.template,{categoryItems:e.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},(function(o){t.find('[component="category/list"]').replaceWith(o.find('[component="category/list"]')),t.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!e.length)}))}t.on("show.bs.dropdown",(function(){function l(){const t=c.find("input").val();var s,l;t.length>1||!t&&!n?(s=t,l=function(e){n=n||e,a(e)},socket.emit("categories.categorySearch",{search:s,query:utils.params(),parentCid:o.parentCid||0,selectedCids:o.selectedCids,privilege:o.privilege,states:o.states,showLinks:o.showLinks},(function(t,o){if(t)return e.error(t);l(i.concat(o))}))):!t&&n&&(n.forEach((function(e){e.selected=o.selectedCids.includes(e.cid)})),a(n))}s&&(t.find(".dropdown-toggle").addClass("hidden"),c.removeClass("hidden")),c.on("click",(function(e){e.preventDefault(),e.stopPropagation()})),c.find("input").val("").on("keyup",utils.debounce(l,300)),l()})),t.on("shown.bs.dropdown",(function(){c.find("input").focus()})),t.on("hide.bs.dropdown",(function(){s&&(t.find(".dropdown-toggle").removeClass("hidden"),c.addClass("hidden")),c.off("click"),c.find("input").off("keyup")}))}};return t}.apply(t,n))||(e.exports=i)},50548:(e,t,o)=>{var n,i;n=[o(22905),o(31369),o(85233)],void 0===(i=function(e,t,o){const n={init:function(t,n){if(!t||!t.length)return;const i=(n=n||{}).onSelect||function(){};n.states=n.states||["watching","notwatching","ignoring"],n.template="partials/category-selector",o.fire("action:category.selector.options",{el:t,options:n}),e.init(t,n);const c={el:t,selectedCategory:null};t.on("click","[data-cid]",(function(){const e=$(this);if(e.hasClass("disabled"))return!1;c.selectCategory(e.attr("data-cid")),i(c.selectedCategory)}));const s=c.el.find('[component="category-selector-selected"]').html();return c.selectCategory=function(e){const t=c.el.find('[data-cid="'+e+'"]');c.selectedCategory={cid:e,name:t.attr("data-name")},t.length?c.el.find('[component="category-selector-selected"]').html(t.find('[component="category-markup"]').html()):c.el.find('[component="category-selector-selected"]').html(s)},c.getSelectedCategory=function(){return c.selectedCategory},c.getSelectedCid=function(){return c.selectedCategory?c.selectedCategory.cid:0},c},modal:function(e){(e=e||{}).onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},(function(o){const i=t.dialog({title:e.title||"[[modules:composer.select_category]]",message:o,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:s}}}),c=n.init(i.find('[component="category-selector"]'),e);function s(t){return t.preventDefault(),c.selectedCategory&&(e.onSubmit(c.selectedCategory),i.modal("hide")),!1}e.openOnLoad&&i.on("shown.bs.modal",(function(){i.find(".dropdown-toggle").dropdown("toggle")})),i.find("form").on("submit",s)}))}};return n}.apply(t,n))||(e.exports=i)}}]);