"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[9789,2160],{81018:(t,n,e)=>{var o,a;o=[e(7927)],void 0===(a=function(t){const n={init:function(){Promise.all([e.e(2441),e.e(4074),e.e(524),e.e(8596)]).then((function(){var n=[e(30524)];(function(n){$('[component="chat/recent"]').on("click",'[component="chat/recent/room"]',(function(){n.switchChat($(this).attr("data-roomid"))})),$('[component="chat/recent"]').on("scroll",(function(){const n=$(this),e=.9*(n[0].scrollHeight-n.height());n.scrollTop()>e&&function(){const n=$('[component="chat/recent"]');n.attr("loading")||(n.attr("loading",1),socket.emit("modules.chats.getRecentChats",{uid:ajaxify.data.uid,after:n.attr("data-nextstart")},(function(e,o){if(e)return t.error(e);o&&o.rooms.length?function(t,n){if(!t.rooms.length)return n();app.parseAndTranslate("chats","rooms",t,(function(t){$('[component="chat/recent"]').append(t),t.find(".timeago").timeago(),n()}))}(o,(function(){n.removeAttr("loading"),n.attr("data-nextstart",o.nextStart)})):n.removeAttr("loading")})))}()}))}).apply(null,n)})).catch(e.oe)}};return n}.apply(n,o))||(t.exports=a)},18596:(t,n,e)=>{var o,a;o=[e(7237),e(74344),e(7927)],void 0===(a=function(t,n,o){const a={};function r(){const e=t.get("chat/search").val();if(!e)return $('[component="chat/search/list"]').empty();n.get("/api/users",{query:e,searchBy:"username",paginate:!1}).then(c).catch(o.error)}function c(t){const n=$('[component="chat/search/list"]');if(n.empty(),t.users=t.users.filter((function(t){return parseInt(t.uid,10)!==parseInt(app.user.uid,10)})),!t.users.length)return n.translateHtml("<li><div><span>[[users:no-users-found]]</span></div></li>");t.users.forEach((function(t){const a=function(t,n){const e=$('<li component="chat/search/user"></li>').attr("data-uid",n.uid).appendTo(t);return e.append((n.picture?'<img src="'+n.picture+'" title="'+n.username+'" />':'<div class="user-icon" style="background-color: '+n["icon:bgColor"]+'">'+n["icon:text"]+"</div>")+'<i class="fa fa-circle status '+n.status+'"></i> '+n.username),e}(n,t);!function(t,n){t.on("click",(function(){socket.emit("modules.chats.hasPrivateChat",n.uid,(function(t,a){if(t)return o.error(t);a?Promise.all([e.e(2441),e.e(4074),e.e(524),e.e(3050)]).then((function(){var t=[e(30524)];(function(t){t.switchChat(a)}).apply(null,t)})).catch(e.oe):e.e(4337).then((function(){var t=[e(93216)];(function(t){t.newChat(n.uid)}).apply(null,t)})).catch(e.oe)}))}))}(a,t)})),n.parent().toggleClass("open",!0)}return a.init=function(){t.get("chat/search").on("keyup",utils.debounce(r,250))},a}.apply(n,o))||(t.exports=a)},75203:(t,n,e)=>{var o;void 0===(o=function(){return{apply:function(t){$(t).on("mousewheel",(function(t){const n=this.scrollTop,e=this.scrollHeight,o=Math.round(this.getBoundingClientRect().height);if(t.originalEvent.deltaY<0&&0===n||t.originalEvent.deltaY>0&&o+n>=e)return!1}))}}}.call(n,e,n,t))||(t.exports=o)}}]);