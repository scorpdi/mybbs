"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6069,2993,2339,1976,9708,784,3479,7673,5973],{846:(t,e,a)=>{var n;void 0===(n=function(){let t=null;function e(e,a,n,r,i,o){const s=(n=t.deepClone(n))["data-type"]||n.type||"text",c=$(t.createElementOfType(s,n.tagName,n));c.attr("data-parent","_"+a),delete n["data-type"],delete n.tagName;for(const t in n)if(n.hasOwnProperty(t)){const e=n[t];0===t.search("data-")?c.data(t.substring(5),e):0===t.search("prop-")?c.prop(t.substring(5),e):c.attr(t,e)}t.fillField(c,r),$('[data-parent="_'+a+'"]',e).length&&o(i),o(c),o(function(e){const a=$(t.createElement("button",{class:"btn btn-xs btn-primary remove",title:"Remove Item"},"-"));return a.click((function(n){n.preventDefault(),e.remove(),a.remove(),e.each((function(e,a){(a=$(a)).is("[data-key]")&&t.destructElement(a)}))})),a}(c.add(i)))}return{types:["array","div"],use:function(){t=this.helper},create:function(e,a){return t.createElement(a||"div")},set:function(a,n){let r=a.data("attributes");const i=a.data("key")||a.data("parent");let o=a.data("split")||", ";o=function(){try{return $(o)}catch(t){return $(document.createTextNode(o))}}(),"object"!=typeof r&&(r={}),a.empty(),n instanceof Array||(n=[]);for(let t=0;t<n.length;t+=1)e(a,i,r,n[t],o.clone(),(function(t){a.append(t)}));!function(a,n,r,i){const o=$(document.createTextNode(" ")),s=a.data("new")||"",c=$(t.createElement("button",{class:"btn btn-sm btn-primary add",title:"Expand Array"},"+"));c.click((function(t){t.preventDefault(),e(a,n,r,s,i.clone(),(function(t){o.before(t)}))})),a.append(o),a.append(c)}(a,i,r,o)},get:function(e,a,n){const r=e.data("key")||e.data("parent"),i=$('[data-parent="_'+r+'"]',e),o=[];if(i.each((function(e,a){a=$(a);const n=t.readValue(a);if(t.isTrue(a.data("empty"))||void 0!==n&&(null==n||0!==n.length))return o.push(n)})),n||o.length)return o}}}.call(e,a,e,t))||(t.exports=n)},16631:(t,e,a)=>{var n;void 0===(n=function(){let t=null;return{types:["checkbox"],use:function(){t=this},create:function(){return t.helper.createElement("input",{type:"checkbox"})},set:function(t,e){t.prop("checked",e),t.closest(".mdl-switch").toggleClass("is-checked",t.is(":checked"))},get:function(t,e,a){const n=t.prop("checked");if(null!=n)return a?e?n?1:0:n:n||void 0}}}.call(e,a,e,t))||(t.exports=n)},88839:(t,e,a)=>{var n;void 0===(n=function(){let t=null,e=null,a=null;const n=Object.freeze({0:"",8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",187:"=",189:"-",190:".",191:"/",219:"[",220:"\\",221:"]"});function r(){this.c=!1,this.a=!1,this.s=!1,this.m=!1,this.code=0,this.char=""}function i(t){return 0==(t=+t)?"":t>=48&&t<=90?String.fromCharCode(t).toUpperCase():t>=112&&t<=123?"F"+(t-111):n[t]||"#"+t}function o(t,e,a,n){let i,o="";return t instanceof r?t.char?(n&&!/CtrlAShifMea#/.test(n)||(n=e?" + ":"+"),t.c&&(o+=(a?"C":"Ctrl")+n),t.a&&(o+=(a?"A":"Alt")+n),t.s&&(o+=(a?"S":"Shift")+n),t.m&&(o+=(a?"M":"Meta")+n),e?i=t.char:t.code&&(i="#"+t.code||0),o+i):e?"Enter a key":"":o}const s={types:["key"],use:function(){t=this.helper},init:function(t){return t.focus((function(){a=t.data("keyData")||new r,e=new r})).keydown((function(e){e.preventDefault(),c(t,e)})).keyup((function(e){c(t,e)})),t},set:function(t,e){const a=function(t){if(t instanceof r)return t;const e=new r,a=/([^CtrlAShifMea#\d]+)(?:#|\d)/.exec(t),n=null!=a?t.split(a[1]):[t];for(let t=0;t<n.length;t+=1){const a=n[t];switch(a){case"C":case"Ctrl":e.c=!0;break;case"A":case"Alt":e.a=!0;break;case"S":case"Shift":e.s=!0;break;case"M":case"Meta":e.m=!0;break;default:{const t=/\d+/.exec(a);null!=t&&(e.code=t[0]),e.char=i(e.code)}}}return e}(e||"");t.data("keyData",a),a.code?t.removeClass("alert-danger"):t.addClass("alert-danger"),t.val(o(a,!0,!1," + "))},get:function(e,a,n){const r=e.data("keyData"),i=e.data("split")||e.data("separator")||"+",s=!t.isFalse(e.data("short"));if(a){if(n||null!=r&&r.char)return o(r,!1,s,i)}else if(n||null!=r&&r.code)return r}};function c(t,n){(n=n||window.event).which=n.which||n.keyCode||n.key;const o=function(t){const n=t.ctrlKey!==e.c||t.altKey!==e.a||t.shiftKey!==e.s||t.metaKey!==e.m,o=t.ctrlKey+t.altKey+t.shiftKey+t.metaKey-e.c-e.a-e.s-e.m,s=new r;if(s.c=t.ctrlKey,s.a=t.altKey,s.s=t.shiftKey,s.m=t.metaKey,e=s,n){if(o<0)return null;s.code=a.code,s.char=a.char}else s.code=t.which,s.char=i(s.code);return a=s,s}(n);null!=o&&s.set(t,o)}return s}.call(e,a,e,t))||(t.exports=n)},73143:(t,e,a)=>{var n;void 0===(n=function(){return{types:["number"],get:function(t,e,a){const n=t.val();return a?n?+n:0:n?+n:void 0}}}.call(e,a,e,t))||(t.exports=n)},53411:(t,e,a)=>{var n;void 0===(n=function(){let t=null;function e(e,a,n,r,i,o,s){const c=n["data-prepend"],l=n["data-append"];delete n["data-prepend"],delete n["data-append"];const d=(n=t.deepClone(n))["data-type"]||n.type||"text",u=$(t.createElementOfType(d,n.tagName,n));u.attr("data-parent","_"+a),u.attr("data-prop",r),delete n["data-type"],delete n.tagName;for(const t in n)if(n.hasOwnProperty(t)){const e=n[t];0===t.search("data-")?u.data(t.substring(5),e):0===t.search("prop-")?u.prop(t.substring(5),e):u.attr(t,e)}t.fillField(u,i),$('[data-parent="_'+a+'"]',e).length&&s(o),c&&s(c),s(u),l&&s(l)}return{types:["object"],use:function(){t=this.helper},create:function(e,a){return t.createElement(a||"div")},set:function(t,a){const n=t.data("attributes")||t.data("properties"),r=t.data("key")||t.data("parent");let i,o,s,c=t.data("split")||", ";if(c=function(){try{return $(c)}catch(t){return $(document.createTextNode(c))}}(),t.empty(),"object"!=typeof a&&(a={}),Array.isArray(n))for(i in n)n.hasOwnProperty(i)&&(s=n[i],"object"!=typeof s&&(s={}),o=s["data-prop"]||s["data-property"]||i,void 0===a[o]&&void 0!==s["data-new"]&&(a[o]=s["data-new"]),e(t,r,s,o,a[o],c.clone(),(function(e){t.append(e)})))},get:function(e,a,n){const r=e.data("key")||e.data("parent"),i=$('[data-parent="_'+r+'"]',e),o={};if(i.each((function(e,a){a=$(a);const n=t.readValue(a),r=a.data("prop");if(t.isTrue(a.data("empty"))||void 0!==n&&(null==n||0!==n.length))return o[r]=n,n})),n||Object.keys(o).length)return o}}}.call(e,a,e,t))||(t.exports=n)},15101:(t,e,a)=>{var n;void 0===(n=function(){let t=null;function e(e,a){for(let n=0;n<a.length;n+=1){const r=a[n],i=r.text||r.value;delete r.text,e.append($(t.helper.createElement("option",r)).text(i))}}return{types:["select"],use:function(){t=this},create:function(a,n,r){const i=$(t.helper.createElement("select"));return e(i,r["data-options"]),delete r["data-options"],i},init:function(t){const a=t.data("options");null!=a&&e(t,a)},set:function(t,e){t.val(e||"")},get:function(t,e,a){const n=t.val();if(a||n)return n}}}.call(e,a,e,t))||(t.exports=n)},66370:(t,e,a)=>{var n,r;n=[a(59006),a(31369),a(85233),a(62526)],void 0===(r=function(t,e,a){let n;const r={types:["sorted-list"],use:function(){n=this},set:function(t,e){const a=t.attr("data-sorted-list");e[a]=[],t.find('[data-type="item"]').each((function(t,r){const i=$(r).attr("data-sorted-list-uuid"),s=n.helper.serializeForm($('[data-sorted-list-object="'+a+'"][data-sorted-list-uuid="'+i+'"]'));o(s),e[a].push(s)}))},get:async(n,o)=>{const{listEl:s,key:c,formTpl:l,formValues:d}=await a.fire("filter:settings.sorted-list.load",{listEl:n.find('[data-type="list"]'),key:n.attr("data-sorted-list"),formTpl:n.attr("data-form-template"),formValues:{}}),u=await t.render(l,d);$('[data-sorted-list="'+c+'"] [data-type="add"]').on("click",(function(){const t=e.confirm(u,(function(e){e&&r.addItem(t.find("form").children(),n)}));a.fire("action:settings.sorted-list.modal",{modal:t})}));const f=n.parents("form").attr("data-socket-get"),p=ajaxify.data[f?o:"settings"][c];if(Array.isArray(p)&&"string"!=typeof p[0]){const t=await Promise.all(p.map((async t=>{({item:t}=await a.fire("filter:settings.sorted-list.loadItem",{item:t}));const e=utils.generateUUID(),n=$(u).deserialize(t);return n.attr("data-sorted-list-uuid",e),n.attr("data-sorted-list-object",c),$("#content").append(n.hide()),{itemUUID:e,item:t}})));for(const{itemUUID:e,item:r}of t)await i(n,e,r),a.fire("action:settings.sorted-list.itemLoaded",{element:s.get(0)});a.fire("action:settings.sorted-list.loaded",{containerEl:n.get(0),listEl:s.get(0),hash:o,key:c})}s.sortable().addClass("pointer")},addItem:async(t,e)=>{const r=e.attr("data-sorted-list"),o=utils.generateUUID(),s=$('<form class="" data-sorted-list-uuid="'+o+'" data-sorted-list-object="'+r+'"></form>');s.append(t),$("#content").append(s.hide());let c=n.helper.serializeForm(s);({item:c}=await a.fire("filter:settings.sorted-list.loadItem",{item:c})),i(e,o,c)}};function i(t,r,s,c){const l=t.find('[data-type="list"]'),d=t.attr("data-item-template");return o(s),new Promise((u=>{app.parseAndTranslate(d,s,(function(s){s=$(s),c?c.replaceWith(s):l.append(s),s.attr("data-sorted-list-uuid",r),function(t,e){t.find('[data-sorted-list-uuid="'+e+'"] [data-type="remove"]').on("click",(function(){$('[data-sorted-list-uuid="'+e+'"]').remove()}))}(t,r),function(t,r){const s=t.find('[data-type="list"]'),c=t.attr("data-sorted-list");$('[data-sorted-list-uuid="'+r+'"] [data-type="edit"]').on("click",(function(){const l=$('[data-sorted-list-uuid="'+r+'"][data-sorted-list-object="'+c+'"]'),d=l.clone(!0).show();d.find("select").each(((t,e)=>{e.value=l.find(`select#${e.id}`).val()}));const u=e.confirm(d,(async e=>{if(e){const e=$('<form class="" data-sorted-list-uuid="'+r+'" data-sorted-list-object="'+c+'"></form>');e.append(u.find("form").children()),$("#content").find('[data-sorted-list-uuid="'+r+'"][data-sorted-list-object="'+c+'"]').remove(),$("#content").append(e.hide());let l=n.helper.serializeForm(e);({item:l}=await a.fire("filter:settings.sorted-list.loadItem",{item:l})),o(l);const d=s.find('[data-sorted-list-uuid="'+r+'"]');i(t,r,l,d)}}));a.fire("action:settings.sorted-list.modal",{modal:u})}))}(t,r),a.fire("action:settings.sorted-list.parse",{itemHtml:s}),u()}))}))}function o(t){return Object.entries(t||{}).forEach((([e,a])=>{t[e]="string"==typeof a?utils.stripHTMLTags(a,utils.stripTags):a}))}return r}.apply(e,n))||(t.exports=r)},7448:(t,e,a)=>{var n;void 0===(n=function(){let t=null;return{types:["textarea"],use:function(){t=this},create:function(){return t.helper.createElement("textarea")},set:function(t,e,a){a&&null!=e&&"function"==typeof e.trim&&(e=e.trim()),t.val(e||"")},get:function(t,e,a){let n=t.val();if(e&&(n=null==n?void 0:n.trim()),a||n)return n}}}.call(e,a,e,t))||(t.exports=n)}}]);