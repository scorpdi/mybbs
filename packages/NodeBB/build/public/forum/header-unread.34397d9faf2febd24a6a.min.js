"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1237],{4695:(e,t,n)=>{var a;void 0===(a=function(){const e={};function t(e){n("/unread",e.unreadTopicCount),n("/unread?filter=new",e.unreadNewTopicCount),n("/unread?filter=watched",e.unreadWatchedTopicCount),n("/unread?filter=unreplied",e.unreadUnrepliedTopicCount)}function n(e,t){utils.isNumber(t)&&($('a[href="'+config.relative_path+e+'"].navigation-link i').toggleClass("unread-count",t>0).attr("data-content",t>99?"99+":t),$('#mobile-menu [data-unread-url="'+e+'"]').attr("data-content",t>99?"99+":t))}return e.initUnreadTopics=function(){const e=app.user.unreadData;function a(t){if(t&&t.posts&&t.posts.length&&e){const n=t.posts[0];if(parseInt(n.uid,10)===parseInt(app.user.uid,10)||!n.topic.isFollowing&&3!==n.categoryWatchState)return;const a=n.topic.tid;e[""][a]&&e.new[a]&&e.watched[a]&&e.unreplied[a]||function(e){$('[data-tid="'+e+'"]').addClass("unread")}(a),e[""][a]||(i(""),e[""][a]=!0),n.isMain&&parseInt(n.uid,10)!==parseInt(app.user.uid,10)&&!e.new[a]&&(i("new"),e.new[a]=!0),parseInt(n.topic.postcount,10)<=1&&!e.unreplied[a]&&(i("unreplied"),e.unreplied[a]=!0),n.topic.isFollowing&&!e.watched[a]&&(i("watched"),e.watched[a]=!0)}}function i(e){const t="/unread"+(e?"?filter="+e:"");n(t,1+parseInt($('a[href="'+config.relative_path+t+'"].navigation-link i').attr("data-content"),10))}$(window).on("action:ajaxify.end",(function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach((function(t){delete e[t][ajaxify.data.tid]}))})),socket.removeListener("event:new_post",a),socket.on("event:new_post",a),socket.removeListener("event:unread.updateCount",t),socket.on("event:unread.updateCount",t)},e.updateUnreadTopicCount=n,e}.call(t,n,t,e))||(e.exports=a)}}]);