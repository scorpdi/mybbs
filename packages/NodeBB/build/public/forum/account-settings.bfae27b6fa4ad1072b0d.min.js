"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[977],{31956:(t,e,n)=>{var o,a;o=[n(59494),n(7237),n(32230),n(74344),n(7927)],void 0===(a=function(t,e,n,o,a){const s={};function i(t){o.put(`/users/${ajaxify.data.uid}/settings`,{settings:t}).then((t=>{a.success("[[success:settings-saved]]");let e=!1;for(const n in t)t.hasOwnProperty(n)&&("userLang"===n&&config.userLang!==t.userLang&&(e=!0),config.hasOwnProperty(n)&&(config[n]=t[n]));e&&parseInt(app.user.uid,10)===parseInt(ajaxify.data.theirid,10)&&(n.translate("[[language:dir]]",config.userLang,(function(t){const e=$("html");e.attr("data-dir",t),e.css("direction",t)})),n.switchTimeagoLanguage(utils.userLangToTimeagoCode(config.userLang),(function(){overrides.overrideTimeago(),ajaxify.refresh()})))}))}function r(){"custom"===$('[data-property="homePageRoute"]').val()?$("#homePageCustom").show():($("#homePageCustom").hide(),$('[data-property="homePageCustom"]').val(""))}function c(t){const e=Array.prototype.filter.call(document.querySelectorAll('link[rel="stylesheet"]'),(function(t){return-1!==t.href.indexOf(config.relative_path+"/assets/client")}))[0]||null;if(!e)return;const n=$("body").attr("class").split(/\s+/).filter((function(t){return t.startsWith("skin-")}));if(!n[0])return;let o=n[0].slice(5);if(o="noskin"!==o?o:"",t===o)return;const a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=config.relative_path+"/assets/client"+(t?"-"+t:"")+".css",a.onload=function(){e.parentNode.removeChild(e),$("body").removeClass(n.join(" ")),$("body").addClass("skin-"+(t||"noskin"))},document.head.appendChild(a)}return $(window).on("action:ajaxify.start",(function(){"account/settings"===ajaxify.data.template.name&&$("#bootswatchSkin").length&&$("#bootswatchSkin").val()!==config.bootswatchSkin&&c(config.bootswatchSkin)})),s.init=function(){t.init(),$("#submitBtn").on("click",(function(){const t=function(){const t={};return $(".account").find("input, textarea, select").each((function(e,n){const o=(n=$(n)).attr("data-property");n.is("select")?t[o]=n.val():"checkbox"===n.attr("type")?t[o]=n.is(":checked")?1:0:t[o]=n.val()})),t}();return"custom"===t.homePageRoute&&t.homePageCustom?$.get(config.relative_path+"/"+t.homePageCustom,(function(){i(t)})).fail((function(){a.error("[[error:invalid-home-page-route]]")})):i(t),!1})),$("#bootswatchSkin").on("change",(function(){c($(this).val())})),$('[data-property="homePageRoute"]').on("change",r),r(),e.get("user/sessions").find(".timeago").timeago()},s}.apply(e,o))||(t.exports=a)}}]);