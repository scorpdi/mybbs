"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7424,9126,3014,999],{9872:(e,n,t)=>{var s,a;s=[t(85233),t(32230),t(86569)],void 0===(a=function(e,n){const t={_capsState:!1,init:function(){const s=$("#login-error-notify"),a=$("#login"),r=$("#login-form");a.on("click",(function(t){if(t.preventDefault(),$("#username").val()&&$("#password").val()){if(s.hide(),a.hasClass("disabled"))return;a.addClass("disabled"),e.fire("action:app.login"),r.ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},beforeSend:function(){app.flags._login=!0},success:function(n){e.fire("action:app.loggedIn",n);const t=utils.urlToLocation(n.next).pathname,s=utils.params({url:n.next});s.loggedin=!0,delete s.register;const a=decodeURIComponent($.param(s));window.location.href=t+"?"+a},error:function(e){let t=e.responseText;const r=e.responseJSON;403===e.status&&"Forbidden"===e.responseText?window.location.href=config.relative_path+"/login?error=csrf-invalid":r&&r.hasOwnProperty("banned_until")&&(t=r.banned_until?n.compile("error:user-banned-reason-until",new Date(r.banned_until).toLocaleString(),r.reason):"[[error:user-banned-reason, "+r.reason+"]]"),s.find("p").translateText(t),s.show(),a.removeClass("disabled"),$("#password:focus").length&&$("#password").select()}})}else s.find("p").translateText("[[error:invalid-username-or-password]]"),s.show()})),t.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),$("#login-error-notify button").on("click",(function(e){return e.preventDefault(),s.hide(),!1})),$("#content #username").val()?$("#content #password").val("").focus():$("#content #username").focus(),$("#content #noscript").val("false")},capsLockCheck:(e,n)=>{const s=e=>{n.classList[e?"remove":"add"]("hidden"),n.parentNode.classList[e?"add":"remove"]("has-warning")};e&&(e.addEventListener("keyup",(function(e){if(t._capsState&&"CapsLock"===e.key)return s(!1),void(t._capsState=!t._capsState);t._capsState=e.getModifierState&&e.getModifierState("CapsLock"),s(t._capsState)})),t._capsState&&s(!0))}};return t}.apply(n,s))||(e.exports=a)},70935:(e,n,t)=>{var s,a;s=[t(32230),t(22568),t(74344),t(31369),t(9872),t(21322),t(86569)],void 0===(a=function(e,n,t,s,a,r){const o={};let i=!1;function c(e,s){s=s||function(){};const a=$("#username-notify"),r=n(e);e.length<ajaxify.data.minimumUsernameLength||r.length<ajaxify.data.minimumUsernameLength?d(a,"[[error:username-too-short]]"):e.length>ajaxify.data.maximumUsernameLength?d(a,"[[error:username-too-long]]"):utils.isUserNameValid(e)&&r?Promise.allSettled([t.head(`/users/bySlug/${e}`,{}),t.head(`/groups/${e}`,{})]).then((e=>{e.every((e=>"rejected"===e.status))?p(a,""):d(a,"[[error:username-taken]]"),s()})):d(a,"[[error:invalid-username]]")}function l(e,n){const t=$("#password-notify"),s=$("#password-confirm-notify");try{if(utils.assertPasswordValidity(e,r),e===$("#username").val())throw new Error("[[user:password_same_as_username]]");p(t,"")}catch(e){d(t,e.message)}e!==n&&""!==n&&d(s,"[[user:change_password_error_match]]")}function u(e,n){const t=$("#password-notify"),s=$("#password-confirm-notify");e&&!t.hasClass("alert-error")&&(e!==n?d(s,"[[user:change_password_error_match]]"):p(s,""))}function d(n,t){e.translate(t,(function(e){n.html(e),n.parent().removeClass("register-success").addClass("register-danger"),n.show()})),i=!0}function p(n,t){e.translate(t,(function(e){n.html(e),n.parent().removeClass("register-danger").addClass("register-success"),n.show()}))}return o.init=function(){const t=$("#username"),r=$("#password"),o=$("#password-confirm"),d=$("#register");!function(){if(!app.user.uid&&config.defaultLang!==config.userLang){const e=$('[component="register/local"]'),n=$('<input type="hidden" name="userLang" value="'+config.userLang+'" />');e.append(n)}}(),$("#content #noscript").val("false");const p=utils.params();p.token&&$("#token").val(p.token),t.on("keyup",(function(){$("#yourUsername").text(this.value.length>0?n(this.value):"username")})),t.on("blur",(function(){t.val().length&&c(t.val())})),r.on("blur",(function(){r.val().length&&l(r.val(),o.val())})),o.on("blur",(function(){o.val().length&&u(r.val(),o.val())})),a.capsLockCheck(document.querySelector("#password"),document.querySelector("#caps-lock-warning")),d.on("click",(function(n){const a=$(this),d=$("#register-error-notify");var p;d.addClass("hidden"),n.preventDefault(),p=function(){i||(a.addClass("disabled"),a.parents("form").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},success:function(n){if(a.removeClass("disabled"),n)if(n.next){const e=utils.urlToLocation(n.next).pathname,t=utils.params({url:n.next});t.registered=!0;const s=decodeURIComponent($.param(t));window.location.href=e+"?"+s}else n.message&&e.translate(n.message,(function(e){s.alert(e),ajaxify.go("/")}))},error:function(n){e.translate(n.responseText,config.defaultLang,(function(e){403===n.status&&"Forbidden"===n.responseText?window.location.href=config.relative_path+"/register?error=csrf-invalid":(d.find("p").text(e),d.removeClass("hidden"),a.removeClass("disabled"))}))}}))},i=!1,l(r.val(),o.val()),u(r.val(),o.val()),c(t.val(),p)})),$("#username").focus()},o}.apply(n,s))||(e.exports=a)},74344:(e,n,t)=>{var s,a;s=[t(85233)],void 0===(a=(e=>{const n={},t=config.relative_path+"/api/v3";function s(n,s){async function a(t){({options:n}=await e.fire("filter:api.options",{options:n})),$.ajax(n).done((e=>{t(null,e&&e.hasOwnProperty("status")&&e.hasOwnProperty("response")?e.response:e||{})})).fail((e=>{let n;e.responseJSON&&(n=e.responseJSON.status&&e.responseJSON.status.message?e.responseJSON.status.message:e.responseJSON.error),t(new Error(n||e.statusText))}))}if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:t+n.url,"function"!=typeof s)return new Promise(((e,n)=>{a((function(t,s){t?n(t):e(s)}))}));a(s)}return n.get=(e,n,t)=>s({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t),n.head=(e,n,t)=>s({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},t),n.post=(e,n,t)=>s({url:e,method:"post",data:JSON.stringify(n||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},t),n.patch=(e,n,t)=>s({url:e,method:"patch",data:JSON.stringify(n||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},t),n.put=(e,n,t)=>s({url:e,method:"put",data:JSON.stringify(n||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},t),n.del=(e,n,t)=>s({url:e,method:"delete",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},t),n.delete=n.del,n}).apply(n,s))||(e.exports=a)},22568:(e,n,t)=>{var s,a,r;a=[t(20648)],void 0===(r="function"==typeof(s=function(e){const n=e("[^\\p{L}\\s\\d\\-_]","g"),t=/[^\w\s\d\-_]/g,s=/^\s+|\s+$/g,a=/\s+/g,r=/-+/g,o=/-$/g,i=/^-/g,c=/^[\w\d\s.,\-@]+$/;return function(l,u){return l?(l=String(l).replace(s,""),l=c.test(l)?l.replace(t,"-"):e.replace(l,n,"-"),l=(l=(l=(l=(l=u?l:l.toLocaleLowerCase()).replace(a,"-")).replace(r,"-")).replace(o,"")).replace(i,"")):""}})?s.apply(n,a):s)||(e.exports=r)}}]);