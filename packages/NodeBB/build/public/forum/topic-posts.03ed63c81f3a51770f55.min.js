"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2586,6922,560,3382],{25142:(t,e,o)=>{var n,s;n=[o(85233),o(7927)],void 0===(s=function(t,e){const o={};let n,s,i=0,a=!1,r=0;function c(){r&&clearTimeout(r),r=setTimeout((function(){r=0,function(){const t=utils.findBootstrapEnvironment(),e=("xs"===t||"sm"===t)&&$("html").hasClass("composing");if(a||e)return;const o=$(window).scrollTop(),r=$(window).height(),c=s.height()-r,p=100*(o-(s.offset()?s.offset().top:0))/(c<=0?r:c),l=o>i?1:-1;(p<15&&o<i||p>85&&o>i||p<0&&l>0&&c<0)&&n(l),i=o}()}),60)}return o.init=function(t,e){const o=$("body");"function"==typeof t?(n=t,s=o):(n=e,s=t||o),i=$(window).scrollTop(),$(window).off("scroll",c).on("scroll",c),o.height()<=$(window).height()&&n(1)},o.loadMore=function(o,n,s){if(a)return;a=!0;const i={method:o,data:n};t.fire("action:infinitescroll.loadmore",i),socket.emit(i.method,i.data,(function(t,o){if(t)return a=!1,e.error(t);s(o,(function(){a=!1}))}))},o.loadMoreXhr=function(o,n){if(a)return;a=!0;const s=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),i={url:s,data:o};t.fire("action:infinitescroll.loadmore.xhr",i),$.get(s,o,(function(t){n(t,(function(){a=!1}))})).fail((function(t){a=!1,e.error(String(t.responseJSON||t.statusText))}))},o.removeExtra=function(t,e,o){let n=$();if(t.length<=o)return n;const s=t.length-o;if(e>0){const e=$(document).height(),o=$(window).scrollTop();n=t.slice(0,s).remove(),$(window).scrollTop(o+($(document).height()-e))}else n=t.slice(t.length-s).remove();return n},o}.apply(e,n))||(t.exports=s)},47720:(t,e)=>{var o;void 0===(o=function(){return{wrapImagesInLinks:function(t){t.find('[component="post/content"] img:not(.emoji)').each((function(){const t=$(this);let e=t.attr("src")||"";const o=t.attr("alt")||"",n=/-resized(\.[\w]+)?$/;if("about:blank"===e)return;utils.isRelativeUrl(e)&&n.test(e)&&(e=e.replace(n,"$1"));const s=e.split(".").slice(1).pop(),i=o.split("/").pop(),a=i.split(".").slice(1).pop();t.parent().is("a")||t.wrap('<a href="'+e+'" '+(!s&&a?' download="'+i+'" ':"")+' target="_blank" rel="noopener">')}))}}}.apply(e,[]))||(t.exports=o)},60447:(t,e,o)=>{var n,s;n=[o(78989),o(25142),o(54939),o(47720),o(42840),o(7237),o(32230),o(85233),o(59265)],void 0===(s=function(t,e,n,s,i,a,r,c,p){const l={};function d(t){t.selfPost&&ajaxify.data.scrollToMyPost&&i.scrollBottom(t.index)}function u(t,o,n,s,i){if(i=i||function(){},!t||t.posts&&!t.posts.length)return i();if(function(){const e=$('[component="post"].new');if(e.length===t.posts.length){let o=!0;if(e.each((function(e,n){parseInt($(n).attr("data-pid"),10)!==parseInt(t.posts[e].pid,10)&&(o=!1)})),o)return e.each((function(){$(this).removeClass("new")})),void(t.posts.length=0)}e.length&&t.posts.length>1&&t.posts.forEach((function(t){const e=a.get("post","pid",t.pid);e.hasClass("new")&&e.remove()})),t.posts=t.posts.filter((function(t){return-1===t.index||0===$('[component="post"][data-pid="'+t.pid+'"]').length}))}(),!t.posts.length)return i();let r,p;n>0&&o.length?r=o.last():n<0&&o.length&&(p=o.first()),c.fire("action:posts.loading",{posts:t.posts,after:r,before:p}),app.parseAndTranslate("topic","posts",Object.assign({},ajaxify.data,t),(function(o){if(o=o.filter((function(){const t=$(this),e=t.attr("data-pid"),o=parseInt(t.attr("data-index"),10);return!t.is('[component="post"]')||-1===o||e&&0===$('[component="post"][data-pid="'+e+'"]').length})),r)o.insertAfter(r);else if(p){const t=$(document).height(),e=$(window).scrollTop();o.insertBefore(p),(s||e>0)&&$(window).scrollTop(e+($(document).height()-t))}else a.get("topic").append(o);e.removeExtra($('[component="post"]'),n,Math.max(20,2*config.postsPerPage)).each(((t,e)=>{$(`[data-necro-post-index="${$(e).attr("data-index")}"]`).remove()})),c.fire("action:posts.loaded",{posts:t.posts}),l.onNewPostsAddedToDom(o),i(o)}))}return l.signaturesShown={},l.onNewPost=function(e){var s;e&&e.posts&&e.posts.length&&parseInt(e.posts[0].tid,10)===parseInt(ajaxify.data.tid,10)&&(e.loggedIn=!!app.user.uid,e.privileges=ajaxify.data.privileges,e.posts[0].timestamp=e.posts[0].topic.scheduled?e.posts[0].timestamp:Date.now()-1e3,e.posts[0].timestampISO=utils.toISOString(e.posts[0].timestamp),l.modifyPostsByPrivileges(e.posts),function(t){for(let e=0;e<t.length;e+=1){const o=a.get("user/postcount",t[e].uid);o.html(parseInt(o.attr("data-postcount"),10)+1),utils.addCommasToNumbers(o)}}(e.posts),s=e.posts,"newest_to_oldest"===config.topicPostSort&&(s[0].index=1,a.get("post").not("[data-index=0]").each((function(){const t=parseInt($(this).attr("data-index"),10)+1;$(this).attr("data-index",t)}))),ajaxify.data.postcount+=1,n.updatePostCount(ajaxify.data.postcount),config.usePagination?function(e){function o(){d(e.posts[0])}const n=e.posts;ajaxify.data.pagination.pageCount=Math.max(1,Math.ceil(n[0].topic.postcount/config.postsPerPage));const s="oldest_to_newest"===config.topicPostSort||"most_votes"===config.topicPostSort?1:-1;if(ajaxify.data.pagination.currentPage===ajaxify.data.pagination.pageCount&&1===s||1===ajaxify.data.pagination.currentPage&&-1===s){const t=$('[component="post"]:not([data-index=0]), [component="topic/event"]');u(e,t,s,!1,o)}else ajaxify.data.scrollToMyPost&&parseInt(n[0].uid,10)===parseInt(app.user.uid,10)?setTimeout((function(){t.loadPage(ajaxify.data.pagination.pageCount,o)}),250):$.get(config.relative_path+"/api/topic/pagination/"+ajaxify.data.tid,{page:ajaxify.data.pagination.currentPage},(function(t){app.parseAndTranslate("partials/paginator",t,(function(t){$('[component="pagination"]').after(t).remove()}))}))}(e):function(t){const e="oldest_to_newest"===config.topicPostSort||"most_votes"===config.topicPostSort?1:-1,o=$('[component="post"][data-index="'+(t.posts[0].index-1)+'"]').length;if(!(o||t.posts[0].selfPost&&ajaxify.data.scrollToMyPost))return;if(!o&&t.posts[0].selfPost)return ajaxify.go("post/"+t.posts[0].pid);const n=$('[component="topic"]>[component="post"]:not([data-index=0]), [component="topic"]>[component="topic/event"]');u(t,n,e,!1,(function(e){e&&e.addClass("new"),d(t.posts[0])}))}(e),o.e(1352).then((function(){var t=[o(21352)];(function(t){t.onNewPost(e)}).apply(null,t)})).catch(o.oe))},l.modifyPostsByPrivileges=function(t){t.forEach((function(t){t.selfPost=!!app.user.uid&&parseInt(t.uid,10)===parseInt(app.user.uid,10),t.topicOwnerPost=parseInt(t.uid,10)===parseInt(ajaxify.data.uid,10),t.display_edit_tools=ajaxify.data.privileges["posts:edit"]&&t.selfPost||ajaxify.data.privileges.isAdminOrMod,t.display_delete_tools=ajaxify.data.privileges["posts:delete"]&&t.selfPost||ajaxify.data.privileges.isAdminOrMod,t.display_moderator_tools=t.display_edit_tools||t.display_delete_tools,t.display_move_tools=ajaxify.data.privileges.isAdminOrMod,t.display_post_menu=ajaxify.data.privileges.isAdminOrMod||t.selfPost&&!ajaxify.data.locked&&!t.deleted||t.selfPost&&t.deleted&&parseInt(t.deleterUid,10)===parseInt(app.user.uid,10)||(app.user.uid||ajaxify.data.postSharing.length)&&!t.deleted}))},l.loadMorePosts=function(t){if(!a.get("topic").length||i.scrollActive)return;const o=a.get("topic").find(a.get("post").not("[data-index=0]").not(".new")),n=t>0?o.last():o.first(),s=parseInt(n.attr("data-index"),10)||0,r=ajaxify.data.tid;if(!utils.isNumber(r)||!utils.isNumber(s)||t<0&&a.get("post","index",0).length)return;const c=$(".loading-indicator");c.is(":animated")||c.fadeIn(),e.loadMore("topics.loadMore",{tid:r,after:s+(t>0?1:0),count:config.postsPerPage,direction:t,topicPostSort:config.topicPostSort},(function(e,o){c.fadeOut(),e&&e.posts&&e.posts.length?u(e,$('[component="post"]:not([data-index=0]):not(.new), [component="topic/event"]'),t,!0,o):(i.update(),o())}))},l.onTopicPageLoad=function(t){!function(t){if(app.user.uid||!ajaxify.data.privateUploads)return;const e=document.createElement("a");e.className="login-required",e.href=config.relative_path+"/login",r.translate("[[topic:login-to-view]]",(function(o){e.appendChild(document.createTextNode(o)),t.each((function(t,o){$(o).find('[component="post/content"] img').each((function(t,o){(o=$(o)).attr("src").startsWith(config.relative_path+config.upload_url)&&o.replaceWith(e.cloneNode(!0))}))}))}))}(t),s.wrapImagesInLinks(t),function(t){ajaxify.data["signatures:hideDuplicates"]&&t.each(((t,e)=>{const o=$(e).find('[component="post/signature"]'),n=o.attr("data-uid");l.signaturesShown[n]?o.addClass("hidden"):l.signaturesShown[n]=!0}))}(t),l.showBottomPostBar(),t.find('[component="post/content"] img:not(.not-responsive)').addClass("img-responsive"),l.addBlockquoteEllipses(t),function(t){t.each((function(){$(this).hasClass("deleted")&&n.toggle($(this).attr("data-pid"),!0)}))}(t),function(){const t=24*ajaxify.data.necroThreshold*60*60*1e3;!t||"newest_to_oldest"!==config.topicPostSort&&"oldest_to_newest"!==config.topicPostSort||$('[component="post"]').toArray().forEach((function(e){const o=(e=$(e)).prev('[component="post"]');if(e.is(":has(.necro-post)")||!o.length)return;if("newest_to_oldest"===config.topicPostSort&&0===parseInt(o.attr("data-index"),10))return;const n=e.attr("data-timestamp")-o.attr("data-timestamp");if(Math.abs(n)>=t){const t=$.timeago.settings.strings.suffixAgo,s=$.timeago.settings.strings.prefixAgo,i=$.timeago.settings.strings.suffixFromNow,a=$.timeago.settings.strings.prefixFromNow;$.timeago.settings.strings.suffixAgo="",$.timeago.settings.strings.prefixAgo="",$.timeago.settings.strings.suffixFromNow="",$.timeago.settings.strings.prefixFromNow="";const r=(n>0?"[[topic:timeago_later,":"[[topic:timeago_earlier,")+$.timeago.inWords(n)+"]]";$.timeago.settings.strings.suffixAgo=t,$.timeago.settings.strings.prefixAgo=s,$.timeago.settings.strings.suffixFromNow=i,$.timeago.settings.strings.prefixFromNow=a,app.parseAndTranslate("partials/topic/necro-post",{text:r},(function(t){t.attr("data-necro-post-index",o.attr("data-index")),t.insertBefore(e)}))}}))}()},l.addTopicEvents=function(t){if("most_votes"===config.topicPostSort)return;const e=p.renderEvents.call(ajaxify.data,t);r.translate(e,(t=>{if("oldest_to_newest"===config.topicPostSort)$('[component="topic"]').append(t);else if("newest_to_oldest"===config.topicPostSort){const e=$('[component="topic"] [component="post"][data-index="0"]');e.length?$(t).insertAfter(e):$('[component="topic"]').prepend(t)}$('[component="topic/event"] .timeago').timeago()}))},l.onNewPostsAddedToDom=function(t){l.onTopicPageLoad(t),app.createUserTooltips(t),utils.addCommasToNumbers(t.find(".formatted-number")),utils.makeNumbersHumanReadable(t.find(".human-readable-number")),t.find(".timeago").timeago()},l.showBottomPostBar=function(){const t=a.get("post","index",0),e=$(".post-bar-placeholder"),o=$('[component="post"]');t.length&&o.length>1&&$(".post-bar").length<2&&e.length?($(".post-bar").clone().insertAfter(e),e.remove()):t.length&&o.length<2&&t.find(".post-bar").remove()},l.addBlockquoteEllipses=function(t){t.find('[component="post/content"] > blockquote > blockquote').each((function(){const t=$(this);t.find(":hidden:not(br)").length&&!t.find(".toggle").length&&t.append('<i class="fa fa-angle-down pointer toggle"></i>')}))},l}.apply(e,n))||(t.exports=s)},11120:t=>{t.exports=function(t,e,o){e.setGlobal("true",!0),e.setGlobal("false",!1);const n={displayMenuItem:function(t,e){const o=t.navigation[e];return!!o&&(!(o.route.match("/users")&&t.user&&!t.user.privileges["view:users"])&&(!(o.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"])&&!(o.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])))},buildMetaTag:function(t){return"<meta "+(t.name?'name="'+t.name+'" ':"")+(t.property?'property="'+t.property+'" ':"")+(t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"")+"/>\n\t"},buildLinkTag:function(t){const[e,o,n,s,i,a,r,c]=["link","rel","as","type","href","sizes","title","crossorigin"].map((e=>t[e]?`${e}="${t[e]}" `:""));return"<link "+e+o+n+s+a+r+i+c+"/>\n\t"},stringify:function(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")},escape:function(e){return t.escapeHTML(e)},stripTags:function(e){return t.stripHTMLTags(e)},generateCategoryBackground:s,generateChildrenCategories:function(t){let e="";return t&&t.children&&t.children.length?(t.children.forEach((function(t){if(t&&!t.isSection){const n=t.link?t.link:o+"/category/"+t.slug;e+='<span class="category-children-item pull-left"><div role="presentation" class="icon pull-left" style="'+s(t)+'"><i class="fa fa-fw '+t.icon+'"></i></div><a href="'+n+'"><small>'+t.name+"</small></a></span>"}})),e=e?'<span class="category-children">'+e+"</span>":e,e):e},generateTopicClass:function(t){return["locked","pinned","deleted","unread","scheduled"].filter((e=>!!t[e])).join(" ")},membershipBtn:function(t){return t.isMember&&"administrators"!==t.name?'<button class="btn btn-danger" data-action="leave" data-group="'+t.displayName+'"'+(t.disableLeave?" disabled":"")+'><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>':t.isPending&&"administrators"!==t.name?'<button class="btn btn-warning disabled"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>':t.isInvited?'<button class="btn btn-link" data-action="rejectInvite" data-group="'+t.displayName+'">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="'+t.name+'"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>':t.disableJoinRequests||"administrators"===t.name?"":'<button class="btn btn-success" data-action="join" data-group="'+t.displayName+'"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>'},spawnPrivilegeStates:function(t,e){const o=[];for(const t in e)e.hasOwnProperty(t)&&o.push({name:t,state:e[t]});return o.map((function(e){const o="guests"===t&&(["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"].includes(e.name)||e.name.startsWith("groups:admin:"))||"spiders"===t&&!["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"].includes(e.name)||"Global Moderators"===t&&["groups:moderate"].includes(e.name);return'<td class="text-center" data-privilege="'+e.name+'" data-value="'+e.state+'"><input autocomplete="off" type="checkbox"'+(e.state?" checked":"")+(o?' disabled="disabled"':"")+" /></td>"})).join("")},localeToHTML:function(t,e){return(t=t||e||"en-GB").replace("_","-")},renderTopicImage:function(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.username+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.username+'" />'},renderTopicEvents:function(t,e){if("most_votes"===e)return"";const o=this.posts[t].eventStart,n=this.posts[t].eventEnd,s=this.events.filter((t=>t.timestamp>=o&&t.timestamp<n));return s.length?i.call(this,s):""},renderEvents:i,renderDigestAvatar:function(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"},userAgentIcons:function(t){let e="";switch(t.platform){case"Linux":e+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":e+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":e+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":e+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":e+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":e+='<i class="fa fa-fw fa-mobile"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>'}switch(t.browser){case"Chrome":e+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":e+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":e+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":e+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":e+='<i class="fa fa-fw fa-edge"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>'}return e},buildAvatar:a,register:function(){Object.keys(n).forEach((function(t){e.registerHelper(t,n[t])}))},__escape:function(t){return t}};function s(t){if(!t)return"";const e=[];return t.bgColor&&e.push("background-color: "+t.bgColor),t.color&&e.push("color: "+t.color),t.backgroundImage&&(e.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&e.push("background-size: "+t.imageClass)),e.join("; ")+";"}function i(t){return t.reduce(((t,e)=>(t+=`<li component="topic/event" class="timeline-event" data-topic-event-id="${e.id}" data-topic-event-type="${e.type}">\n\t\t\t\t<div class="timeline-badge">\n\t\t\t\t\t<i class="fa ${e.icon||"fa-circle"}"></i>\n\t\t\t\t</div>\n\t\t\t\t<span class="timeline-text">\n\t\t\t\t\t${e.href?`<a href="${o}${e.href}">${e.text}</a>`:e.text}&nbsp;\n\t\t\t\t</span>\n\t\t\t`,e.user&&(e.user.system?t+='<span class="timeline-text">[[global:system-user]]</span>&nbsp;':t+=`<span><a href="${o}/user/${e.user.userslug}">${a(e.user,"xs",!0)}&nbsp;${e.user.username}</a></span>&nbsp;`),t+=`<span class="timeago timeline-text" title="${e.timestampISO}"></span>`,this.privileges.isAdminOrMod&&(t+=`&nbsp;<span component="topic/event/delete" data-topic-event-id="${e.id}" data-topic-event-type="${e.type} class="timeline-text pointer" title="[[topic:delete-event]]"><i class="fa fa-trash"></i></span>`),t)),"")}function a(t,e,o,n,s){t||(t=this);const i=['alt="'+t.username+'"','title="'+t.username+'"','data-uid="'+t.uid+'"','loading="lazy"'],a=[];return n=n||"",["xs","sm","sm2x","md","lg","xl"].includes(e)?n+=" avatar-"+e:isNaN(parseInt(e,10))?n+=" avatar-sm":a.push("width: "+e+"px;","height: "+e+"px;","line-height: "+e+"px;","font-size: "+parseInt(e,10)/16+"rem;"),i.unshift('class="avatar '+n+(o?" avatar-rounded":"")+'"'),s?i.push('component="'+s+'"'):i.push('component="avatar/'+(t.picture?"picture":"icon")+'"'),t.picture?"<img "+i.join(" ")+' src="'+t.picture+'" style="'+a.join(" ")+'" />':(a.push("background-color: "+t["icon:bgColor"]+";"),"<span "+i.join(" ")+' style="'+a.join(" ")+'">'+t["icon:text"]+"</span>")}return n}},59265:(t,e,o)=>{var n,s;const i=o(11120);n=[o(96795),o(59006)],void 0===(s=function(t,e){return i(t,e,config.relative_path)}.apply(e,n))||(t.exports=s)}}]);