"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[792,1352],{21352:(e,t,o)=>{var s,n;s=[o(60447),o(85233),o(7927)],void 0===(n=function(e,t,o){const s={};function n(e,t){const o=$('[component="post"][data-pid="'+e.toPid+'"]').find('[component="post/reply-count"]').first(),s=o.find('[component="post/reply-count/text"]'),n=o.find('[component="post/reply-count/avatars"]'),i=Math.max(0,parseInt(s.attr("data-replies"),10)+t),d=o.find(".timeago").attr("title",e.timestampISO);s.attr("data-replies",i),o.toggleClass("hidden",i<=0),i>1?s.translateText("[[topic:replies_to_this_post, "+i+"]]"):s.translateText("[[topic:one_reply_to_this_post]]"),!n.find('[data-uid="'+e.uid+'"]').length&&i<7&&app.parseAndTranslate("topic","posts",{posts:[{replies:{users:[e.user]}}]},(function(e){n.prepend(e.find('[component="post/reply-count/avatars"] [component="avatar/picture"]'))})),n.addClass("hasMore"),d.data("timeago",null).timeago()}return s.init=function(s){const n=s.closest("[data-pid]"),i=n.data("pid"),d=s.find('[component="post/replies/open"]'),a=s.find('[component="post/replies/loading"]'),p=s.find('[component="post/replies/close"]');d.is(":not(.hidden)")&&a.is(".hidden")?(d.addClass("hidden"),a.removeClass("hidden"),socket.emit("posts.getReplies",i,(function(i,r){if(a.addClass("hidden"),i)return d.removeClass("hidden"),o.error(i);p.removeClass("hidden"),e.modifyPostsByPrivileges(r);const l={posts:r,privileges:ajaxify.data.privileges,"downvote:disabled":ajaxify.data["downvote:disabled"],"reputation:disabled":ajaxify.data["reputation:disabled"],loggedIn:!!app.user.uid,hideReplies:!config.hasOwnProperty("showNestedReplies")||!config.showNestedReplies};app.parseAndTranslate("topic","posts",l,(function(o){const i=$("<div>",{component:"post/replies"}).html(o).hide();s.attr("data-target-component")?n.find('[component="'+s.attr("data-target-component")+'"]').html(i):i.insertAfter(s),i.slideDown("fast"),e.onNewPostsAddedToDom(o),t.fire("action:posts.loaded",{posts:r})}))}))):p.is(":not(.hidden)")&&(p.addClass("hidden"),d.removeClass("hidden"),a.addClass("hidden"),n.find('[component="post/replies"]').slideUp("fast",(function(){$(this).remove()})))},s.onNewPost=function(t){const o=t.posts[0];o&&(n(o,1),t.hideReplies=!config.hasOwnProperty("showNestedReplies")||!config.showNestedReplies,app.parseAndTranslate("topic","posts",t,(function(t){const s=$('[component="post"][data-pid="'+o.toPid+'"] [component="post/replies"]').first();s.length&&("newest_to_oldest"===config.topicPostSort?s.prepend(t):s.append(t),e.onNewPostsAddedToDom(t))})))},s.onPostPurged=function(e){n(e,-1)},s}.apply(t,s))||(e.exports=n)}}]);