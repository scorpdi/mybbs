"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5962,7214,6503,6721,3014,71,8306,831,7927,28,7073],{90028:(t,e,n)=>{var o,i;o=[n(7073),n(7927),n(74344)],void 0===(i=function(t,e,n){const o={};let i,r,s={};function a(t){if(!i)return;const e=$(this).parents('[component="category/topic"]').attr("data-tid");return o.addTopic(e),t.preventDefault(),t.stopPropagation(),!1}function c(){if(!i)return;const t=Object.keys(s);t.sort((function(t,e){return t-e}));const e=t.map((function(t){return{tid:t,title:s[t]}}));t.length?app.parseAndTranslate("partials/merge_topics_modal",{config,topics:e},(function(t){i.find(".topics-section").html(t.find(".topics-section").html()),i.find(".merge-main-topic-select").html(t.find(".merge-main-topic-select").html())})):i.find(".topics-section").translateHtml("[[error:no-topics-selected]]")}function l(){i&&(i.remove(),i=null),s={},$("#content").off("click",'[component="topic/select"]',a)}return o.init=function(n){n=n||function(){},i||app.parseAndTranslate("partials/merge_topics_modal",{},(function(u){i=u,$("body").append(i),r=i.find("#merge_topics_confirm"),i.find(".close,#merge_topics_cancel").on("click",l),$("#content").on("click",'[component="topic/select"]',a),c(),r.on("click",(function(){!function(t){t.attr("disabled",!0);const n=Object.keys(s),o={};i.find(".merge-main-topic-radio").is(":checked")?o.mainTid=i.find(".merge-main-topic-select").val():i.find(".merge-new-title-radio").is(":checked")&&(o.newTopicTitle=i.find(".merge-new-title-input").val()),socket.emit("topics.merge",{tids:n,options:o},(function(n,o){if(t.removeAttr("disabled"),n)return e.error(n);ajaxify.go("/topic/"+o),l()}))}(r)})),t.enableQuickSearch({searchElements:{inputEl:i.find(".topic-search-input"),resultEl:i.find(".quick-search-container")},searchOptions:{in:"titles"}}),i.on("click","[data-tid]",(function(){return $(this).attr("data-tid")&&o.addTopic($(this).attr("data-tid")),!1})),n()}))},o.addTopic=function(t,o){o=o||function(){},n.get(`/topics/${t}`,{}).then((function(e){const n=e?e.title:"No title";s[t]?delete s[t]:s[t]=n,Object.keys(s).length?r.removeAttr("disabled"):r.attr("disabled",!0),c(),o()})).catch(e.error)},o}.apply(e,o))||(t.exports=i)},7927:(t,e,n)=>{var o,i;o=[n(32230),n(7237),n(85233)],i=function(t,e,n){const o={};function i(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&s(t,e),n.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||e.clickfn(),r(t)}))}function r(t){t.fadeOut(500,(function(){$(this).remove()}))}function s(t,e){const o=e.timeout,i=setTimeout((function(){r(t),"function"==typeof e.timeoutfn&&e.timeoutfn(t,e)}),o);t.attr("timeoutId",i),t.css("transition-property","none"),t.removeClass("animate"),setTimeout((function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:e})}),50),t.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return o.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?i(o,t):function(t){app.parseAndTranslate("alert",t,(function(o){let a=$("#"+t.alert_id);if(a.length)return i(a,t);a=o,a.fadeIn(200),e.get("toaster/tray").prepend(a),"function"==typeof t.closefn&&a.find("button").on("click",(function(){return t.closefn(),r(a),!1})),t.timeout&&s(a,t),"function"==typeof t.clickfn&&a.addClass("pointer").on("click",(function(e){$(e.target).is(".close")||t.clickfn(a,t),r(a)})),n.fire("action:alert.new",{alert:a,params:t})}))}(t)},o.success=function(t,e){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},o.error=function(t,e){if("[[error:revalidate-failure]]"===(t=t&&t.message||t))return socket.disconnect(),void app.reconnect();o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},o.remove=function(t){$("#alert_button_"+t).remove()},o}.apply(e,o),void 0===i||(t.exports=i)},74344:(t,e,n)=>{var o,i;o=[n(85233)],void 0===(i=(t=>{const e={},n=config.relative_path+"/api/v3";function o(e,o){async function i(n){({options:e}=await t.fire("filter:api.options",{options:e})),$.ajax(e).done((t=>{n(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})})).fail((t=>{let e;t.responseJSON&&(e=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),n(new Error(e||t.statusText))}))}if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:n+e.url,"function"!=typeof o)return new Promise(((t,e)=>{i((function(n,o){n?e(n):t(o)}))}));i(o)}return e.get=(t,e,n)=>o({url:t+(e&&Object.keys(e).length?"?"+$.param(e):"")},n),e.head=(t,e,n)=>o({url:t+(e&&Object.keys(e).length?"?"+$.param(e):""),method:"head"},n),e.post=(t,e,n)=>o({url:t,method:"post",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.patch=(t,e,n)=>o({url:t,method:"patch",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.put=(t,e,n)=>o({url:t,method:"put",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.del=(t,e,n)=>o({url:t,method:"delete",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.delete=e.del,e}).apply(e,o))||(t.exports=i)},7237:(t,e,n)=>{var o;void 0===(o=function(){const t={};return t.core={"topic/teaser":function(t){return t?$('[component="category/topic"][data-tid="'+t+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(t,e){return $('[component="topic"][data-'+t+'="'+e+'"]')},post:function(t,e){return $('[component="post"][data-'+t+'="'+e+'"]')},"post/content":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/content"]')},"post/header":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/header"]')},"post/anchor":function(t){return $('[component="post"][data-index="'+t+'"] [component="post/anchor"]')},"post/vote-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/vote-count"]')},"post/bookmark-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/bookmark-count"]')},"user/postcount":function(t){return $('[component="user/postcount"][data-uid="'+t+'"]')},"user/reputation":function(t){return $('[component="user/reputation"][data-uid="'+t+'"]')},"category/topic":function(t,e){return $('[component="category/topic"][data-'+t+'="'+e+'"]')},"categories/category":function(t,e){return $('[component="categories/category"][data-'+t+'="'+e+'"]')},"chat/message":function(t){return $('[component="chat/message"][data-mid="'+t+'"]')},"chat/message/body":function(t){return $('[component="chat/message"][data-mid="'+t+'"] [component="chat/message/body"]')},"chat/recent/room":function(t){return $('[component="chat/recent/room"][data-roomid="'+t+'"]')}},t.get=function(){const e=Array.prototype.slice.call(arguments,1);return t.core[arguments[0]]&&e.length?t.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},t}.call(e,n,e,t))||(t.exports=o)},7073:(t,e,n)=>{var o,i;o=[n(32230),n(66603),n(85233),n(7927)],void 0===(i=function(t,e,n,o){const i={current:{}};function r(t){const e=t.in||"titles",i=t.by||"";let r=t.term.replace(/^[ ?#]*/,"");try{r=encodeURIComponent(r)}catch(t){return o.error("[[error:invalid-search-term]]")}const s={term:r,in:e};return t.matchWords&&(s.matchWords=t.matchWords),i&&i.length&&("posts"===e||"titles"===e||"titlesposts"===e)&&(s.by=i),t.categories&&t.categories.length&&(s.categories=t.categories,t.searchChildren&&(s.searchChildren=t.searchChildren)),t.hasTags&&t.hasTags.length&&(s.hasTags=t.hasTags),parseInt(t.replies,10)>0&&(s.replies=t.replies,s.repliesFilter=t.repliesFilter||"atleast"),t.timeRange&&(s.timeRange=t.timeRange,s.timeFilter=t.timeFilter||"newer"),t.sortBy&&(s.sortBy=t.sortBy,s.sortDirection=t.sortDirection),t.showAs&&(s.showAs=t.showAs),t.searchOnly&&(s.searchOnly=t.searchOnly),n.fire("action:search.createQueryString",{query:s,data:t}),decodeURIComponent($.param(s))}return i.init=function(t){if(!config.searchEnabled)return;t=t||{in:config.searchDefaultInQuick||"titles"};const e=$("#search-button"),r=$("#search-fields"),s=$("#search-fields input"),a=$("#quick-search-container");$("#search-form .advanced-search-link").off("mousedown").on("mousedown",(function(){ajaxify.go("/search")})),$("#search-form").off("submit").on("submit",(function(){s.blur()})),s.off("blur").on("blur",(function(){setTimeout((function(){s.is(":focus")||(r.addClass("hidden"),e.removeClass("hidden"))}),200)})),s.off("focus");const c={inputEl:s,resultEl:a};i.enableQuickSearch({searchOptions:t,searchElements:c}),e.off("click").on("click",(function(t){return config.loggedIn||app.user.privileges["search:content"]?(t.stopPropagation(),i.showAndFocusInput(),!1):(o.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1)})),$("#search-form").off("submit").on("submit",(function(){const e=$(this).find("input"),o=i.getSearchPreferences();return o.term=e.val(),o.in=t.in,n.fire("action:search.submit",{searchOptions:o,searchElements:c}),i.query(o,(function(){e.val("")})),!1}))},i.enableQuickSearch=function(e){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const o=Object.assign({in:config.searchDefaultInQuick||"titles"},e.searchOptions),r=e.searchElements.resultEl,s=e.searchElements.inputEl;let a=s.val();const c=r.find(".filter-category");function l(){ajaxify.data.template.category&&t.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",(function(t){const e=$("<div></div>").html(t).text();c.find(".name").text(e)})),c.toggleClass("hidden",!ajaxify.data.template.category)}function u(){e.searchOptions=Object.assign({},o),e.searchOptions.term=s.val(),l(),ajaxify.data.template.category&&c.find('input[type="checkbox"]').is(":checked")&&(e.searchOptions.categories=[ajaxify.data.cid],e.searchOptions.searchChildren=!0),r.removeClass("hidden").find(".quick-search-results-container").html(""),r.find(".loading-indicator").removeClass("hidden"),n.fire("action:search.quick.start",e),e.searchOptions.searchOnly=1,i.api(e.searchOptions,(function(t){if(r.find(".loading-indicator").addClass("hidden"),!t.posts||e.hideOnNoMatches&&!t.posts.length)return r.addClass("hidden").find(".quick-search-results-container").html("");t.posts.forEach((function(t){const e=$("<div>"+t.content+"</div>").text(),n=s.val().toLowerCase().replace(/^in:topic-\d+/,""),o=Math.max(0,e.toLowerCase().indexOf(n)-40);t.snippet=utils.escapeHTML((o>0?"...":"")+e.slice(o,o+80)+(e.length-o>80?"...":""))})),app.parseAndTranslate("partials/quick-search-results",t,(function(o){o.length&&o.find(".timeago").timeago(),r.toggleClass("hidden",!o.length||!s.is(":focus")).find(".quick-search-results-container").html(o.length?o:"");const a=r.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");i.highlightMatches(e.searchOptions.term,a),n.fire("action:search.quick.complete",{data:t,options:e})}))}))}r.find('.filter-category input[type="checkbox"]').on("change",(function(){s.focus(),u()})),s.off("keyup").on("keyup",utils.debounce((function(){if(s.val().length<3)return r.addClass("hidden"),void(a=s.val());if(s.val()!==a){if(a=s.val(),!s.is(":focus"))return r.addClass("hidden");u()}}),500));let p=!1;r.on("mousedown",(function(){$(window).one("mouseup",(function(){r.addClass("hidden")})),p=!0})),s.on("blur",(function(){s.is(":focus")||p||r.hasClass("hidden")||r.addClass("hidden")}));let f=!1;n.on("action:ajaxify.end",(function(){ajaxify.isCold()||(f=!0)})),s.on("focus",(function(){p=!1;const t=s.val();a=t,t&&r.find("#quick-search-results").children().length&&(l(),f?(u(),f=!1):r.removeClass("hidden"),s[0].setSelectionRange(t.startsWith("in:topic")?t.indexOf(" ")+1:0,t.length))})),s.off("refresh").on("refresh",(function(){u()}))},i.showAndFocusInput=function(){$("#search-fields").removeClass("hidden"),$("#search-button").addClass("hidden"),$("#search-fields input").focus()},i.query=function(t,e){e=e||function(){},ajaxify.go("search?"+r(t)),e()},i.api=function(t,e){const n=config.relative_path+"/api/search?"+r(t);t.searchOnly=void 0;const o=config.relative_path+"/search?"+r(t);$.get(n,(function(t){t.url=o,e(t)}))},i.getSearchPreferences=function(){try{return JSON.parse(e.getItem("search-preferences")||"{}")}catch(t){return{}}},i.highlightMatches=function(t,e){if(!t||!e.length)return;const n=(t=utils.escapeHTML(t.replace(/^"/,"").replace(/"$/,"").trim())).split(" ").map((function(t){return utils.escapeRegexChars(t)})).join("|"),o=new RegExp("("+n+")","gi");e.each((function(){const t=$(this),e=[];t.find("*").each((function(){$(this).after("\x3c!-- "+e.length+" --\x3e"),e.push($("<div></div>").append($(this)))})),t.html(t.html().replace(o,(function(t,e){return'<strong class="search-match">'+e+"</strong>"}))),e.forEach((function(e,n){t.html(t.html().replace("\x3c!-- "+n+" --\x3e",(function(){return e.html()})))}))})),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-responsive")},i}.apply(e,o))||(t.exports=i)},66603:(t,e,n)=>{var o;void 0===(o=function(){function t(){this._store={},this._keys=[]}let e;t.prototype.isMock=!0,t.prototype.setItem=function(t,e){t=String(t),-1===this._keys.indexOf(t)&&this._keys.push(t),this._store[t]=e},t.prototype.getItem=function(t){return t=String(t),-1===this._keys.indexOf(t)?null:this._store[t]},t.prototype.removeItem=function(t){t=String(t),this._keys=this._keys.filter((function(e){return e!==t})),this._store[t]=null},t.prototype.clear=function(){this._keys=[],this._store={}},t.prototype.key=function(t){return t=parseInt(t,10)||0,this._keys[t]},Object.defineProperty&&Object.defineProperty(t.prototype,"length",{get:function(){return this._keys.length}});const n=Date.now().toString();try{if(e=window.localStorage,e.setItem(n,n),e.getItem(n)!==n)throw Error("localStorage behaved unexpectedly");return e.removeItem(n),e}catch(o){console.warn(o),console.warn("localStorage failed, falling back on sessionStorage");try{if(e=window.sessionStorage,e.setItem(n,n),e.getItem(n)!==n)throw Error("sessionStorage behaved unexpectedly");return e.removeItem(n),e}catch(e){return console.warn(e),console.warn("sessionStorage failed, falling back on memory storage"),new t}}}.call(e,n,e,t))||(t.exports=o)}}]);