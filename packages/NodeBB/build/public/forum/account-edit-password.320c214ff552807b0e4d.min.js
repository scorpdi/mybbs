"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2089],{37039:(s,a,e)=>{var r,n;r=[e(59494),e(32230),e(21322),e(74344),e(7927)],void 0===(n=function(s,a,e,r,n){const o={};function t(s,e){a.translate(e,(function(a){s.html(a),s.parent().removeClass("show-success").addClass("show-danger")}))}function i(s){s.html(""),s.parent().removeClass("show-danger").addClass("show-success")}return o.init=function(){s.init(),function(){const s=$("#inputCurrentPassword"),a=$("#password-notify"),o=$("#password-confirm-notify"),d=$("#inputNewPassword"),l=$("#inputNewPasswordAgain");let u=!1,c=!1;function w(){u=!1;try{if(utils.assertPasswordValidity(d.val(),e),d.val()===ajaxify.data.username)throw new Error("[[user:password_same_as_username]]");if(d.val()===ajaxify.data.email)throw new Error("[[user:password_same_as_email]]");i(a),u=!0}catch(s){t(a,s.message)}}function h(){d.val()!==l.val()?(t(o,"[[user:change_password_error_match]]"),c=!1):(d.val()?i(o):(o.parent().removeClass("alert-success alert-danger"),o.children().show(),o.find(".msg").html("")),c=!0)}d.on("blur",w),l.on("blur",h),$("#changePasswordBtn").on("click",(function(){w(),h();const e=$(this);return u&&c?(e.addClass("disabled").find("i").removeClass("hide"),r.put("/users/"+ajaxify.data.theirid+"/password",{currentPassword:s.val(),newPassword:d.val()}).then((()=>{parseInt(app.user.uid,10)===parseInt(ajaxify.data.uid,10)?window.location.href=config.relative_path+"/login":ajaxify.go("user/"+ajaxify.data.userslug+"/edit")})).finally((()=>{e.removeClass("disabled").find("i").addClass("hide"),s.val(""),d.val(""),l.val(""),a.parent().removeClass("show-success show-danger"),o.parent().removeClass("show-success show-danger"),c=!1,u=!1}))):(c||n.error("[[user:change_password_error_match]]"),u||n.error("[[user:change_password_error]]")),!1}))}()},o}.apply(a,r))||(s.exports=n)}}]);