"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2286,7214,6503,6721,6028,3388,8724,6815,1237,2344,560,3382,71,8306,3034,7927,7073],{59016:(e,t,n)=>{var a,i;a=[n(4695),n(80431),n(50395),n(7927)],i=function(e,t,a,i){const o={prepareDOM:function(){app.user.uid>0&&e.initUnreadTopics(),t.prepareDOM(),a.prepareDOM(),$('[component="header/usercontrol"] [data-status]').off("click").on("click",(function(e){const t=$(this).attr("data-status");socket.emit("user.setStatus",t,(function(e){if(e)return i.error(e);$('[data-uid="'+app.user.uid+'"] [component="user/status"], [component="header/profilelink"] [component="user/status"]').removeClass("away online dnd offline").addClass(t),$('[component="header/usercontrol"] [data-status]').each((function(){$(this).find("span").toggleClass("bold",$(this).attr("data-status")===t)})),app.user.status=t})),e.preventDefault()})),function(){const e=utils.findBootstrapEnvironment();"xs"===e||"sm"===e||utils.isTouchDevice()||($("#header-menu li a[title]").each((function(){$(this).tooltip({placement:"bottom",trigger:"hover",title:$(this).attr("title")})})),$("#search-form").tooltip({placement:"bottom",trigger:"hover",title:$("#search-button i").attr("title")}),$("#user_dropdown").tooltip({placement:"bottom",trigger:"hover",title:$("#user_dropdown").attr("title")}))}(),$("#header-menu .container").on("click",'[component="user/logout"]',(function(){return n.e(145).then((function(){var e=[n(39002)];(function(e){e()}).apply(null,e)})).catch(n.oe),!1}))}};return o}.apply(t,a),void 0===i||(e.exports=i)},50395:(e,t,n)=>{var a,i;a=[n(7237)],void 0===(i=function(e){const t={};function a(e){s("onChatMessageReceived",e)}function i(e){s("onUserStatusChange",e)}function o(e){s("onRoomRename",e)}function s(e,t){n.e(3216).then((function(){var a=[n(93216)];(function(n){n[e](t)}).apply(null,a)})).catch(n.oe)}return t.prepareDOM=function(){const t=e.get("chat/dropdown"),n=e.get("chat/list");t.on("click",(function(){t.parent().hasClass("open")||s("loadChatsDropdown",n)})),t.parents(".dropdown").hasClass("open")&&s("loadChatsDropdown",n),socket.removeListener("event:chats.receive",a),socket.on("event:chats.receive",a),socket.removeListener("event:user_status_change",i),socket.on("event:user_status_change",i),socket.removeListener("event:chats.roomRename",o),socket.on("event:chats.roomRename",o),socket.on("event:unread.updateChatCount",(function(t){e.get("chat/icon").toggleClass("unread-count",t>0).attr("data-content",t>99?"99+":t)}))},t}.apply(t,a))||(e.exports=i)},80431:(e,t,n)=>{var a,i;a=[n(7237)],void 0===(i=function(e){const t={};function a(e){o("onNewNotification",e)}function i(e){o("updateNotifCount",e)}function o(e,t){Promise.all([n.e(9986),n.e(7927)]).then((function(){var a=[n(69986)];(function(n){n[e](t)}).apply(null,a)})).catch(n.oe)}return t.prepareDOM=function(){const t=e.get("notifications"),n=t.children("a"),s=e.get("notifications/list");n.on("click",(function(e){e.preventDefault(),t.hasClass("open")||o("loadNotifications",s)})),n.parents(".dropdown").hasClass("open")&&o("loadNotifications",s),socket.removeListener("event:new_notification",a),socket.on("event:new_notification",a),socket.removeListener("event:notifications.updateCount",i),socket.on("event:notifications.updateCount",i)},t}.apply(t,a))||(e.exports=i)},4695:(e,t,n)=>{var a;void 0===(a=function(){const e={};function t(e){n("/unread",e.unreadTopicCount),n("/unread?filter=new",e.unreadNewTopicCount),n("/unread?filter=watched",e.unreadWatchedTopicCount),n("/unread?filter=unreplied",e.unreadUnrepliedTopicCount)}function n(e,t){utils.isNumber(t)&&($('a[href="'+config.relative_path+e+'"].navigation-link i').toggleClass("unread-count",t>0).attr("data-content",t>99?"99+":t),$('#mobile-menu [data-unread-url="'+e+'"]').attr("data-content",t>99?"99+":t))}return e.initUnreadTopics=function(){const e=app.user.unreadData;function a(t){if(t&&t.posts&&t.posts.length&&e){const n=t.posts[0];if(parseInt(n.uid,10)===parseInt(app.user.uid,10)||!n.topic.isFollowing&&3!==n.categoryWatchState)return;const a=n.topic.tid;e[""][a]&&e.new[a]&&e.watched[a]&&e.unreplied[a]||function(e){$('[data-tid="'+e+'"]').addClass("unread")}(a),e[""][a]||(i(""),e[""][a]=!0),n.isMain&&parseInt(n.uid,10)!==parseInt(app.user.uid,10)&&!e.new[a]&&(i("new"),e.new[a]=!0),parseInt(n.topic.postcount,10)<=1&&!e.unreplied[a]&&(i("unreplied"),e.unreplied[a]=!0),n.topic.isFollowing&&!e.watched[a]&&(i("watched"),e.watched[a]=!0)}}function i(e){const t="/unread"+(e?"?filter="+e:"");n(t,1+parseInt($('a[href="'+config.relative_path+t+'"].navigation-link i').attr("data-content"),10))}$(window).on("action:ajaxify.end",(function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach((function(t){delete e[t][ajaxify.data.tid]}))})),socket.removeListener("event:new_post",a),socket.on("event:new_post",a),socket.removeListener("event:unread.updateCount",t),socket.on("event:unread.updateCount",t)},e.updateUnreadTopicCount=n,e}.call(t,n,t,e))||(e.exports=a)},78989:(e,t,n)=>{var a,i;a=[n(31369)],void 0===(i=function(e){const t={init:function(){$("body").on("click",'[component="pagination/select-page"]',(function(){return e.prompt("[[global:enter_page_number]]",(function(e){t.loadPage(e)})),!1}))},loadPage:function(e,t){if(t=t||function(){},e=parseInt(e,10),!utils.isNumber(e)||e<1||e>ajaxify.data.pagination.pageCount)return;const n=utils.params();n.page=e;const a=window.location.pathname+"?"+$.param(n);ajaxify.go(a,t)},nextPage:function(e){t.loadPage(ajaxify.data.pagination.currentPage+1,e)},previousPage:function(e){t.loadPage(ajaxify.data.pagination.currentPage-1,e)}};return t}.apply(t,a))||(e.exports=i)},7927:(e,t,n)=>{var a,i;a=[n(32230),n(7237),n(85233)],i=function(e,t,n){const a={};function i(e,t){e.find("strong").translateHtml(t.title),e.find("p").translateHtml(t.message),e.attr("class","alert alert-dismissable alert-"+t.type+" clearfix"),clearTimeout(parseInt(e.attr("timeoutId"),10)),t.timeout&&s(e,t),n.fire("action:alert.update",{alert:e,params:t}),e.off("click").removeClass("pointer"),"function"==typeof t.clickfn&&e.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||t.clickfn(),o(e)}))}function o(e){e.fadeOut(500,(function(){$(this).remove()}))}function s(e,t){const a=t.timeout,i=setTimeout((function(){o(e),"function"==typeof t.timeoutfn&&t.timeoutfn(e,t)}),a);e.attr("timeoutId",i),e.css("transition-property","none"),e.removeClass("animate"),setTimeout((function(){e.css("transition-property",""),e.css("transition","width "+(a+450)+"ms linear, background-color "+(a+450)+"ms ease-in"),e.addClass("animate"),n.fire("action:alert.animate",{alert:e,params:t})}),50),e.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return a.alert=function(e){e.alert_id="alert_button_"+(e.alert_id?e.alert_id:(new Date).getTime()),e.title=e.title&&e.title.trim()||"",e.message=e.message?e.message.trim():"",e.type=e.type||"info";const a=$("#"+e.alert_id);a.length?i(a,e):function(e){app.parseAndTranslate("alert",e,(function(a){let r=$("#"+e.alert_id);if(r.length)return i(r,e);r=a,r.fadeIn(200),t.get("toaster/tray").prepend(r),"function"==typeof e.closefn&&r.find("button").on("click",(function(){return e.closefn(),o(r),!1})),e.timeout&&s(r,e),"function"==typeof e.clickfn&&r.addClass("pointer").on("click",(function(t){$(t.target).is(".close")||e.clickfn(r,e),o(r)})),n.fire("action:alert.new",{alert:r,params:e})}))}(e)},a.success=function(e,t){a.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:e,type:"success",timeout:t||5e3})},a.error=function(e,t){if("[[error:revalidate-failure]]"===(e=e&&e.message||e))return socket.disconnect(),void app.reconnect();a.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:e,type:"danger",timeout:t||1e4})},a.remove=function(e){$("#alert_button_"+e).remove()},a}.apply(t,a),void 0===i||(e.exports=i)},7237:(e,t,n)=>{var a;void 0===(a=function(){const e={};return e.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,t){return $('[component="topic"][data-'+e+'="'+t+'"]')},post:function(e,t){return $('[component="post"][data-'+e+'="'+t+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,t){return $('[component="category/topic"][data-'+e+'="'+t+'"]')},"categories/category":function(e,t){return $('[component="categories/category"][data-'+e+'="'+t+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},e.get=function(){const t=Array.prototype.slice.call(arguments,1);return e.core[arguments[0]]&&t.length?e.core[arguments[0]].apply(this,t):$('[component="'+arguments[0]+'"]')},e}.call(t,n,t,e))||(e.exports=a)},11120:e=>{e.exports=function(e,t,n){t.setGlobal("true",!0),t.setGlobal("false",!1);const a={displayMenuItem:function(e,t){const n=e.navigation[t];return!!n&&(!(n.route.match("/users")&&e.user&&!e.user.privileges["view:users"])&&(!(n.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"])&&!(n.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])))},buildMetaTag:function(e){return"<meta "+(e.name?'name="'+e.name+'" ':"")+(e.property?'property="'+e.property+'" ':"")+(e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"")+"/>\n\t"},buildLinkTag:function(e){const[t,n,a,i,o,s,r,c]=["link","rel","as","type","href","sizes","title","crossorigin"].map((t=>e[t]?`${t}="${e[t]}" `:""));return"<link "+t+n+a+i+s+r+o+c+"/>\n\t"},stringify:function(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")},escape:function(t){return e.escapeHTML(t)},stripTags:function(t){return e.stripHTMLTags(t)},generateCategoryBackground:i,generateChildrenCategories:function(e){let t="";return e&&e.children&&e.children.length?(e.children.forEach((function(e){if(e&&!e.isSection){const a=e.link?e.link:n+"/category/"+e.slug;t+='<span class="category-children-item pull-left"><div role="presentation" class="icon pull-left" style="'+i(e)+'"><i class="fa fa-fw '+e.icon+'"></i></div><a href="'+a+'"><small>'+e.name+"</small></a></span>"}})),t=t?'<span class="category-children">'+t+"</span>":t,t):t},generateTopicClass:function(e){return["locked","pinned","deleted","unread","scheduled"].filter((t=>!!e[t])).join(" ")},membershipBtn:function(e){return e.isMember&&"administrators"!==e.name?'<button class="btn btn-danger" data-action="leave" data-group="'+e.displayName+'"'+(e.disableLeave?" disabled":"")+'><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>':e.isPending&&"administrators"!==e.name?'<button class="btn btn-warning disabled"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>':e.isInvited?'<button class="btn btn-link" data-action="rejectInvite" data-group="'+e.displayName+'">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="'+e.name+'"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>':e.disableJoinRequests||"administrators"===e.name?"":'<button class="btn btn-success" data-action="join" data-group="'+e.displayName+'"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>'},spawnPrivilegeStates:function(e,t){const n=[];for(const e in t)t.hasOwnProperty(e)&&n.push({name:e,state:t[e]});return n.map((function(t){const n="guests"===e&&(["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"].includes(t.name)||t.name.startsWith("groups:admin:"))||"spiders"===e&&!["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"].includes(t.name)||"Global Moderators"===e&&["groups:moderate"].includes(t.name);return'<td class="text-center" data-privilege="'+t.name+'" data-value="'+t.state+'"><input autocomplete="off" type="checkbox"'+(t.state?" checked":"")+(n?' disabled="disabled"':"")+" /></td>"})).join("")},localeToHTML:function(e,t){return(e=e||t||"en-GB").replace("_","-")},renderTopicImage:function(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'},renderTopicEvents:function(e,t){if("most_votes"===t)return"";const n=this.posts[e].eventStart,a=this.posts[e].eventEnd,i=this.events.filter((e=>e.timestamp>=n&&e.timestamp<a));return i.length?o.call(this,i):""},renderEvents:o,renderDigestAvatar:function(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"},userAgentIcons:function(e){let t="";switch(e.platform){case"Linux":t+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":t+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":t+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":t+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":t+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":t+='<i class="fa fa-fw fa-mobile"></i>';break;default:t+='<i class="fa fa-fw fa-question-circle"></i>'}switch(e.browser){case"Chrome":t+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":t+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":t+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":t+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":t+='<i class="fa fa-fw fa-edge"></i>';break;default:t+='<i class="fa fa-fw fa-question-circle"></i>'}return t},buildAvatar:s,register:function(){Object.keys(a).forEach((function(e){t.registerHelper(e,a[e])}))},__escape:function(e){return e}};function i(e){if(!e)return"";const t=[];return e.bgColor&&t.push("background-color: "+e.bgColor),e.color&&t.push("color: "+e.color),e.backgroundImage&&(t.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&t.push("background-size: "+e.imageClass)),t.join("; ")+";"}function o(e){return e.reduce(((e,t)=>(e+=`<li component="topic/event" class="timeline-event" data-topic-event-id="${t.id}" data-topic-event-type="${t.type}">\n\t\t\t\t<div class="timeline-badge">\n\t\t\t\t\t<i class="fa ${t.icon||"fa-circle"}"></i>\n\t\t\t\t</div>\n\t\t\t\t<span class="timeline-text">\n\t\t\t\t\t${t.href?`<a href="${n}${t.href}">${t.text}</a>`:t.text}&nbsp;\n\t\t\t\t</span>\n\t\t\t`,t.user&&(t.user.system?e+='<span class="timeline-text">[[global:system-user]]</span>&nbsp;':e+=`<span><a href="${n}/user/${t.user.userslug}">${s(t.user,"xs",!0)}&nbsp;${t.user.username}</a></span>&nbsp;`),e+=`<span class="timeago timeline-text" title="${t.timestampISO}"></span>`,this.privileges.isAdminOrMod&&(e+=`&nbsp;<span component="topic/event/delete" data-topic-event-id="${t.id}" data-topic-event-type="${t.type} class="timeline-text pointer" title="[[topic:delete-event]]"><i class="fa fa-trash"></i></span>`),e)),"")}function s(e,t,n,a,i){e||(e=this);const o=['alt="'+e.username+'"','title="'+e.username+'"','data-uid="'+e.uid+'"','loading="lazy"'],s=[];return a=a||"",["xs","sm","sm2x","md","lg","xl"].includes(t)?a+=" avatar-"+t:isNaN(parseInt(t,10))?a+=" avatar-sm":s.push("width: "+t+"px;","height: "+t+"px;","line-height: "+t+"px;","font-size: "+parseInt(t,10)/16+"rem;"),o.unshift('class="avatar '+a+(n?" avatar-rounded":"")+'"'),i?o.push('component="'+i+'"'):o.push('component="avatar/'+(e.picture?"picture":"icon")+'"'),e.picture?"<img "+o.join(" ")+' src="'+e.picture+'" style="'+s.join(" ")+'" />':(s.push("background-color: "+e["icon:bgColor"]+";"),"<span "+o.join(" ")+' style="'+s.join(" ")+'">'+e["icon:text"]+"</span>")}return a}},59265:(e,t,n)=>{var a,i;const o=n(11120);a=[n(96795),n(59006)],void 0===(i=function(e,t){return o(e,t,config.relative_path)}.apply(t,a))||(e.exports=i)},44882:(e,t,n)=>{var a,i;a=[n(31369),n(32230),n(66603),n(7927),n(85233)],void 0===(i=function(e,t,n,a,i){const o={};let s,r;return o.show=function(){i.one("action:ajaxify.end",(()=>{!function(){const t=utils.params({full:!0});s=t.has("loggedin"),r=t.get("register"),s&&(a.alert({type:"success",title:"[[global:welcome_back]] "+app.user.username+"!",message:"[[global:you_have_successfully_logged_in]]",timeout:5e3}),t.delete("loggedin")),r&&(e.alert({message:utils.escapeHTML(decodeURIComponent(r))}),t.delete("register"));const n=t.toString();ajaxify.updateHistory(ajaxify.currentPage+(n?`?${n}`:"")+document.location.hash,!0)}(),config.cookies.enabled&&navigator.cookieEnabled&&!app.inAdmin&&"1"!==n.getItem("cookieconsent")&&(config.cookies.message=t.unescape(config.cookies.message),config.cookies.dismiss=t.unescape(config.cookies.dismiss),config.cookies.link=t.unescape(config.cookies.link),config.cookies.link_url=t.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,(function(e){$(document.body).append(e),$(document.body).addClass("cookie-consent-open");const t=$(".cookie-consent");t.find("button").on("click",(function(){n.setItem("cookieconsent","1"),t.remove(),$(document.body).removeClass("cookie-consent-open")}))}))),o.showEmailConfirmWarning()}))},o.showEmailConfirmWarning=function(e){if(!config.emailPrompt||!app.user.uid||1===parseInt(n.getItem("email-confirm-dismiss"),10))return;const t={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{n.setItem("email-confirm-dismiss",1)}};app.user.email?app.user["email:confirmed"]||app.user.isEmailConfirmSent?!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(t.message="[[error:email-not-confirmed-email-sent]]",a.alert(t)):(t.message=e||"[[error:email-not-confirmed]]",t.clickfn=function(){a.remove("email_confirm"),socket.emit("user.emailConfirm",{},(function(e){if(e)return a.error(e);a.success("[[notifications:email-confirm-sent]]")}))},a.alert(t)):(t.message="[[error:no-email-to-confirm]]",t.clickfn=function(){a.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},a.alert(t))},o.showInvalidSession=function(){e.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},o.showSessionMismatch=function(){e.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},o}.apply(t,a))||(e.exports=i)},7073:(e,t,n)=>{var a,i;a=[n(32230),n(66603),n(85233),n(7927)],void 0===(i=function(e,t,n,a){const i={current:{}};function o(e){const t=e.in||"titles",i=e.by||"";let o=e.term.replace(/^[ ?#]*/,"");try{o=encodeURIComponent(o)}catch(e){return a.error("[[error:invalid-search-term]]")}const s={term:o,in:t};return e.matchWords&&(s.matchWords=e.matchWords),i&&i.length&&("posts"===t||"titles"===t||"titlesposts"===t)&&(s.by=i),e.categories&&e.categories.length&&(s.categories=e.categories,e.searchChildren&&(s.searchChildren=e.searchChildren)),e.hasTags&&e.hasTags.length&&(s.hasTags=e.hasTags),parseInt(e.replies,10)>0&&(s.replies=e.replies,s.repliesFilter=e.repliesFilter||"atleast"),e.timeRange&&(s.timeRange=e.timeRange,s.timeFilter=e.timeFilter||"newer"),e.sortBy&&(s.sortBy=e.sortBy,s.sortDirection=e.sortDirection),e.showAs&&(s.showAs=e.showAs),e.searchOnly&&(s.searchOnly=e.searchOnly),n.fire("action:search.createQueryString",{query:s,data:e}),decodeURIComponent($.param(s))}return i.init=function(e){if(!config.searchEnabled)return;e=e||{in:config.searchDefaultInQuick||"titles"};const t=$("#search-button"),o=$("#search-fields"),s=$("#search-fields input"),r=$("#quick-search-container");$("#search-form .advanced-search-link").off("mousedown").on("mousedown",(function(){ajaxify.go("/search")})),$("#search-form").off("submit").on("submit",(function(){s.blur()})),s.off("blur").on("blur",(function(){setTimeout((function(){s.is(":focus")||(o.addClass("hidden"),t.removeClass("hidden"))}),200)})),s.off("focus");const c={inputEl:s,resultEl:r};i.enableQuickSearch({searchOptions:e,searchElements:c}),t.off("click").on("click",(function(e){return config.loggedIn||app.user.privileges["search:content"]?(e.stopPropagation(),i.showAndFocusInput(),!1):(a.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1)})),$("#search-form").off("submit").on("submit",(function(){const t=$(this).find("input"),a=i.getSearchPreferences();return a.term=t.val(),a.in=e.in,n.fire("action:search.submit",{searchOptions:a,searchElements:c}),i.query(a,(function(){t.val("")})),!1}))},i.enableQuickSearch=function(t){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const a=Object.assign({in:config.searchDefaultInQuick||"titles"},t.searchOptions),o=t.searchElements.resultEl,s=t.searchElements.inputEl;let r=s.val();const c=o.find(".filter-category");function u(){ajaxify.data.template.category&&e.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",(function(e){const t=$("<div></div>").html(e).text();c.find(".name").text(t)})),c.toggleClass("hidden",!ajaxify.data.template.category)}function l(){t.searchOptions=Object.assign({},a),t.searchOptions.term=s.val(),u(),ajaxify.data.template.category&&c.find('input[type="checkbox"]').is(":checked")&&(t.searchOptions.categories=[ajaxify.data.cid],t.searchOptions.searchChildren=!0),o.removeClass("hidden").find(".quick-search-results-container").html(""),o.find(".loading-indicator").removeClass("hidden"),n.fire("action:search.quick.start",t),t.searchOptions.searchOnly=1,i.api(t.searchOptions,(function(e){if(o.find(".loading-indicator").addClass("hidden"),!e.posts||t.hideOnNoMatches&&!e.posts.length)return o.addClass("hidden").find(".quick-search-results-container").html("");e.posts.forEach((function(e){const t=$("<div>"+e.content+"</div>").text(),n=s.val().toLowerCase().replace(/^in:topic-\d+/,""),a=Math.max(0,t.toLowerCase().indexOf(n)-40);e.snippet=utils.escapeHTML((a>0?"...":"")+t.slice(a,a+80)+(t.length-a>80?"...":""))})),app.parseAndTranslate("partials/quick-search-results",e,(function(a){a.length&&a.find(".timeago").timeago(),o.toggleClass("hidden",!a.length||!s.is(":focus")).find(".quick-search-results-container").html(a.length?a:"");const r=o.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");i.highlightMatches(t.searchOptions.term,r),n.fire("action:search.quick.complete",{data:e,options:t})}))}))}o.find('.filter-category input[type="checkbox"]').on("change",(function(){s.focus(),l()})),s.off("keyup").on("keyup",utils.debounce((function(){if(s.val().length<3)return o.addClass("hidden"),void(r=s.val());if(s.val()!==r){if(r=s.val(),!s.is(":focus"))return o.addClass("hidden");l()}}),500));let d=!1;o.on("mousedown",(function(){$(window).one("mouseup",(function(){o.addClass("hidden")})),d=!0})),s.on("blur",(function(){s.is(":focus")||d||o.hasClass("hidden")||o.addClass("hidden")}));let p=!1;n.on("action:ajaxify.end",(function(){ajaxify.isCold()||(p=!0)})),s.on("focus",(function(){d=!1;const e=s.val();r=e,e&&o.find("#quick-search-results").children().length&&(u(),p?(l(),p=!1):o.removeClass("hidden"),s[0].setSelectionRange(e.startsWith("in:topic")?e.indexOf(" ")+1:0,e.length))})),s.off("refresh").on("refresh",(function(){l()}))},i.showAndFocusInput=function(){$("#search-fields").removeClass("hidden"),$("#search-button").addClass("hidden"),$("#search-fields input").focus()},i.query=function(e,t){t=t||function(){},ajaxify.go("search?"+o(e)),t()},i.api=function(e,t){const n=config.relative_path+"/api/search?"+o(e);e.searchOnly=void 0;const a=config.relative_path+"/search?"+o(e);$.get(n,(function(e){e.url=a,t(e)}))},i.getSearchPreferences=function(){try{return JSON.parse(t.getItem("search-preferences")||"{}")}catch(e){return{}}},i.highlightMatches=function(e,t){if(!e||!t.length)return;const n=(e=utils.escapeHTML(e.replace(/^"/,"").replace(/"$/,"").trim())).split(" ").map((function(e){return utils.escapeRegexChars(e)})).join("|"),a=new RegExp("("+n+")","gi");t.each((function(){const e=$(this),t=[];e.find("*").each((function(){$(this).after("\x3c!-- "+t.length+" --\x3e"),t.push($("<div></div>").append($(this)))})),e.html(e.html().replace(a,(function(e,t){return'<strong class="search-match">'+t+"</strong>"}))),t.forEach((function(t,n){e.html(e.html().replace("\x3c!-- "+n+" --\x3e",(function(){return t.html()})))}))})),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-responsive")},i}.apply(t,a))||(e.exports=i)},66603:(e,t,n)=>{var a;void 0===(a=function(){function e(){this._store={},this._keys=[]}let t;e.prototype.isMock=!0,e.prototype.setItem=function(e,t){e=String(e),-1===this._keys.indexOf(e)&&this._keys.push(e),this._store[e]=t},e.prototype.getItem=function(e){return e=String(e),-1===this._keys.indexOf(e)?null:this._store[e]},e.prototype.removeItem=function(e){e=String(e),this._keys=this._keys.filter((function(t){return t!==e})),this._store[e]=null},e.prototype.clear=function(){this._keys=[],this._store={}},e.prototype.key=function(e){return e=parseInt(e,10)||0,this._keys[e]},Object.defineProperty&&Object.defineProperty(e.prototype,"length",{get:function(){return this._keys.length}});const n=Date.now().toString();try{if(t=window.localStorage,t.setItem(n,n),t.getItem(n)!==n)throw Error("localStorage behaved unexpectedly");return t.removeItem(n),t}catch(a){console.warn(a),console.warn("localStorage failed, falling back on sessionStorage");try{if(t=window.sessionStorage,t.setItem(n,n),t.getItem(n)!==n)throw Error("sessionStorage behaved unexpectedly");return t.removeItem(n),t}catch(t){return console.warn(t),console.warn("sessionStorage failed, falling back on memory storage"),new e}}}.call(t,n,t,e))||(e.exports=a)},27145:(e,t,n)=>{var a,i;e=n.nmd(e),a=[n(59006),n(32230),n(85233)],i=function(t,n,a){const i={};function o(){i.tasklist.find("li").length>0?i.taskbar.attr("data-active","1"):i.taskbar.removeAttr("data-active")}function s(){i.tasklist.find(".active").removeClass("active")}return i.init=function(){const e=this;t.render("modules/taskbar",{}).then((function(t){e.taskbar=$(t),e.tasklist=e.taskbar.find("ul"),$(document.body).append(e.taskbar),e.taskbar.on("click","li",(async function(){const e=$(this),t=e.attr("data-module"),n=e.attr("data-uuid"),a=await app.require(t);return e.hasClass("active")?a.minimize(n):(s(),a.load(n),i.toggleNew(n,!1),i.tasklist.removeClass("active"),e.addClass("active")),!1}))})),$(window).on("action:app.loggedOut",(function(){i.closeAll()}))},i.close=async function(t,n){let a="close";if("chat"===t&&(a="closeByUUID"),i.tasklist.find('[data-module="'+e+'"][data-uuid="'+n+'"]').length){const e=await app.require(t);e&&"function"==typeof e[a]&&e[a](n)}},i.closeAll=function(e){let t="[data-uuid]";e&&(t='[data-module="'+e+'"]'+t),i.tasklist.find(t).each((function(t,n){i.close(e||n.getAttribute("data-module"),n.getAttribute("data-uuid"))}))},i.discard=function(e,t){i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]').remove(),o()},i.push=function(e,t,r,c){c=c||function(){};const u=i.tasklist.find('li[data-uuid="'+t+'"]'),l={module:e,uuid:t,options:r,element:u};a.fire("filter:taskbar.push",l),!u.length&&l.module?function(e,t){n.translate(e.options.title,(function(n){const r=$("<div></div>").text(n||"NodeBB Task").html(),c=$("<li></li>").addClass(e.options.className).html('<a href="#"'+(e.options.image?" style=\"background-image: url('"+e.options.image.replace(/&#x2F;/g,"/")+"'); background-size: cover;\"":"")+">"+(e.options.icon?'<i class="fa '+e.options.icon+'"></i> ':"")+'<span aria-label="'+r+'" component="taskbar/title">'+r+"</span></a>").attr({title:r,"data-module":e.module,"data-uuid":e.uuid}).addClass(void 0!==e.options.state?e.options.state:"active");e.options.state&&"active"!==e.options.state||s(),i.tasklist.append(c),o(),e.element=c,c.data(e),a.fire("action:taskbar.pushed",e),t(c)}))}(l,c):c(u)},i.get=function(e){return $('[data-module="'+e+'"]').map((function(e,t){return $(t).data()}))},i.minimize=function(e,t){i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]').toggleClass("active",!1)},i.toggleNew=function(e,t,n){i.tasklist.find('[data-uuid="'+e+'"]').toggleClass("new",t),n||a.fire("action:taskbar.toggleNew",e)},i.updateActive=function(e){const t=i.tasklist.find("li");t.removeClass("active"),t.filter('[data-uuid="'+e+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+e+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},i.isActive=function(e){return i.tasklist.find('li[data-uuid="'+e+'"]').hasClass("active")},i.update=function(e,t,n){const a=i.tasklist.find('[data-module="'+e+'"][data-uuid="'+t+'"]');if(!a.length)return;const o=a.data();Object.keys(n).forEach((function(e){o[e]=n[e],function(e,t,n){switch(t){case"title":e.find('[component="taskbar/title"]').text(n);break;case"icon":e.find("i").attr("class","fa fa-"+n);break;case"image":e.find("a").css("background-image",n?'url("'+n.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":e.find("a").css("background-color",n)}}(a,e,n[e])})),a.data(o)},i}.apply(t,a),void 0===i||(e.exports=i)}}]);