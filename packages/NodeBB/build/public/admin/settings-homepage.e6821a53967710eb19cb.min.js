"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4541,7214,6503,6027,71,3564,7927,9764],{99764:(t,e,n)=>{var o,a;o=[n(50431),n(42441),n(85233),n(7927)],void 0===(a=function(t,e,n,o){const a={populateTOC:function(){const t=$(".settings-header");if(t.length>1){t.each((function(){const t=$(this).text(),e=t.toLowerCase().replace(/ /g,"-").trim();$(this).prepend('<a name="'+e+'"></a>'),$(".section-content ul").append('<li><a href="#'+e+'">'+t+"</a></li>")}));const e=$('a[name="'+window.location.hash.replace("#","")+'"]');e.length&&$("html, body").animate({scrollTop:e.offset().top+"px"},400)}else $(".content-header").parents(".row").remove()},prepare:function(a){const i=$("#content [data-field]"),r=i.length,s=$("#save"),c=$("#revert");let p,u,l,d;i.on("change",(function(){app.flags=app.flags||{},app.flags._unsaved=!0}));const f=["text","hidden","password","textarea","number"];for(p=0;p<r;p+=1)if(d=i.eq(p),u=d.attr("data-field"),l=d.attr("type"),app.config.hasOwnProperty(u))if(d.is("input")&&"checkbox"===l){const t=1===parseInt(app.config[u],10);d.prop("checked",t),d.parents(".mdl-switch").toggleClass("is-checked",t)}else(d.is("textarea")||d.is("select")||d.is("input")&&-1!==f.indexOf(l))&&d.val(app.config[u]);c.off("click").on("click",(function(){ajaxify.refresh()})),s.off("click").on("click",(function(t){t.preventDefault(),function(t,e){const n={};t.each((function(){const t=$(this),e=t.attr("data-field");let o,a;if(t.is("input"))switch(a=t.attr("type"),a){case"text":case"password":case"hidden":case"textarea":case"number":o=t.val();break;case"checkbox":o=t.prop("checked")?"1":"0"}else(t.is("textarea")||t.is("select"))&&(o=t.val());n[e]=o})),socket.emit("admin.config.setMultiple",n,(function(t){if(t)return e(t);for(const t in n)n.hasOwnProperty(t)&&(app.config[t]=n[t]);e()}))}(i,(function(t){if(t)return o.alert({alert_id:"config_status",timeout:2500,title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${t.message}]]`,type:"danger"});app.flags._unsaved=!1,o.alert({alert_id:"config_status",timeout:2500,title:"[[admin/admin:changes-saved]]",message:"[[admin/admin:changes-saved-message]]",type:"success"}),n.fire("action:admin.settingsSaved")}))})),e.bind("ctrl+s",(function(t){s.click(),t.preventDefault()})),$('#content input[data-action="upload"]').each((function(){const e=$(this);e.on("click",(function(){t.show({title:e.attr("data-title"),description:e.attr("data-description"),route:e.attr("data-route"),params:{},showHelp:e.attr("data-help")?1===e.attr("data-help"):void 0,accept:e.attr("data-accept")},(function(t){$("#"+e.attr("data-target")).val(t)}))}))})),$('[data-field-type="tagsinput"]').tagsinput({confirmKeys:[13,44],trimValue:!0}),app.flags._unsaved=!1,$("#clear-sitemap-cache").off("click").on("click",(function(){return socket.emit("admin.settings.clearSitemapCache",(function(){o.success("Sitemap Cache Cleared!")})),!1})),"function"==typeof a&&a(),setTimeout((function(){n.fire("action:admin.settingsLoaded")}),0)},remove:function(t){socket.emit("admin.config.remove",t)}};return a}.apply(e,o))||(t.exports=a)},73376:(t,e,n)=>{var o,a;o=[n(99764)],void 0===(a=function(){function t(){"custom"===$('[data-field="homePageRoute"]').val()?$("#homePageCustom").show():$("#homePageCustom").hide()}return{init:function(){$('[data-field="homePageRoute"]').on("change",t),t()}}}.apply(e,o))||(t.exports=a)},7927:(t,e,n)=>{var o,a;o=[n(32230),n(7237),n(85233)],a=function(t,e,n){const o={};function a(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&r(t,e),n.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||e.clickfn(),i(t)}))}function i(t){t.fadeOut(500,(function(){$(this).remove()}))}function r(t,e){const o=e.timeout,a=setTimeout((function(){i(t),"function"==typeof e.timeoutfn&&e.timeoutfn(t,e)}),o);t.attr("timeoutId",a),t.css("transition-property","none"),t.removeClass("animate"),setTimeout((function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:e})}),50),t.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return o.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?a(o,t):function(t){app.parseAndTranslate("alert",t,(function(o){let s=$("#"+t.alert_id);if(s.length)return a(s,t);s=o,s.fadeIn(200),e.get("toaster/tray").prepend(s),"function"==typeof t.closefn&&s.find("button").on("click",(function(){return t.closefn(),i(s),!1})),t.timeout&&r(s,t),"function"==typeof t.clickfn&&s.addClass("pointer").on("click",(function(e){$(e.target).is(".close")||t.clickfn(s,t),i(s)})),n.fire("action:alert.new",{alert:s,params:t})}))}(t)},o.success=function(t,e){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},o.error=function(t,e){if("[[error:revalidate-failure]]"===(t=t&&t.message||t))return socket.disconnect(),void app.reconnect();o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},o.remove=function(t){$("#alert_button_"+t).remove()},o}.apply(e,o),void 0===a||(t.exports=a)},7237:(t,e,n)=>{var o;void 0===(o=function(){const t={};return t.core={"topic/teaser":function(t){return t?$('[component="category/topic"][data-tid="'+t+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(t,e){return $('[component="topic"][data-'+t+'="'+e+'"]')},post:function(t,e){return $('[component="post"][data-'+t+'="'+e+'"]')},"post/content":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/content"]')},"post/header":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/header"]')},"post/anchor":function(t){return $('[component="post"][data-index="'+t+'"] [component="post/anchor"]')},"post/vote-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/vote-count"]')},"post/bookmark-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/bookmark-count"]')},"user/postcount":function(t){return $('[component="user/postcount"][data-uid="'+t+'"]')},"user/reputation":function(t){return $('[component="user/reputation"][data-uid="'+t+'"]')},"category/topic":function(t,e){return $('[component="category/topic"][data-'+t+'="'+e+'"]')},"categories/category":function(t,e){return $('[component="categories/category"][data-'+t+'="'+e+'"]')},"chat/message":function(t){return $('[component="chat/message"][data-mid="'+t+'"]')},"chat/message/body":function(t){return $('[component="chat/message"][data-mid="'+t+'"] [component="chat/message/body"]')},"chat/recent/room":function(t){return $('[component="chat/recent/room"][data-roomid="'+t+'"]')}},t.get=function(){const e=Array.prototype.slice.call(arguments,1);return t.core[arguments[0]]&&e.length?t.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},t}.call(e,n,e,t))||(t.exports=o)},50431:(t,e,n)=>{var o,a;o=[n(86569)],a=function(){const t={};function e(e,n,o){t.hideAlerts(e),"error"===n&&e.find("#fileUploadSubmitBtn").removeClass("disabled"),e.find("#alert-"+n).translateText(o).removeClass("hide")}function n(t){if("string"==typeof t)try{return $.parseJSON(t)}catch(t){return{error:"[[error:parse-error]]"}}return t}return t.show=function(n,o){const a=!(!n.hasOwnProperty("fileSize")||void 0===n.fileSize)&&parseInt(n.fileSize,10);app.parseAndTranslate("partials/modals/upload_file_modal",{showHelp:!n.hasOwnProperty("showHelp")||void 0===n.showHelp||n.showHelp,fileSize:a,title:n.title||"[[global:upload_file]]",description:n.description||"",button:n.button||"[[global:upload]]",accept:n.accept?n.accept.replace(/,/g,"&#44; "):""},(function(i){i.modal("show"),i.on("hidden.bs.modal",(function(){i.remove()}));const r=i.find("#uploadForm");r.attr("action",n.route),r.find("#params").val(JSON.stringify(n.params)),i.find("#fileUploadSubmitBtn").on("click",(function(){$(this).addClass("disabled"),r.submit()})),r.submit((function(){return function(n,o,a){e(n,"status","[[uploads:uploading-file]]"),n.find("#upload-progress-bar").css("width","0%"),n.find("#upload-progress-box").show().removeClass("hide");const i=n.find("#fileInput");return i.val()?(r=i[0],s=o,!window.FileReader||!s||r.files[0].size<=1e3*s?void t.ajaxSubmit(n,a):e(n,"error","[[error:file-too-big, "+o+"]]")):e(n,"error","[[uploads:select-file-to-upload]]");var r,s}(i,a,o),!1}))}))},t.hideAlerts=function(t){$(t).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")},t.ajaxSubmit=function(o,a){o.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=n(t),e(o,"error",t.responseJSON?t.responseJSON.error||t.statusText:"error uploading, code : "+t.status)},uploadProgress:function(t,e,n,a){o.find("#upload-progress-bar").css("width",a+"%")},success:function(i){let r=n(i);i.hasOwnProperty("response")&&i.hasOwnProperty("status")&&"ok"===i.status.code&&(r=i.response.images),a(r[0].url),e(o,"success","[[uploads:upload-success]]"),setTimeout((function(){t.hideAlerts(o),o.modal("hide")}),750)}})},t}.apply(e,o),void 0===a||(t.exports=a)}}]);