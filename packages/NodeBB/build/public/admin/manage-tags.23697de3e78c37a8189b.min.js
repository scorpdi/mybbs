/*! For license information please see manage-tags.23697de3e78c37a8189b.min.js.LICENSE.txt */
(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[2882,7214,6503,9447,71,7927],{90301:(e,t,n)=>{"use strict";var s,i;s=[n(31369),n(7927),n(92555)],void 0===(i=function(e,t,n){const s={init:function(){n.enable(".tag-management",".tag-row"),function(){const e=$("#create-modal"),n=$("#create-tag-name"),s=$("#create-modal-go");e.on("keypress",(function(e){13===e.keyCode&&s.click()})),$("#create").on("click",(function(){e.modal("show"),setTimeout((function(){n.focus()}),250)})),s.on("click",(function(){socket.emit("admin.tags.create",{tag:n.val()},(function(s){if(s)return t.error(s);n.val(""),e.on("hidden.bs.modal",(function(){ajaxify.refresh()})),e.modal("hide")}))}))}(),$("#tag-search").on("input propertychange",utils.debounce((function(){socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},(function(e,s){if(e)return t.error(e);app.parseAndTranslate("admin/manage/tags","tags",{tags:s.tags},(function(e){$(".tag-list").html(e),utils.makeNumbersHumanReadable(e.find(".human-readable-number")),n.enable(".tag-management",".tag-row")}))}))}),250)),$("#rename").on("click",(function(){const n=$(".tag-row.ui-selected");if(!n.length)return;const s=e.dialog({title:"[[admin/manage/tags:alerts.editing]]",message:$(".rename-modal").html(),buttons:{success:{label:"Save",className:"btn-primary save",callback:function(){const e=[];n.each((function(t,n){n=$(n),e.push({value:n.attr("data-tag"),newName:s.find('[data-name="value"]').val()})})),socket.emit("admin.tags.rename",e,(function(e){if(e)return t.error(e);t.success("[[admin/manage/tags:alerts.update-success]]"),ajaxify.refresh()}))}}}})})),$("#deleteSelected").on("click",(function(){const n=$(".tag-row.ui-selected");n.length&&e.confirm("[[admin/manage/tags:alerts.confirm-delete]]",(function(e){if(!e)return;const s=[];n.each((function(e,t){s.push($(t).attr("data-tag"))})),socket.emit("admin.tags.deleteTags",{tags:s},(function(e){if(e)return t.error(e);n.remove()}))}))}))}};return s}.apply(t,s))||(e.exports=i)},92555:(e,t,n)=>{"use strict";var s,i;s=[n(44855)],void 0===(i=function(){return{enable:function(e,t){$(e).selectable({filter:t})}}}.apply(t,s))||(e.exports=i)},7927:(e,t,n)=>{"use strict";var s,i;s=[n(32230),n(7237),n(85233)],i=function(e,t,n){const s={};function i(e,t){e.find("strong").translateHtml(t.title),e.find("p").translateHtml(t.message),e.attr("class","alert alert-dismissable alert-"+t.type+" clearfix"),clearTimeout(parseInt(e.attr("timeoutId"),10)),t.timeout&&o(e,t),n.fire("action:alert.update",{alert:e,params:t}),e.off("click").removeClass("pointer"),"function"==typeof t.clickfn&&e.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||t.clickfn(),a(e)}))}function a(e){e.fadeOut(500,(function(){$(this).remove()}))}function o(e,t){const s=t.timeout,i=setTimeout((function(){a(e),"function"==typeof t.timeoutfn&&t.timeoutfn(e,t)}),s);e.attr("timeoutId",i),e.css("transition-property","none"),e.removeClass("animate"),setTimeout((function(){e.css("transition-property",""),e.css("transition","width "+(s+450)+"ms linear, background-color "+(s+450)+"ms ease-in"),e.addClass("animate"),n.fire("action:alert.animate",{alert:e,params:t})}),50),e.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return s.alert=function(e){e.alert_id="alert_button_"+(e.alert_id?e.alert_id:(new Date).getTime()),e.title=e.title&&e.title.trim()||"",e.message=e.message?e.message.trim():"",e.type=e.type||"info";const s=$("#"+e.alert_id);s.length?i(s,e):function(e){app.parseAndTranslate("alert",e,(function(s){let c=$("#"+e.alert_id);if(c.length)return i(c,e);c=s,c.fadeIn(200),t.get("toaster/tray").prepend(c),"function"==typeof e.closefn&&c.find("button").on("click",(function(){return e.closefn(),a(c),!1})),e.timeout&&o(c,e),"function"==typeof e.clickfn&&c.addClass("pointer").on("click",(function(t){$(t.target).is(".close")||e.clickfn(c,e),a(c)})),n.fire("action:alert.new",{alert:c,params:e})}))}(e)},s.success=function(e,t){s.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:e,type:"success",timeout:t||5e3})},s.error=function(e,t){if("[[error:revalidate-failure]]"===(e=e&&e.message||e))return socket.disconnect(),void app.reconnect();s.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:e,type:"danger",timeout:t||1e4})},s.remove=function(e){$("#alert_button_"+e).remove()},s}.apply(t,s),void 0===i||(e.exports=i)},7237:(e,t,n)=>{"use strict";var s;void 0===(s=function(){const e={};return e.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,t){return $('[component="topic"][data-'+e+'="'+t+'"]')},post:function(e,t){return $('[component="post"][data-'+e+'="'+t+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,t){return $('[component="category/topic"][data-'+e+'="'+t+'"]')},"categories/category":function(e,t){return $('[component="categories/category"][data-'+e+'="'+t+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},e.get=function(){const t=Array.prototype.slice.call(arguments,1);return e.core[arguments[0]]&&t.length?e.core[arguments[0]].apply(this,t):$('[component="'+arguments[0]+'"]')},e}.call(t,n,t,e))||(e.exports=s)},44855:(e,t,n)=>{var s,i,a;!function(o){"use strict";i=[n(19755),n(66177),n(85592),n(26891)],void 0===(a="function"==typeof(s=function(e){return e.widget("ui.selectable",e.ui.mouse,{version:"1.13.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each((function(){var n=e(this),s=n.offset(),i={left:s.left-t.elementPos.left,top:s.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:i.left,top:i.top,right:i.left+n.outerWidth(),bottom:i.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})}))},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var n=this,s=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset(),this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each((function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(n._removeClass(s.$element,"ui-selected"),s.selected=!1,n._addClass(s.$element,"ui-unselecting"),s.unselecting=!0,n._trigger("unselecting",t,{unselecting:s.element}))})),e(t.target).parents().addBack().each((function(){var s,i=e.data(this,"selectable-item");if(i)return s=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),n._removeClass(i.$element,s?"ui-unselecting":"ui-selected")._addClass(i.$element,s?"ui-selecting":"ui-unselecting"),i.unselecting=!s,i.selecting=s,i.selected=s,s?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var n,s=this,i=this.options,a=this.opos[0],o=this.opos[1],c=t.pageX,l=t.pageY;return a>c&&(n=c,c=a,a=n),o>l&&(n=l,l=o,o=n),this.helper.css({left:a,top:o,width:c-a,height:l-o}),this.selectees.each((function(){var n=e.data(this,"selectable-item"),r=!1,u={};n&&n.element!==s.element[0]&&(u.left=n.left+s.elementPos.left,u.right=n.right+s.elementPos.left,u.top=n.top+s.elementPos.top,u.bottom=n.bottom+s.elementPos.top,"touch"===i.tolerance?r=!(u.left>c||u.right<a||u.top>l||u.bottom<o):"fit"===i.tolerance&&(r=u.left>a&&u.right<c&&u.top>o&&u.bottom<l),r?(n.selected&&(s._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(s._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(s._addClass(n.$element,"ui-selecting"),n.selecting=!0,s._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(s._removeClass(n.$element,"ui-selecting"),n.selecting=!1,s._addClass(n.$element,"ui-selected"),n.selected=!0):(s._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(s._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),s._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&(t.metaKey||t.ctrlKey||n.startselected||(s._removeClass(n.$element,"ui-selected"),n.selected=!1,s._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,s._trigger("unselecting",t,{unselecting:n.element})))))})),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each((function(){var s=e.data(this,"selectable-item");n._removeClass(s.$element,"ui-unselecting"),s.unselecting=!1,s.startselected=!1,n._trigger("unselected",t,{unselected:s.element})})),e(".ui-selecting",this.element[0]).each((function(){var s=e.data(this,"selectable-item");n._removeClass(s.$element,"ui-selecting")._addClass(s.$element,"ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,n._trigger("selected",t,{selected:s.element})})),this._trigger("stop",t),this.helper.remove(),!1}})})?s.apply(t,i):s)||(e.exports=a)}()}}]);