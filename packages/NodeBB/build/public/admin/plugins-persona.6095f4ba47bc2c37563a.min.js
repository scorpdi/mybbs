"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[4027,7214,6503,71,5655,7927],{70767:(t,e,n)=>{var o,a;o=[n(18340)],void 0===(a=function(t){return{init:function(){t.load("persona",$(".persona-settings")),$("#save").on("click",(function(){t.save("persona",$(".persona-settings"))}))}}}.apply(e,o))||(t.exports=a)},7927:(t,e,n)=>{var o,a;o=[n(32230),n(7237),n(85233)],a=function(t,e,n){const o={};function a(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&s(t,e),n.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||e.clickfn(),i(t)}))}function i(t){t.fadeOut(500,(function(){$(this).remove()}))}function s(t,e){const o=e.timeout,a=setTimeout((function(){i(t),"function"==typeof e.timeoutfn&&e.timeoutfn(t,e)}),o);t.attr("timeoutId",a),t.css("transition-property","none"),t.removeClass("animate"),setTimeout((function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:e})}),50),t.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return o.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?a(o,t):function(t){app.parseAndTranslate("alert",t,(function(o){let c=$("#"+t.alert_id);if(c.length)return a(c,t);c=o,c.fadeIn(200),e.get("toaster/tray").prepend(c),"function"==typeof t.closefn&&c.find("button").on("click",(function(){return t.closefn(),i(c),!1})),t.timeout&&s(c,t),"function"==typeof t.clickfn&&c.addClass("pointer").on("click",(function(e){$(e.target).is(".close")||t.clickfn(c,t),i(c)})),n.fire("action:alert.new",{alert:c,params:t})}))}(t)},o.success=function(t,e){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},o.error=function(t,e){if("[[error:revalidate-failure]]"===(t=t&&t.message||t))return socket.disconnect(),void app.reconnect();o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},o.remove=function(t){$("#alert_button_"+t).remove()},o}.apply(e,o),void 0===a||(t.exports=a)},7237:(t,e,n)=>{var o;void 0===(o=function(){const t={};return t.core={"topic/teaser":function(t){return t?$('[component="category/topic"][data-tid="'+t+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(t,e){return $('[component="topic"][data-'+t+'="'+e+'"]')},post:function(t,e){return $('[component="post"][data-'+t+'="'+e+'"]')},"post/content":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/content"]')},"post/header":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/header"]')},"post/anchor":function(t){return $('[component="post"][data-index="'+t+'"] [component="post/anchor"]')},"post/vote-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/vote-count"]')},"post/bookmark-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/bookmark-count"]')},"user/postcount":function(t){return $('[component="user/postcount"][data-uid="'+t+'"]')},"user/reputation":function(t){return $('[component="user/reputation"][data-uid="'+t+'"]')},"category/topic":function(t,e){return $('[component="category/topic"][data-'+t+'="'+e+'"]')},"categories/category":function(t,e){return $('[component="categories/category"][data-'+t+'="'+e+'"]')},"chat/message":function(t){return $('[component="chat/message"][data-mid="'+t+'"]')},"chat/message/body":function(t){return $('[component="chat/message"][data-mid="'+t+'"] [component="chat/message/body"]')},"chat/recent/room":function(t){return $('[component="chat/recent/room"][data-roomid="'+t+'"]')}},t.get=function(){const e=Array.prototype.slice.call(arguments,1);return t.core[arguments[0]]&&e.length?t.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},t}.call(e,n,e,t))||(t.exports=o)},18340:(t,e,n)=>{var o,a;o=[n(85233),n(7927)],void 0===(a=function(t,e){let o,a,i=[],s=0;function c(t,e){"string"!=typeof t&&(t=(t=$(t)).data("type")||t.attr("type")||t.prop("tagName"));const n=o.plugins[t.toLowerCase()];if(null==n)return;const a=n[e];return"function"==typeof a?a:null}return a={deepClone:function(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t},createElement:function(t,e,n){const o=document.createElement(t);for(const t in e)e.hasOwnProperty(t)&&o.setAttribute(t,e[t]);return n&&o.appendChild(document.createTextNode(n)),o},initElement:function(t){const e=c(t,"init");null!=e&&e.call(o,$(t))},destructElement:function(t){const e=c(t,"destruct");null!=e&&e.call(o,$(t))},createElementOfType:function(t,e,n){let i;const s=c(t,"create");return null!=s?i=$(s.call(o,t,e,n)):(null==n&&(n={}),null!=t&&(n.type=t),i=$(a.createElement(e||"input",n))),i.data("type",t),a.initElement(i),i},cleanArray:function(t,e,n){const o=[];if(!e&&n)return t;for(let a=0;a<t.length;a+=1){let i=t[a];e&&(i===!!i?i=+i:i&&"function"==typeof i.trim&&(i=i.trim())),(n||null!=i&&i.length)&&o.push(i)}return o},isTrue:function(t){return"true"===t||1==+t},isFalse:function(t){return"false"===t||0==+t},readValue:function(t){let e=!a.isFalse(t.data("empty"));const n=!a.isFalse(t.data("trim")),i=t.data("split"),s=c(t,"get");let r;if(null!=s)return s.call(o,t,n,e);if(null!=i){e=a.isTrue(t.data("empty")),r=t.val();const o=null!=r&&r.split(i||",")||[];return a.cleanArray(o,n,e)}return r=t.val(),n&&null!=r&&"function"==typeof r.trim&&(r=r.trim()),e||void 0!==r&&(null==r||0!==r.length)?r:void 0},fillField:function(t,e){const n=c(t,"set");let a=t.data("trim");if(a="false"!==a&&0!=+a,null!=n)return n.call(o,t,e,a);e instanceof Array&&(e=e.join(t.data("split")||(a?", ":","))),a&&e&&"function"==typeof e.trim?"function"==typeof(e=e.trim()).toString&&(e=e.toString()):null!=e?("function"==typeof e.toString&&(e=e.toString()),a&&(e=e.trim())):e="",void 0!==e&&t.val(e)},initFields:function(t){$("[data-key]",t).each((function(t,e){const n=c(e=$(e),"init"),i=e.data("key").split(".");let s=o.get();null!=n&&n.call(o,e);for(let t=0;t<i.length;t+=1){const e=i[t];e&&null!=s&&(s=s[e])}a.fillField(e,s)}))},registerReadyJobs:function(t){return s+=t,s},beforeReadyJobsDecreased:function(t){if(null==t&&(t=1),s>0&&(s-=t,s<=0)){for(let t=0;t<i.length;t+=1)i[t]();i=[]}},whenReady:function(t){s<=0?t():i.push(t)},serializeForm:function(t){const e=t.serializeObject();return t.find('input[type="checkbox"]').each((function(t,n){(n=$(n)).is(":checked")||(e[n.attr("name")]="off")})),t.find("select[multiple]").each((function(t,n){n=$(n),e[n.attr("name")]=JSON.stringify(n.val())})),e},persistSettings:function(t,n,o,i){null!=n&&null!=n._&&"string"!=typeof n._&&((n=a.deepClone(n))._=JSON.stringify(n._)),socket.emit("admin.settings.set",{hash:t,values:n},(function(t){o&&(t?e.alert({title:"[[admin/admin:changes-not-saved]]",type:"danger",message:`[[admin/admin/changes-not-saved-message, ${t.message}]]`,timeout:5e3}):e.alert({title:"[[admin/admin:changes-saved]]",type:"success",message:"[[admin/admin:changes-saved-message]]",timeout:2500})),"function"==typeof i&&i(t)}))},use:function(t){try{t._=JSON.parse(t._)}catch(t){}o.cfg=t}},o={helper:a,plugins:{},cfg:{},get:function(){return null!=o.cfg&&void 0!==o.cfg._?o.cfg._:o.cfg},registerPlugin:function(t,e){null==e?e=t.types:t.types=e,"function"==typeof t.use&&t.use.call(o);for(let n=0;n<e.length;n+=1){const a=e[n].toLowerCase();null==o.plugins[a]&&(o.plugins[a]=t)}},set:function(t,e,n,o,i){null==i&&(i=!0),a.whenReady((function(){a.use(e),a.initFields(n||"form"),a.persistSettings(t,e,i,o)}))},sync:function(t,e,n){socket.emit("admin.settings.get",{hash:t},(function(t,o){t?"function"==typeof n&&n(t):a.whenReady((function(){a.use(o),a.initFields(e||"form"),"function"==typeof n&&n()}))}))},persist:function(t,n,i,s){const c=[],r=$("[data-key]",n||"form").toArray();null==s&&(s=!0);for(let t=0;t<r.length;t+=1){const e=$(r[t]),n=a.readValue(e);let i=o.get();const s=e.data("key").split("."),l=s[s.length-1];if(s.length>1)for(let t=0;t<s.length-1;t+=1){const e=s[t];e&&null!=i&&(i=i[e])}null!=i?null!=n?i[l]=n:delete i[l]:c.push(e.data("key"))}c.length&&e.alert({title:"Attributes Not Saved",message:"'"+c.join(", ")+"' could not be saved. Please contact the plugin-author!",type:"danger",timeout:5e3}),a.persistSettings(t,o.cfg,s,i)},load:function(e,i,s){s=s||function(){};const r=i.attr("data-socket-get");socket.emit(r||"admin.settings.get",{hash:e},(function(l,u){if(l)return s(l);$(i).find("select[multiple]").each((function(t,e){const n=$(e).attr("name");if(n&&u.hasOwnProperty(n))try{u[n]=JSON.parse(u[n])}catch(t){}})),ajaxify.data[r?e:"settings"]=u,a.whenReady((function(){$(i).find("[data-sorted-list]").each((function(t,n){c(n,"get").call(o,$(n),e)}))})),$(i).deserialize(u),$(i).find('input[type="checkbox"]').each((function(){$(this).parents(".mdl-switch").toggleClass("is-checked",$(this).is(":checked"))})),t.fire("action:admin.settingsLoaded"),$(i).on("change","input, select, textarea",(function(){app.flags=app.flags||{},app.flags._unsaved=!0}));const f=document.getElementById("save");f&&n.e(2441).then((function(){var t=[n(42441)];(function(t){t.bind("ctrl+s",(function(t){f.click(),t.preventDefault()}))}).apply(null,t)})).catch(n.oe),s(null,u)}))},save:function(t,n,i){if((n=$(n)).length){const s=a.serializeForm(n);a.whenReady((function(){const t=n.find("[data-sorted-list]");t.length&&t.each(((t,e)=>{c(e,"set").call(o,$(e),s)}))}));const r=n.attr("data-socket-set");socket.emit(r||"admin.settings.set",{hash:t,values:s},(function(n){app.flags._unsaved=!1,ajaxify.data[r?t:"settings"]=s,"function"==typeof i?i(n):n?e.alert({title:"[[admin/admin:changes-not-saved]]",message:`[[admin/admin:changes-not-saved-message, ${n.message}]]`,type:"error",timeout:2500}):e.alert({title:"[[admin/admin:changes-saved]]",type:"success",timeout:2500})}))}}},a.registerReadyJobs(1),Promise.all([n.e(6177),n.e(2526),n.e(6069)]).then((function(){var t=[n(16631),n(73143),n(7448),n(15101),n(846),n(88839),n(53411),n(66370)];(function(){for(let t=0;t<arguments.length;t+=1)o.registerPlugin(arguments[t]);a.beforeReadyJobsDecreased()}).apply(null,t)})).catch(n.oe),o}.apply(e,o))||(t.exports=a)}}]);