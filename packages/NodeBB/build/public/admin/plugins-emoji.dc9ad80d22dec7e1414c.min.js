(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[684,3014,1322],{33302:(t,e,n)=>{var i,s;i=[n(19755),n(74344),n(40646),n(56290),n(32230)],void 0===(s=function(t,e,n,i,s){"use strict";function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(t),r=o(e),l=o(i),c=ajaxify;function u(){}function d(t,e){for(const n in e)t[n]=e[n];return t}function f(t){return t()}function m(){return Object.create(null)}function p(t){t.forEach(f)}function h(t){return"function"==typeof t}function g(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function b(t,e){t.appendChild(e)}function $(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function j(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function x(){return k(" ")}function w(){return k("")}function N(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function _(t,e,n){t.classList[n?"add":"remove"](e)}class I{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=j(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)$(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(y)}}let T;function M(t){T=t}function C(){if(!T)throw new Error("Function called outside component initialization");return T}function L(){const t=C();return(e,n)=>{const i=t.$$.callbacks[e];if(i){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach((e=>{e.call(t,s)}))}}}const H=[],S=[],q=[],z=[],R=Promise.resolve();let P=!1;function J(t){q.push(t)}function F(t){z.push(t)}let B=!1;const W=new Set;function U(){if(!B){B=!0;do{for(let t=0;t<H.length;t+=1){const e=H[t];M(e),D(e.$$)}for(M(null),H.length=0;S.length;)S.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];W.has(e)||(W.add(e),e())}q.length=0}while(H.length);for(;z.length;)z.pop()();P=!1,B=!1,W.clear()}}function D(t){if(null!==t.fragment){t.update(),p(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(J)}}const Q=new Set;let Y;function G(){Y={r:0,c:[],p:Y}}function K(){Y.r||p(Y.c),Y=Y.p}function V(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function X(t,e,n,i){if(t&&t.o){if(Q.has(t))return;Q.add(t),Y.c.push((()=>{Q.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function Z(t,e){const n=e.token={};function i(t,i,s,o){if(e.token!==n)return;e.resolved=o;let a=e.ctx;void 0!==s&&(a=a.slice(),a[s]=o);const r=t&&(e.current=t)(a);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==i&&t&&(G(),X(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),K())})):e.block.d(1),r.c(),V(r,1),r.m(e.mount(),e.anchor),l=!0),e.block=r,e.blocks&&(e.blocks[i]=r),l&&U()}if((s=t)&&"object"==typeof s&&"function"==typeof s.then){const n=C();if(t.then((t=>{M(n),i(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),i(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}var s}function tt(t,e){X(t,1,1,(()=>{e.delete(t.key)}))}function et(t,e,n,i,s,o,a,r,l,c,u,d){let f=t.length,m=o.length,p=f;const h={};for(;p--;)h[t[p].key]=p;const g=[],b=new Map,$=new Map;for(p=m;p--;){const t=d(s,o,p),r=n(t);let l=a.get(r);l?i&&l.p(t,e):(l=c(r,t),l.c()),b.set(r,g[p]=l),r in h&&$.set(r,Math.abs(p-h[r]))}const y=new Set,v=new Set;function j(t){V(t,1),t.m(r,u),a.set(t.key,t),u=t.first,m--}for(;f&&m;){const e=g[m-1],n=t[f-1],i=e.key,s=n.key;e===n?(u=e.first,f--,m--):b.has(s)?!a.has(i)||y.has(i)?j(e):v.has(s)?f--:$.get(i)>$.get(s)?(v.add(i),j(e)):(y.add(s),f--):(l(n,a),f--)}for(;f--;){const e=t[f];b.has(e.key)||l(e,a)}for(;m;)j(g[m-1]);return g}function nt(t,e){const n={},i={},s={$$scope:1};let o=t.length;for(;o--;){const a=t[o],r=e[o];if(r){for(const t in a)t in r||(i[t]=1);for(const t in r)s[t]||(n[t]=r[t],s[t]=1);t[o]=r}else for(const t in a)s[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}function it(t){return"object"==typeof t&&null!==t?t:{}}function st(t,e,n){const i=t.$$.props[e];void 0!==i&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function ot(t){t&&t.c()}function at(t,e,n,i){const{fragment:s,on_mount:o,on_destroy:a,after_update:r}=t.$$;s&&s.m(e,n),i||J((()=>{const e=o.map(f).filter(h);a?a.push(...e):p(e),t.$$.on_mount=[]})),r.forEach(J)}function rt(t,e){const n=t.$$;null!==n.fragment&&(p(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function lt(t,e,n,i,s,o,a=[-1]){const r=T;M(t);const l=t.$$={fragment:null,ctx:null,props:o,update:u,not_equal:s,bound:m(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r?r.$$.context:[]),callbacks:m(),dirty:a,skip_bound:!1};let c=!1;if(l.ctx=n?n(t,e.props||{},((e,n,...i)=>{const o=i.length?i[0]:n;return l.ctx&&s(l.ctx[e],l.ctx[e]=o)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](o),c&&function(t,e){-1===t.$$.dirty[0]&&(H.push(t),P||(P=!0,R.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],l.update(),c=!0,p(l.before_update),l.fragment=!!i&&i(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach(y)}else l.fragment&&l.fragment.c();e.intro&&V(t.$$.fragment),at(t,e.target,e.anchor,e.customElement),U()}M(r)}class ct{$destroy(){rt(this,1),this.$destroy=u}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var ut=app,dt=config,ft=utils;function mt(t,e,n){const i=t.slice();return i[36]=e[n],i}function pt(t,e,n){const i=t.slice();return i[36]=e[n],i}function ht(t){let e,n,i,s,o,a=t[36]+"";function r(){return t[32](t[36])}return{c(){e=j("button"),n=k(a),i=k(" x"),O(e,"class","btn btn-info btn-xs")},m(t,a){$(t,e,a),b(e,n),b(e,i),s||(o=N(e,"click",r),s=!0)},p(e,i){t=e,4&i[0]&&a!==(a=t[36]+"")&&A(n,a)},d(t){t&&y(e),s=!1,o()}}}function gt(t){let e,n,i,s,o,a=t[36]+"";function r(){return t[34](t[36])}return{c(){e=j("button"),n=k(a),i=k(" x"),O(e,"class","btn btn-info btn-xs")},m(t,a){$(t,e,a),b(e,n),b(e,i),s||(o=N(e,"click",r),s=!0)},p(e,i){t=e,8&i[0]&&a!==(a=t[36]+"")&&A(n,a)},d(t){t&&y(e),s=!1,o()}}}function bt(t){let e,n,i,s,o;return{c(){e=j("button"),n=j("i"),O(n,"class","fa fa-trash"),O(e,"class","btn btn-warning"),O(e,"type","button"),e.disabled=i=t[12]||t[13]},m(i,a){$(i,e,a),b(e,n),s||(o=N(e,"click",t[21]),s=!0)},p(t,n){12288&n[0]&&i!==(i=t[12]||t[13])&&(e.disabled=i)},d(t){t&&y(e),s=!1,o()}}}function $t(t){let e,n,i,s,o;return{c(){e=j("button"),n=j("i"),O(n,"class","fa fa-check"),O(e,"class","btn btn-success"),O(e,"type","button"),e.disabled=i=!t[11]},m(i,a){$(i,e,a),b(e,n),s||(o=N(e,"click",t[20]),s=!0)},p(t,n){2048&n[0]&&i!==(i=!t[11])&&(e.disabled=i)},d(t){t&&y(e),s=!1,o()}}}function yt(t){let e,n,i,s,o,a,r,l,c,u,d,f;return{c(){e=j("tr"),n=j("td"),i=j("button"),s=k("Cancel"),o=x(),a=j("td"),a.innerHTML='<span class="help-block">Are you sure you want to delete this emoji?</span>',r=x(),l=j("td"),c=j("button"),u=k("Yes"),O(i,"class","btn btn-default"),O(i,"type","button"),i.disabled=t[13],O(a,"colspan",3),O(c,"class","btn btn-danger"),O(c,"type","button"),c.disabled=t[13],O(e,"class","svelte-11gdgpc"),_(e,"fadeout",t[13])},m(m,p){$(m,e,p),b(e,n),b(n,i),b(i,s),b(e,o),b(e,a),b(e,r),b(e,l),b(l,c),b(c,u),d||(f=[N(i,"click",t[23]),N(c,"click",t[22])],d=!0)},p(t,n){8192&n[0]&&(i.disabled=t[13]),8192&n[0]&&(c.disabled=t[13]),8192&n[0]&&_(e,"fadeout",t[13])},d(t){t&&y(e),d=!1,p(f)}}}function vt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> is required</span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function jt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Image</strong> is required</span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function kt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function xt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function wt(t){let e,i,s,o,a,r,l,c,d,f,m,h,g,k,A,I,T,M,C,L,H,S,q,z,R,P,J,F,B,W,U,D,Q,Y,G,K,V,X,Z,tt=n.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+"",et=t[2],nt=[];for(let e=0;e<et.length;e+=1)nt[e]=ht(pt(t,et,e));let it=t[3],st=[];for(let e=0;e<it.length;e+=1)st[e]=gt(mt(t,it,e));function ot(t,e){return t[5]||t[18]?$t:bt}let at=ot(t),rt=at(t),lt=(t[12]||t[13])&&yt(t),ct=t[5]&&t[6].nameRequired&&vt(),ut=t[5]&&t[6].imageRequired&&jt(),ft=t[5]&&t[6].nameInvalid&&kt(),wt=t[5]&&t[6].aliasInvalid&&xt();return{c(){e=j("tr"),i=j("td"),s=j("input"),o=x(),a=j("td"),r=j("button"),l=x(),c=j("form"),d=j("input"),f=x(),m=j("input"),h=x(),g=j("td"),k=j("div"),A=j("input"),I=x(),T=j("div"),M=j("button"),M.textContent="+",C=x(),L=j("span");for(let t=0;t<nt.length;t+=1)nt[t].c();H=x(),S=j("td"),q=j("div"),z=j("input"),R=x(),P=j("div"),J=j("button"),J.textContent="+",F=x(),B=j("span");for(let t=0;t<st.length;t+=1)st[t].c();W=x(),U=j("td"),rt.c(),D=x(),lt&&lt.c(),Q=x(),ct&&ct.c(),Y=x(),ut&&ut.c(),G=x(),ft&&ft.c(),K=x(),wt&&wt.c(),V=w(),O(s,"type","text"),O(s,"class","form-control emoji-name svelte-11gdgpc"),O(r,"type","button"),O(r,"class","btn btn-default"),O(d,"type","file"),O(d,"name","emojiImage"),O(d,"accept","image/*"),O(m,"type","hidden"),O(m,"name","fileName"),O(c,"action",`${dt.relative_path}/api/admin/plugins/emoji/upload`),O(c,"method","post"),O(c,"enctype","multipart/form-data"),c.style.setProperty("display","none",""),O(A,"type","text"),O(A,"class","form-control"),O(M,"class","btn btn-default"),O(T,"class","input-group-addon"),O(k,"class","input-group"),O(z,"type","text"),O(z,"class","form-control"),O(J,"class","btn btn-default"),O(P,"class","input-group-addon"),O(q,"class","input-group"),O(e,"class","svelte-11gdgpc"),_(e,"fadeout",t[13])},m(n,u){$(n,e,u),b(e,i),b(i,s),E(s,t[0]),b(e,o),b(e,a),b(a,r),r.innerHTML=tt,b(a,l),b(a,c),b(c,d),t[28](d),b(c,f),b(c,m),t[29](m),t[30](c),b(e,h),b(e,g),b(g,k),b(k,A),E(A,t[4]),b(k,I),b(k,T),b(T,M),b(g,C),b(g,L);for(let t=0;t<nt.length;t+=1)nt[t].m(L,null);b(e,H),b(e,S),b(S,q),b(q,z),E(z,t[10]),b(q,R),b(q,P),b(P,J),b(S,F),b(S,B);for(let t=0;t<st.length;t+=1)st[t].m(B,null);b(e,W),b(e,U),rt.m(U,null),$(n,D,u),lt&&lt.m(n,u),$(n,Q,u),ct&&ct.m(n,u),$(n,Y,u),ut&&ut.m(n,u),$(n,G,u),ft&&ft.m(n,u),$(n,K,u),wt&&wt.m(n,u),$(n,V,u),X||(Z=[N(s,"input",t[27]),N(r,"click",t[19]),N(A,"input",t[31]),N(M,"click",t[15]),N(z,"input",t[33]),N(J,"click",t[17])],X=!0)},p(t,i){if(1&i[0]&&s.value!==t[0]&&E(s,t[0]),7&i[0]&&tt!==(tt=n.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+"")&&(r.innerHTML=tt),16&i[0]&&A.value!==t[4]&&E(A,t[4]),16388&i[0]){let e;for(et=t[2],e=0;e<et.length;e+=1){const n=pt(t,et,e);nt[e]?nt[e].p(n,i):(nt[e]=ht(n),nt[e].c(),nt[e].m(L,null))}for(;e<nt.length;e+=1)nt[e].d(1);nt.length=et.length}if(1024&i[0]&&z.value!==t[10]&&E(z,t[10]),65544&i[0]){let e;for(it=t[3],e=0;e<it.length;e+=1){const n=mt(t,it,e);st[e]?st[e].p(n,i):(st[e]=gt(n),st[e].c(),st[e].m(B,null))}for(;e<st.length;e+=1)st[e].d(1);st.length=it.length}at===(at=ot(t))&&rt?rt.p(t,i):(rt.d(1),rt=at(t),rt&&(rt.c(),rt.m(U,null))),8192&i[0]&&_(e,"fadeout",t[13]),t[12]||t[13]?lt?lt.p(t,i):(lt=yt(t),lt.c(),lt.m(Q.parentNode,Q)):lt&&(lt.d(1),lt=null),t[5]&&t[6].nameRequired?ct||(ct=vt(),ct.c(),ct.m(Y.parentNode,Y)):ct&&(ct.d(1),ct=null),t[5]&&t[6].imageRequired?ut||(ut=jt(),ut.c(),ut.m(G.parentNode,G)):ut&&(ut.d(1),ut=null),t[5]&&t[6].nameInvalid?ft||(ft=kt(),ft.c(),ft.m(K.parentNode,K)):ft&&(ft.d(1),ft=null),t[5]&&t[6].aliasInvalid?wt||(wt=xt(),wt.c(),wt.m(V.parentNode,V)):wt&&(wt.d(1),wt=null)},i:u,o:u,d(n){n&&y(e),t[28](null),t[29](null),t[30](null),v(nt,n),v(st,n),rt.d(),n&&y(D),lt&&lt.d(n),n&&y(Q),ct&&ct.d(n),n&&y(Y),ut&&ut.d(n),n&&y(G),ft&&ft.d(n),n&&y(K),wt&&wt.d(n),n&&y(V),X=!1,p(Z)}}}const Nt=/[^a-z\-.+0-9_]/i;function Ot(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every(((t,n)=>Ot(t,e[n])));if(Array.isArray(t)||Array.isArray(e))return!1;if("object"==typeof t){const n=Object.keys(t);return Object.keys(e).length===n.length&&n.every((n=>Ot(t[n],e[n])))}return!1}function At(t,e,n){let i,s,o,{emoji:a}=e,{id:r}=e,l=a.name,c=a.image,u=a.aliases.slice(),d=a.ascii.slice(),f="";function m(t){n(2,u=u.filter((e=>e!==t)))}let p="";function h(t){n(3,d=d.filter((e=>e!==t)))}const g=!(a.name||a.image||a.aliases.length||a.ascii.length);let b=!1;const $={nameRequired:!1,imageRequired:!1,nameInvalid:!1,aliasInvalid:!1,any:!1};let y=!1;const v=L();let j=!1,k=!1;return t.$$set=t=>{"emoji"in t&&n(24,a=t.emoji),"id"in t&&n(25,r=t.id)},t.$$.update=()=>{16777231&t.$$.dirty[0]&&n(5,b=!Ot({name:l,image:c,aliases:u,ascii:d},a)),1&t.$$.dirty[0]&&n(6,$.nameRequired=!l,$),2&t.$$.dirty[0]&&n(6,$.imageRequired=!c,$),1&t.$$.dirty[0]&&n(6,$.nameInvalid=Nt.test(l),$),16&t.$$.dirty[0]&&n(6,$.aliasInvalid=Nt.test(f),$),64&t.$$.dirty[0]&&n(6,$.any=$.nameRequired||$.imageRequired||$.nameInvalid||$.aliasInvalid,$),96&t.$$.dirty[0]&&n(11,y=b&&!$.any)},[l,c,u,d,f,b,$,i,s,o,p,y,j,k,m,function(){f&&!u.includes(f)&&(n(2,u=[...u,f]),n(4,f=""))},h,function(){p&&!d.includes(p)&&(n(3,d=[...d,p]),n(10,p=""))},g,function(){s.click(),jQuery(s).one("change",(()=>{if(!s.files.length)return;const t=`${ft.generateUUID()}-${s.files[0].name}`;n(9,o.value=t,o),jQuery(i).ajaxSubmit({headers:{"x-csrf-token":dt.csrf_token},success:()=>{n(1,c=t),n(8,s.value="",s)},error:()=>{const t=Error("Failed to upload file");console.error(t),ut.alertError(t),n(8,s.value="",s)}})}))},function(){v("save",{id:r,emoji:{name:l,image:c,aliases:u,ascii:d}})},function(){n(12,j=!0)},function(){n(12,j=!1),n(13,k=!0),setTimeout((()=>{v("delete",{id:r})}),250)},function(){n(12,j=!1)},a,r,function(){n(0,l=a.name),n(1,c=a.image),n(2,u=a.aliases.slice()),n(3,d=a.ascii.slice())},function(){l=this.value,n(0,l)},function(t){S[t?"unshift":"push"]((()=>{s=t,n(8,s)}))},function(t){S[t?"unshift":"push"]((()=>{o=t,n(9,o)}))},function(t){S[t?"unshift":"push"]((()=>{i=t,n(7,i)}))},function(){f=this.value,n(4,f)},t=>m(t),function(){p=this.value,n(10,p)},t=>h(t)]}class Et extends ct{constructor(t){super(),lt(this,t,At,wt,g,{emoji:24,id:25,reset:26},[-1,-1])}get reset(){return this.$$.ctx[26]}}function _t(t,e,n){const i=t.slice();return i[9]=e[n],i}function It(t,e){let n,i,s;const o=[e[9]];let a={};for(let t=0;t<o.length;t+=1)a=d(a,o[t]);return i=new Et({props:a}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=w(),ot(i.$$.fragment),this.first=n},m(t,e){$(t,n,e),at(i,t,e),s=!0},p(t,n){e=t;const s=1&n?nt(o,[it(e[9])]):{};i.$set(s)},i(t){s||(V(i.$$.fragment,t),s=!0)},o(t){X(i.$$.fragment,t),s=!1},d(t){t&&y(n),rt(i,t)}}}function Tt(t){let e,n,i,s,o,a,r,l,c,u=[],d=new Map,f=t[0];const m=t=>t[9].id;for(let e=0;e<f.length;e+=1){let n=_t(t,f,e),i=m(n);d.set(i,u[e]=It(i,n))}function p(e){t[7](e)}let h={id:-1,emoji:t[2]};return void 0!==t[1]&&(h.reset=t[1]),r=new Et({props:h}),S.push((()=>st(r,"reset",p))),r.$on("save",t[5]),{c(){e=j("table"),n=j("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=x(),s=j("tbody");for(let t=0;t<u.length;t+=1)u[t].c();o=x(),a=j("tfoot"),ot(r.$$.fragment),O(e,"class","table")},m(t,l){$(t,e,l),b(e,n),b(e,i),b(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);b(e,o),b(e,a),at(r,a,null),c=!0},p(t,[e]){25&e&&(f=t[0],G(),u=et(u,e,m,1,t,f,d,s,tt,It,null,_t),K());const n={};4&e&&(n.emoji=t[2]),!l&&2&e&&(l=!0,n.reset=t[1],F((()=>l=!1))),r.$set(n)},i(t){if(!c){for(let t=0;t<f.length;t+=1)V(u[t]);V(r.$$.fragment,t),c=!0}},o(t){for(let t=0;t<u.length;t+=1)X(u[t]);X(r.$$.fragment,t),c=!1},d(t){t&&y(e);for(let t=0;t<u.length;t+=1)u[t].d();rt(r)}}}function Mt(t,e,n){let i,{emojis:s}=e;const o={name:"",image:"",aliases:[],ascii:[]};let a,l=Object.assign({},o);return t.$$set=t=>{"emojis"in t&&n(6,s=t.emojis)},t.$$.update=()=>{64&t.$$.dirty&&n(0,i=Object.keys(s).map((t=>({id:parseInt(t,10),emoji:s[t]}))))},[i,a,l,function(t){const{id:e,emoji:i}=t.detail;r.default.put(`/admin/plugins/emoji/customizations/emoji/${e}`,{item:i}).then((()=>{n(6,s=Object.assign(Object.assign({},s),{[e]:i}))}),(()=>ut.alertError()))},function(t){const{id:e}=t.detail;r.default.del(`/admin/plugins/emoji/customizations/emoji/${e}`,{}).then((()=>{delete s[e],n(6,s=Object.assign({},s))}),(()=>ut.alertError()))},function(t){const{emoji:e}=t.detail;r.default.post("/admin/plugins/emoji/customizations/emoji",{item:e}).then((({id:t})=>{n(6,s=Object.assign(Object.assign({},s),{[t]:e})),n(2,l=Object.assign({},o)),a()}),(()=>ut.alertError()))},s,function(t){a=t,n(1,a)}]}class Ct extends ct{constructor(t){super(),lt(this,t,Mt,Tt,g,{emojis:6})}}function Lt(t,e,n){const i=t.slice();return i[31]=e[n],i}function Ht(t,e,n){const i=t.slice();return i[31]=e[n],i}function St(t){let e,i,s=n.buildEmoji(t[10])+"";return{c(){i=w(),e=new I(i)},m(t,n){e.m(s,t,n),$(t,i,n)},p(t,i){1024&i[0]&&s!==(s=n.buildEmoji(t[10])+"")&&e.p(s)},d(t){t&&y(i),t&&e.d()}}}function qt(t){let e,n,i,s,o,a=t[31]+"";function r(){return t[27](t[31])}return{c(){e=j("button"),n=k(a),i=k(" x"),O(e,"class","btn btn-info btn-xs")},m(t,a){$(t,e,a),b(e,n),b(e,i),s||(o=N(e,"click",r),s=!0)},p(e,i){t=e,2&i[0]&&a!==(a=t[31]+"")&&A(n,a)},d(t){t&&y(e),s=!1,o()}}}function zt(t){let e,n,i,s,o,a=t[31]+"";function r(){return t[29](t[31])}return{c(){e=j("button"),n=k(a),i=k(" x"),O(e,"class","btn btn-info btn-xs")},m(t,a){$(t,e,a),b(e,n),b(e,i),s||(o=N(e,"click",r),s=!0)},p(e,i){t=e,4&i[0]&&a!==(a=t[31]+"")&&A(n,a)},d(t){t&&y(e),s=!1,o()}}}function Rt(t){let e,n,i,s,o;return{c(){e=j("button"),n=j("i"),O(n,"class","fa fa-trash"),O(e,"class","btn btn-warning"),O(e,"type","button"),e.disabled=i=t[8]||t[9]},m(i,a){$(i,e,a),b(e,n),s||(o=N(e,"click",t[18]),s=!0)},p(t,n){768&n[0]&&i!==(i=t[8]||t[9])&&(e.disabled=i)},d(t){t&&y(e),s=!1,o()}}}function Pt(t){let e,n,i,s,o;return{c(){e=j("button"),n=j("i"),O(n,"class","fa fa-check"),O(e,"class","btn btn-success"),O(e,"type","button"),e.disabled=i=!t[11]},m(i,a){$(i,e,a),b(e,n),s||(o=N(e,"click",t[17]),s=!0)},p(t,n){2048&n[0]&&i!==(i=!t[11])&&(e.disabled=i)},d(t){t&&y(e),s=!1,o()}}}function Jt(t){let e,n,i,s,o,a,r,l,c,u,d,f;return{c(){e=j("tr"),n=j("td"),i=j("button"),s=k("Cancel"),o=x(),a=j("td"),a.innerHTML='<span class="help-block">Are you sure you want to delete this extension?</span>',r=x(),l=j("td"),c=j("button"),u=k("Yes"),O(i,"class","btn btn-default"),O(i,"type","button"),i.disabled=t[9],O(a,"colspan",3),O(c,"class","btn btn-danger"),O(c,"type","button"),c.disabled=t[9],O(e,"class","svelte-11gdgpc"),_(e,"fadeout",t[9])},m(m,p){$(m,e,p),b(e,n),b(n,i),b(i,s),b(e,o),b(e,a),b(e,r),b(e,l),b(l,c),b(c,u),d||(f=[N(i,"click",t[20]),N(c,"click",t[19])],d=!0)},p(t,n){512&n[0]&&(i.disabled=t[9]),512&n[0]&&(c.disabled=t[9]),512&n[0]&&_(e,"fadeout",t[9])},d(t){t&&y(e),d=!1,p(f)}}}function Ft(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> is required</span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function Bt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> must be an existing emoji</span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function Wt(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function Ut(t){let e;return{c(){e=j("tr"),e.innerHTML='<td colspan="5"><span>Must provide at least one <strong>Alias</strong> or <strong>ASCII Pattern</strong>.</span></td>',O(e,"class","text-danger svelte-11gdgpc")},m(t,n){$(t,e,n)},d(t){t&&y(e)}}}function Dt(t){let e,n,i,s,o,a,r,l,c,d,f,m,h,g,k,A,I,T,M,C,L,H,S,q,z,R,P,J,F,B,W,U,D,Q=t[10]&&St(t),Y=t[1],G=[];for(let e=0;e<Y.length;e+=1)G[e]=qt(Ht(t,Y,e));let K=t[2],V=[];for(let e=0;e<K.length;e+=1)V[e]=zt(Lt(t,K,e));function X(t,e){return t[5]||t[12]?Pt:Rt}let Z=X(t),tt=Z(t),et=(t[8]||t[9])&&Jt(t),nt=t[5]&&t[4].nameRequired&&Ft(),it=t[5]&&t[4].nameInvalid&&Bt(),st=t[5]&&t[4].aliasInvalid&&Wt(),ot=t[5]&&t[4].noChange&&Ut();return{c(){e=j("tr"),n=j("td"),i=j("input"),s=x(),o=j("td"),Q&&Q.c(),a=x(),r=j("td"),l=j("div"),c=j("input"),d=x(),f=j("div"),m=j("button"),m.textContent="+",h=x(),g=j("span");for(let t=0;t<G.length;t+=1)G[t].c();k=x(),A=j("td"),I=j("div"),T=j("input"),M=x(),C=j("div"),L=j("button"),L.textContent="+",H=x(),S=j("span");for(let t=0;t<V.length;t+=1)V[t].c();q=x(),z=j("td"),tt.c(),R=x(),et&&et.c(),P=x(),nt&&nt.c(),J=x(),it&&it.c(),F=x(),st&&st.c(),B=x(),ot&&ot.c(),W=w(),O(i,"type","text"),O(i,"class","form-control emoji-name svelte-11gdgpc"),O(c,"type","text"),O(c,"class","form-control"),O(m,"class","btn btn-default"),O(f,"class","input-group-addon"),O(l,"class","input-group"),O(T,"type","text"),O(T,"class","form-control"),O(L,"class","btn btn-default"),O(C,"class","input-group-addon"),O(I,"class","input-group"),O(e,"class","svelte-11gdgpc"),_(e,"fadeout",t[9])},m(u,p){$(u,e,p),b(e,n),b(n,i),E(i,t[0]),t[25](i),b(e,s),b(e,o),Q&&Q.m(o,null),b(e,a),b(e,r),b(r,l),b(l,c),E(c,t[3]),b(l,d),b(l,f),b(f,m),b(r,h),b(r,g);for(let t=0;t<G.length;t+=1)G[t].m(g,null);b(e,k),b(e,A),b(A,I),b(I,T),E(T,t[6]),b(I,M),b(I,C),b(C,L),b(A,H),b(A,S);for(let t=0;t<V.length;t+=1)V[t].m(S,null);b(e,q),b(e,z),tt.m(z,null),$(u,R,p),et&&et.m(u,p),$(u,P,p),nt&&nt.m(u,p),$(u,J,p),it&&it.m(u,p),$(u,F,p),st&&st.m(u,p),$(u,B,p),ot&&ot.m(u,p),$(u,W,p),U||(D=[N(i,"input",t[24]),N(c,"input",t[26]),N(m,"click",t[14]),N(T,"input",t[28]),N(L,"click",t[16])],U=!0)},p(t,n){if(1&n[0]&&i.value!==t[0]&&E(i,t[0]),t[10]?Q?Q.p(t,n):(Q=St(t),Q.c(),Q.m(o,null)):Q&&(Q.d(1),Q=null),8&n[0]&&c.value!==t[3]&&E(c,t[3]),8194&n[0]){let e;for(Y=t[1],e=0;e<Y.length;e+=1){const i=Ht(t,Y,e);G[e]?G[e].p(i,n):(G[e]=qt(i),G[e].c(),G[e].m(g,null))}for(;e<G.length;e+=1)G[e].d(1);G.length=Y.length}if(64&n[0]&&T.value!==t[6]&&E(T,t[6]),32772&n[0]){let e;for(K=t[2],e=0;e<K.length;e+=1){const i=Lt(t,K,e);V[e]?V[e].p(i,n):(V[e]=zt(i),V[e].c(),V[e].m(S,null))}for(;e<V.length;e+=1)V[e].d(1);V.length=K.length}Z===(Z=X(t))&&tt?tt.p(t,n):(tt.d(1),tt=Z(t),tt&&(tt.c(),tt.m(z,null))),512&n[0]&&_(e,"fadeout",t[9]),t[8]||t[9]?et?et.p(t,n):(et=Jt(t),et.c(),et.m(P.parentNode,P)):et&&(et.d(1),et=null),t[5]&&t[4].nameRequired?nt||(nt=Ft(),nt.c(),nt.m(J.parentNode,J)):nt&&(nt.d(1),nt=null),t[5]&&t[4].nameInvalid?it||(it=Bt(),it.c(),it.m(F.parentNode,F)):it&&(it.d(1),it=null),t[5]&&t[4].aliasInvalid?st||(st=Wt(),st.c(),st.m(B.parentNode,B)):st&&(st.d(1),st=null),t[5]&&t[4].noChange?ot||(ot=Ut(),ot.c(),ot.m(W.parentNode,W)):ot&&(ot.d(1),ot=null)},i:u,o:u,d(n){n&&y(e),t[25](null),Q&&Q.d(),v(G,n),v(V,n),tt.d(),n&&y(R),et&&et.d(n),n&&y(P),nt&&nt.d(n),n&&y(J),it&&it.d(n),n&&y(F),st&&st.d(n),n&&y(B),ot&&ot.d(n),n&&y(W),U=!1,p(D)}}}const Qt=/[^a-z\-.+0-9_]/i;function Yt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every(((t,n)=>Yt(t,e[n])));if(Array.isArray(t)||Array.isArray(e))return!1;if("object"==typeof t){const n=Object.keys(t);return Object.keys(e).length===n.length&&n.every((n=>Yt(t[n],e[n])))}return!1}function Gt(t,e,i){let s,o,a,{item:r}=e,{id:c}=e,u=r.name,d=r.aliases.slice(),f=r.ascii.slice();const m=!r.name&&!r.aliases.length&&!r.ascii.length;let p="";function h(t){i(1,d=d.filter((e=>e!==t)))}let g="";function b(t){i(2,f=f.filter((e=>e!==t)))}const $={nameRequired:!1,nameInvalid:!1,aliasInvalid:!1,noChange:!1,any:!1};let y;var v;v=()=>{const t=new l.default.Textarea(y),e=new l.default.Textcomplete(t,{dropdown:{style:{zIndex:2e4}}});e.register([Object.assign(Object.assign({},n.strategy),{replace:t=>t.name,match:/^(.+)$/})]),e.on("selected",(()=>{i(0,u=y.value)}))},C().$$.on_mount.push(v);const j=L();let k=!1,x=!1;return t.$$set=t=>{"item"in t&&i(21,r=t.item),"id"in t&&i(22,c=t.id)},t.$$.update=()=>{1&t.$$.dirty[0]&&i(10,s=u&&n.table[u]),2097159&t.$$.dirty[0]&&i(5,o=!Yt({name:u,aliases:d,ascii:f},r)),1&t.$$.dirty[0]&&i(4,$.nameRequired=!u,$),1&t.$$.dirty[0]&&i(4,$.nameInvalid=!n.table[u],$),8&t.$$.dirty[0]&&i(4,$.aliasInvalid=Qt.test(p),$),6&t.$$.dirty[0]&&i(4,$.noChange=!d.length&&!f.length,$),16&t.$$.dirty[0]&&i(4,$.any=$.nameRequired||$.nameInvalid||$.aliasInvalid||$.noChange,$),48&t.$$.dirty[0]&&i(11,a=o&&!$.any)},[u,d,f,p,$,o,g,y,k,x,s,a,m,h,function(){p&&!d.includes(p)&&(i(1,d=[...d,p]),i(3,p=""))},b,function(){g&&!f.includes(g)&&(i(2,f=[...f,g]),i(6,g=""))},function(){j("save",{id:c,item:{name:u,aliases:d,ascii:f}})},function(){i(8,k=!0)},function(){i(8,k=!1),i(9,x=!0),setTimeout((()=>{j("delete",{id:c})}),250)},function(){i(8,k=!1)},r,c,function(){i(0,u=r.name),i(1,d=r.aliases.slice()),i(2,f=r.ascii.slice())},function(){u=this.value,i(0,u)},function(t){S[t?"unshift":"push"]((()=>{y=t,i(7,y)}))},function(){p=this.value,i(3,p)},t=>h(t),function(){g=this.value,i(6,g)},t=>b(t)]}class Kt extends ct{constructor(t){super(),lt(this,t,Gt,Dt,g,{item:21,id:22,reset:23},[-1,-1])}get reset(){return this.$$.ctx[23]}}function Vt(t,e,n){const i=t.slice();return i[10]=e[n],i}function Xt(t,e){let n,i,s;const o=[e[10]];let a={};for(let t=0;t<o.length;t+=1)a=d(a,o[t]);return i=new Kt({props:a}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=w(),ot(i.$$.fragment),this.first=n},m(t,e){$(t,n,e),at(i,t,e),s=!0},p(t,n){e=t;const s=1&n?nt(o,[it(e[10])]):{};i.$set(s)},i(t){s||(V(i.$$.fragment,t),s=!0)},o(t){X(i.$$.fragment,t),s=!1},d(t){t&&y(n),rt(i,t)}}}function Zt(t){let e,n,i,s,o,a,r,l,c,u=[],d=new Map,f=t[0];const m=t=>t[10].id;for(let e=0;e<f.length;e+=1){let n=Vt(t,f,e),i=m(n);d.set(i,u[e]=Xt(i,n))}function p(e){t[8](e)}let h={id:-1,item:t[2]};return void 0!==t[1]&&(h.reset=t[1]),r=new Kt({props:h}),S.push((()=>st(r,"reset",p))),r.$on("save",t[5]),{c(){e=j("table"),n=j("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=x(),s=j("tbody");for(let t=0;t<u.length;t+=1)u[t].c();o=x(),a=j("tfoot"),ot(r.$$.fragment),O(e,"class","table")},m(t,l){$(t,e,l),b(e,n),b(e,i),b(e,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null);b(e,o),b(e,a),at(r,a,null),c=!0},p(t,[e]){25&e&&(f=t[0],G(),u=et(u,e,m,1,t,f,d,s,tt,Xt,null,Vt),K());const n={};4&e&&(n.item=t[2]),!l&&2&e&&(l=!0,n.reset=t[1],F((()=>l=!1))),r.$set(n)},i(t){if(!c){for(let t=0;t<f.length;t+=1)V(u[t]);V(r.$$.fragment,t),c=!0}},o(t){for(let t=0;t<u.length;t+=1)X(u[t]);X(r.$$.fragment,t),c=!1},d(t){t&&y(e);for(let t=0;t<u.length;t+=1)u[t].d();rt(r)}}}function te(t,e,n){let i,{type:s="adjunct"}=e,{record:o}=e;const a={name:"",aliases:[],ascii:[]};let l,c=Object.assign({},a);return t.$$set=t=>{"type"in t&&n(7,s=t.type),"record"in t&&n(6,o=t.record)},t.$$.update=()=>{64&t.$$.dirty&&n(0,i=Object.keys(o).map((t=>({id:parseInt(t,10),item:o[t]}))))},[i,l,c,function(t){const{id:e,item:i}=t.detail;r.default.put(`/admin/plugins/emoji/customizations/${s}/${e}`,{item:i}).then((()=>{n(6,o=Object.assign(Object.assign({},o),{[e]:i}))}),(()=>ut.alertError()))},function(t){const{id:e}=t.detail;r.default.del(`/admin/plugins/emoji/customizations/${s}/${e}`,{}).then((()=>{delete o[e],n(6,o=Object.assign({},o))}),(()=>ut.alertError()))},function(t){const{item:e}=t.detail;r.default.post(`/admin/plugins/emoji/customizations/${s}`,{item:e}).then((({id:t})=>{n(6,o=Object.assign(Object.assign({},o),{[t]:e})),n(2,c=Object.assign({},a)),l()}),(()=>ut.alertError()))},o,s,function(t){l=t,n(1,l)}]}class ee extends ct{constructor(t){super(),lt(this,t,te,Zt,g,{type:7,record:6})}}function ne(t){let e,n,i,s,o,a,r,l,c,u,d,f,m,p,h,g,v,k,w,N;return f=new Ct({props:{emojis:t[0].emojis}}),v=new ee({props:{record:t[0].adjuncts}}),{c(){e=j("div"),n=j("div"),i=j("div"),s=j("div"),s.innerHTML='<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button> \n        <h4 class="modal-title" id="editModalLabel">Customize Emoji</h4>',o=x(),a=j("div"),r=j("p"),r.innerHTML="Below you can add custom emoji, and also add new aliases\n          and ASCII patterns for existing emoji. While this list is\n          edited live, you must still <strong>Build Emoji Assets</strong>\n          to actually use these customizations.",l=x(),c=j("div"),u=j("div"),u.innerHTML='<h3 class="panel-title">Custom Emoji</h3>',d=x(),ot(f.$$.fragment),m=x(),p=j("div"),h=j("div"),h.innerHTML='<h3 class="panel-title">Custom Extensions</h3>',g=x(),ot(v.$$.fragment),k=x(),w=j("link"),O(s,"class","modal-header"),O(u,"class","panel-heading"),O(c,"class","panel panel-default"),O(h,"class","panel-heading"),O(p,"class","panel panel-default"),O(a,"class","modal-body"),O(i,"class","modal-content"),O(n,"class","modal-dialog modal-lg"),O(e,"class","modal fade"),O(e,"tabindex","-1"),O(e,"role","dialog"),O(e,"aria-labelledby","editModalLabel"),O(e,"aria-hidden","true"),O(w,"rel","stylesheet"),O(w,"href",`${dt.assetBaseUrl}/plugins/nodebb-plugin-emoji/emoji/styles.css?${dt["cache-buster"]}`)},m(y,j){$(y,e,j),b(e,n),b(n,i),b(i,s),b(i,o),b(i,a),b(a,r),b(a,l),b(a,c),b(c,u),b(c,d),at(f,c,null),b(a,m),b(a,p),b(p,h),b(p,g),at(v,p,null),t[3](e),$(y,k,j),b(document.head,w),N=!0},p(t,[e]){const n={};1&e&&(n.emojis=t[0].emojis),f.$set(n);const i={};1&e&&(i.record=t[0].adjuncts),v.$set(i)},i(t){N||(V(f.$$.fragment,t),V(v.$$.fragment,t),N=!0)},o(t){X(f.$$.fragment,t),X(v.$$.fragment,t),N=!1},d(n){n&&y(e),rt(f),rt(v),t[3](null),n&&y(k),y(w)}}}function ie(t,e,n){let i,{data:s}=e;return t.$$set=t=>{"data"in t&&n(0,s=t.data)},[s,i,function(){a.default(i).modal("show")},function(t){S[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class se extends ct{constructor(t){super(),lt(this,t,ie,ne,g,{data:0,show:2})}get show(){return this.$$.ctx[2]}}function oe(t){return{c:u,m:u,p:u,d:u}}function ae(t){let e,n,i=t[2]+"";return{c(){n=w(),e=new I(n)},m(t,s){e.m(i,t,s),$(t,n,s)},p(t,n){1&n&&i!==(i=t[2]+"")&&e.p(i)},d(t){t&&y(n),t&&e.d()}}}function re(t){return{c:u,m:u,p:u,d:u}}function le(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:re,then:ae,catch:oe,value:2};return Z(n=t[1].translate(t[0]),i),{c(){e=w(),i.block.c()},m(t,n){$(t,e,n),i.block.m(t,i.anchor=n),i.mount=()=>e.parentNode,i.anchor=e},p(e,[s]){if(t=e,i.ctx=t,1&s&&n!==(n=t[1].translate(t[0]))&&Z(n,i));else{const e=t.slice();e[2]=i.resolved,i.block.p(e,s)}},i:u,o:u,d(t){t&&y(e),i.block.d(t),i.token=null,i=null}}}function ce(t,e,n){const i=s.Translator.create();let{src:o}=e;return t.$$set=t=>{"src"in t&&n(0,o=t.src)},[o,i]}class ue extends ct{constructor(t){super(),lt(this,t,ce,le,g,{src:0})}}function de(t){let e,n,i,s={ctx:t,current:null,token:null,hasCatch:!1,pending:pe,then:me,catch:fe,value:11,blocks:[,,,]};return Z(n=t[2],s),{c(){e=w(),s.block.c()},m(t,n){$(t,e,n),s.block.m(t,s.anchor=n),s.mount=()=>e.parentNode,s.anchor=e,i=!0},p(e,i){if(t=e,s.ctx=t,4&i&&n!==(n=t[2])&&Z(n,s));else{const e=t.slice();e[11]=s.resolved,s.block.p(e,i)}},i(t){i||(V(s.block),i=!0)},o(t){for(let t=0;t<3;t+=1)X(s.blocks[t]);i=!1},d(t){t&&y(e),s.block.d(t),s.token=null,s=null}}}function fe(t){return{c:u,m:u,p:u,i:u,o:u,d:u}}function me(t){let e,n,i;function s(e){t[9](e)}let o={data:t[11]};return void 0!==t[1]&&(o.show=t[1]),e=new se({props:o}),S.push((()=>st(e,"show",s))),{c(){ot(e.$$.fragment)},m(t,n){at(e,t,n),i=!0},p(t,i){const s={};4&i&&(s.data=t[11]),!n&&2&i&&(n=!0,s.show=t[1],F((()=>n=!1))),e.$set(s)},i(t){i||(V(e.$$.fragment,t),i=!0)},o(t){X(e.$$.fragment,t),i=!1},d(t){rt(e,t)}}}function pe(t){return{c:u,m:u,p:u,i:u,o:u,d:u}}function he(t){let e,n,i,s,o,a,r,l,c,u,d,f,m,h,g,v,k,w,A,E,_,I,T,M,C,L,H,S,q,z,R,P,J,F,B,W;l=new ue({props:{src:"[[admin/plugins/emoji:settings.parseAscii]]"}}),h=new ue({props:{src:"[[admin/plugins/emoji:settings.parseNative]]"}}),E=new ue({props:{src:"[[admin/plugins/emoji:settings.customFirst]]"}}),C=new ue({props:{src:"[[admin/plugins/emoji:build]]"}}),S=new ue({props:{src:"[[admin/plugins/emoji:build_description]]"}});let U=t[2]&&de(t);return{c(){e=j("form"),n=j("div"),i=j("div"),s=j("div"),o=j("label"),a=j("input"),r=x(),ot(l.$$.fragment),c=x(),u=j("div"),d=j("label"),f=j("input"),m=x(),ot(h.$$.fragment),g=x(),v=j("div"),k=j("label"),w=j("input"),A=x(),ot(E.$$.fragment),_=x(),I=j("div"),T=j("div"),M=j("button"),ot(C.$$.fragment),L=x(),H=j("p"),ot(S.$$.fragment),q=x(),U&&U.c(),z=x(),R=j("button"),R.innerHTML='<i class="material-icons">save</i>',P=x(),J=j("button"),J.innerHTML='<i class="material-icons">edit</i>',O(a,"id","emoji-parseAscii"),O(a,"type","checkbox"),O(o,"for","emoji-parseAscii"),O(s,"class","form-group"),O(f,"id","emoji-parseNative"),O(f,"type","checkbox"),O(d,"for","emoji-parseNative"),O(u,"class","form-group"),O(w,"id","emoji-customFirst"),O(w,"type","checkbox"),O(k,"for","emoji-customFirst"),O(v,"class","form-group"),O(i,"class","panel-body"),O(M,"type","button"),O(M,"class","btn btn-primary"),O(M,"aria-describedby","emoji-build_description"),O(H,"id","emoji-build_description"),O(H,"class","help-block"),O(T,"class","form-group"),O(I,"class","panel-footer"),O(n,"class","panel panel-default"),O(e,"id","emoji-settings"),O(R,"class","floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored"),O(J,"class","edit floating-button mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored svelte-rv4t0s")},m(p,y){$(p,e,y),b(e,n),b(n,i),b(i,s),b(s,o),b(o,a),a.checked=t[0].parseAscii,b(o,r),at(l,o,null),b(i,c),b(i,u),b(u,d),b(d,f),f.checked=t[0].parseNative,b(d,m),at(h,d,null),b(i,g),b(i,v),b(v,k),b(k,w),w.checked=t[0].customFirst,b(k,A),at(E,k,null),b(n,_),b(n,I),b(I,T),b(T,M),at(C,M,null),b(T,L),b(T,H),at(S,H,null),$(p,q,y),U&&U.m(p,y),$(p,z,y),$(p,R,y),$(p,P,y),$(p,J,y),F=!0,B||(W=[N(a,"change",t[6]),N(f,"change",t[7]),N(w,"change",t[8]),N(M,"click",t[4]),N(R,"click",t[3]),N(J,"click",t[5])],B=!0)},p(t,[e]){1&e&&(a.checked=t[0].parseAscii),1&e&&(f.checked=t[0].parseNative),1&e&&(w.checked=t[0].customFirst),t[2]?U?(U.p(t,e),4&e&&V(U,1)):(U=de(t),U.c(),V(U,1),U.m(z.parentNode,z)):U&&(G(),X(U,1,1,(()=>{U=null})),K())},i(t){F||(V(l.$$.fragment,t),V(h.$$.fragment,t),V(E.$$.fragment,t),V(C.$$.fragment,t),V(S.$$.fragment,t),V(U),F=!0)},o(t){X(l.$$.fragment,t),X(h.$$.fragment,t),X(E.$$.fragment,t),X(C.$$.fragment,t),X(S.$$.fragment,t),X(U),F=!1},d(t){t&&y(e),rt(l),rt(h),rt(E),rt(C),rt(S),t&&y(q),U&&U.d(t),t&&y(z),t&&y(R),t&&y(P),t&&y(J),B=!1,p(W)}}}function ge(t,e,i){let s,o,{settings:a}=e;return t.$$set=t=>{"settings"in t&&i(0,a=t.settings)},[a,s,o,function(){r.default.put("/admin/plugins/emoji/settings",a).then((()=>ut.alertSuccess()),(t=>ut.alertError(t)))},function(){r.default.put("/admin/plugins/emoji/build",{}).then((()=>ut.alertSuccess()),(t=>ut.alertError(t)))},function(){i(2,o=o||Promise.all([r.default.get("/admin/plugins/emoji/customizations",{}),n.init()]).then((([t])=>t))),o.then((()=>setTimeout((()=>s()),0)))},function(){a.parseAscii=this.checked,i(0,a)},function(){a.parseNative=this.checked,i(0,a)},function(){a.customFirst=this.checked,i(0,a)},function(t){s=t,i(1,s)}]}class be extends ct{constructor(t){super(),lt(this,t,ge,he,g,{settings:0})}}a.default(window).on("action:ajaxify.end",(()=>{c.data.template["admin/plugins/emoji"]&&new be({target:document.getElementById("content"),props:{settings:c.data.settings}})}))}.apply(e,i))||(t.exports=s)},74344:(t,e,n)=>{"use strict";var i,s;i=[n(85233)],void 0===(s=(t=>{const e={},n=config.relative_path+"/api/v3";function i(e,i){async function s(n){({options:e}=await t.fire("filter:api.options",{options:e})),$.ajax(e).done((t=>{n(null,t&&t.hasOwnProperty("status")&&t.hasOwnProperty("response")?t.response:t||{})})).fail((t=>{let e;t.responseJSON&&(e=t.responseJSON.status&&t.responseJSON.status.message?t.responseJSON.status.message:t.responseJSON.error),n(new Error(e||t.statusText))}))}if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:n+e.url,"function"!=typeof i)return new Promise(((t,e)=>{s((function(n,i){n?e(n):t(i)}))}));s(i)}return e.get=(t,e,n)=>i({url:t+(e&&Object.keys(e).length?"?"+$.param(e):"")},n),e.head=(t,e,n)=>i({url:t+(e&&Object.keys(e).length?"?"+$.param(e):""),method:"head"},n),e.post=(t,e,n)=>i({url:t,method:"post",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.patch=(t,e,n)=>i({url:t,method:"patch",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.put=(t,e,n)=>i({url:t,method:"put",data:JSON.stringify(e||{}),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.del=(t,e,n)=>i({url:t,method:"delete",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",headers:{"x-csrf-token":config.csrf_token}},n),e.delete=e.del,e}).apply(e,i))||(t.exports=s)},40646:(t,e,n)=>{var i;i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=e.strategy=e.search=e.table=e.buildEmoji=e.buster=e.base=void 0;var i=config.assetBaseUrl+"/plugins/nodebb-plugin-emoji";e.base=i;var s,o=config["cache-buster"];function a(t,e){var n=":"+t.name+":",s=e?" defer":"";return t.image?"<img\n      "+(e?"data-":"")+'src="'+i+"/emoji/"+t.pack+"/"+t.image+"?"+o+'"\n      class="not-responsive emoji emoji-'+t.pack+" emoji--"+t.name+" "+s+'"\n      title="'+n+'"\n      alt="'+t.character+'"\n    />':'<span\n    class="emoji-'+t.pack+" emoji--"+t.name+'"\n    title="'+n+'"\n  ><span>'+t.character+"</span></span>"}e.buster=o,e.buildEmoji=a,e.strategy={match:/\B:([^\s\n:]+)$/,search:function(t,n){n(e.search(t.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(t){return":"+t.name+": "},template:function(t){return a(t)+" "+t.name},cache:!0},e.init=function(t){return s=s||Promise.all([new Promise((function(t,e){n.e(2645).then(function(){var e=[n(91919)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})),new Promise((function(t,e){n.e(320).then(function(){var e=[n(78726)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})),new Promise((function(t,e){Promise.all([n.e(6177),n.e(2526),n.e(5482),n.e(588)]).then(function(){var e=[n(45482)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})),$.getJSON(i+"/emoji/table.json?"+o)]).then((function(t){var i=t[0],s=t[1],o=t[2],a=t[3];e.table=a;var r=Object.keys(e.table).map((function(t){var n=e.table[t];return{name:t,aliases:n.aliases,keywords:n.keywords,character:n.character,image:n.image,pack:n.pack}}));function l(t,e){for(var n=e.length,s=0;s<n;s+=1)if(i(t,e[s]))return e[s];return null}e.search=function(t){function e(e,n){var i=n*(1+s(t,e));return e.startsWith(t)?i-2:i}return r.filter((function(n){if(i(t,n.name))return n.score=e(n.name,1),!0;var s=l(t,n.aliases);if(s)return n.score=e(s,3),!0;var o=l(t,n.keywords);return!!o&&(n.score=e(o,7),!0)})).sort((function(t,e){return t.score-e.score})).sort((function(e,n){var i=+e.name.startsWith(t);return+n.name.startsWith(t)-i}))},o.addButtonDispatch("emoji-add-emoji",(function(t,e,i,s){new Promise((function(t,e){n.e(5400).then(function(){var e=[n(6721)];t.apply(null,e)}.bind(this)).catch(e.bind(this))})).then((function(n){return(0,n.toggleForInsert)(t,e,i,s)}))}))})).catch((function(t){var e=Error("[[emoji:meta-load-failed]]");throw console.error(e),app.alertError(e),t})),t&&s.then((function(){return setTimeout(t,0)})),s}}.apply(e,[n,e]),void 0===i||(t.exports=i)}}]);