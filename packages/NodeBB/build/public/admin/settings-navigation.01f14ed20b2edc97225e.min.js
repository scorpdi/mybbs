/*! For license information please see settings-navigation.01f14ed20b2edc97225e.min.js.LICENSE.txt */
(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[715,7214,6503,8042,71,7927],{50992:(t,e,n)=>{"use strict";var i,a;i=[n(32230),n(18487),n(59006),n(7927),n(87285),n(66709),n(62526)],void 0===(a=function(t,e,n,i){const a={};let o;function s(){const t=$(this).attr("data-index");$("#active-navigation li").removeClass("active"),$(this).addClass("active");const e=$("#enabled").children('[data-index="'+t+'"]');return $("#enabled li").addClass("hidden"),e.length&&e.removeClass("hidden"),!1}function r(e,i){const a=i.helper.attr("data-id"),s=$('#active-navigation [data-id="'+a+'"]'),r="custom"===a?{iconClass:"fa-navicon",groups:o[0].groups,enabled:!0}:o[a];r.index=(parseInt($("#enabled").children().last().attr("data-index"),10)||0)+1,r.title=t.escape(r.title),r.text=t.escape(r.text),r.groups=ajaxify.data.groups,n.parse("admin/settings/navigation","navigation",{navigation:[r]},(function(e){t.translate(e,(function(e){e=$(t.unescape(e)),s.after(e),s.remove()}))})),n.parse("admin/settings/navigation","enabled",{enabled:[r]},(function(e){t.translate(e,(function(e){e=$(t.unescape(e)),$("#enabled").append(e),componentHandler.upgradeDom()}))}))}function c(){const t=[],e=[];$("#active-navigation li").each((function(){e.push($(this).attr("data-index"))})),e.forEach((function(e){const n=$("#enabled").children('[data-index="'+e+'"]').find("form").serializeArray(),i={};n.forEach((function(t){i[t.name]?(Array.isArray(i[t.name])||(i[t.name]=[i[t.name]]),i[t.name].push(t.value)):i[t.name]=t.value})),t.push(i)})),socket.emit("admin.navigation.save",t,(function(t){t?i.error(t):i.success("Successfully saved navigation")}))}function l(){const t=$(this).parents("[data-index]").attr("data-index");return $('#active-navigation [data-index="'+t+'"]').remove(),$('#enabled [data-index="'+t+'"]').remove(),!1}function d(){const e=$(this),n=e.hasClass("btn-success"),i=e.parents("[data-index]").attr("data-index");return t.translate(n?"[[admin/settings/navigation:btn.disable]]":"[[admin/settings/navigation:btn.enable]]",(function(t){e.toggleClass("btn-warning").toggleClass("btn-success").html(t),e.parents("li").find('[name="enabled"]').val(n?"on":""),$('#active-navigation [data-index="'+i+'"] a').toggleClass("text-muted",!n)})),!1}return a.init=function(){o=ajaxify.data.available,$("#available").find("li .drag-item").draggable({connectToSortable:"#active-navigation",helper:"clone",distance:10,stop:r}),$("#active-navigation").sortable().droppable({accept:$("#available li .drag-item")}),$("#enabled").on("click",".iconPicker",(function(){const t=$(this).find("i");e.init(t,(function(e){const n=e.attr("value"),i=t.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+i+'"] i.nav-icon').attr("class","fa fa-fw "+n),t.siblings('[name="iconClass"]').val(n),t.siblings(".change-icon-link").toggleClass("hidden",!!n)}))})),$("#enabled").on("click",'[name="dropdown"]',(function(){const t=$(this),e=t.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+e+'"] i.dropdown-icon').toggleClass("hidden",!t.is(":checked"))})),$("#active-navigation").on("click","li",s),$("#enabled").on("click",".delete",l).on("click",".toggle",d),$("#save").on("click",c)},a}.apply(e,i))||(t.exports=a)},7927:(t,e,n)=>{"use strict";var i,a;i=[n(32230),n(7237),n(85233)],a=function(t,e,n){const i={};function a(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&s(t,e),n.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||e.clickfn(),o(t)}))}function o(t){t.fadeOut(500,(function(){$(this).remove()}))}function s(t,e){const i=e.timeout,a=setTimeout((function(){o(t),"function"==typeof e.timeoutfn&&e.timeoutfn(t,e)}),i);t.attr("timeoutId",a),t.css("transition-property","none"),t.removeClass("animate"),setTimeout((function(){t.css("transition-property",""),t.css("transition","width "+(i+450)+"ms linear, background-color "+(i+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:e})}),50),t.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return i.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const i=$("#"+t.alert_id);i.length?a(i,t):function(t){app.parseAndTranslate("alert",t,(function(i){let r=$("#"+t.alert_id);if(r.length)return a(r,t);r=i,r.fadeIn(200),e.get("toaster/tray").prepend(r),"function"==typeof t.closefn&&r.find("button").on("click",(function(){return t.closefn(),o(r),!1})),t.timeout&&s(r,t),"function"==typeof t.clickfn&&r.addClass("pointer").on("click",(function(e){$(e.target).is(".close")||t.clickfn(r,t),o(r)})),n.fire("action:alert.new",{alert:r,params:t})}))}(t)},i.success=function(t,e){i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},i.error=function(t,e){if("[[error:revalidate-failure]]"===(t=t&&t.message||t))return socket.disconnect(),void app.reconnect();i.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},i.remove=function(t){$("#alert_button_"+t).remove()},i}.apply(e,i),void 0===a||(t.exports=a)},7237:(t,e,n)=>{"use strict";var i;void 0===(i=function(){const t={};return t.core={"topic/teaser":function(t){return t?$('[component="category/topic"][data-tid="'+t+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(t,e){return $('[component="topic"][data-'+t+'="'+e+'"]')},post:function(t,e){return $('[component="post"][data-'+t+'="'+e+'"]')},"post/content":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/content"]')},"post/header":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/header"]')},"post/anchor":function(t){return $('[component="post"][data-index="'+t+'"] [component="post/anchor"]')},"post/vote-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/vote-count"]')},"post/bookmark-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/bookmark-count"]')},"user/postcount":function(t){return $('[component="user/postcount"][data-uid="'+t+'"]')},"user/reputation":function(t){return $('[component="user/reputation"][data-uid="'+t+'"]')},"category/topic":function(t,e){return $('[component="category/topic"][data-'+t+'="'+e+'"]')},"categories/category":function(t,e){return $('[component="categories/category"][data-'+t+'="'+e+'"]')},"chat/message":function(t){return $('[component="chat/message"][data-mid="'+t+'"]')},"chat/message/body":function(t){return $('[component="chat/message"][data-mid="'+t+'"] [component="chat/message/body"]')},"chat/recent/room":function(t){return $('[component="chat/recent/room"][data-roomid="'+t+'"]')}},t.get=function(){const e=Array.prototype.slice.call(arguments,1);return t.core[arguments[0]]&&e.length?t.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},t}.call(e,n,e,t))||(t.exports=i)},18487:(t,e,n)=>{"use strict";var i,a;i=[n(59006),n(31369)],void 0===(a=function(t,e){return{init:function(n,i){i=i||function(){};const a=n.hasClass("fa-2x");let o=n.attr("class").replace("fa-2x","").replace("fa","").replace(/\s+/g,"");if($("#icons .selected").removeClass("selected"),o)try{$("#icons .fa-icons .fa."+o).addClass("selected")}catch(t){o=""}t.render("partials/fontawesome",{}).then((function(t){(t=$(t)).find(".fa-icons").prepend($('<i class="fa fa-nbb-none"></i>'));const s=e.dialog({onEscape:!0,backdrop:!0,show:!1,message:t,title:"Select an Icon",buttons:{noIcon:{label:"No Icon",className:"btn-default",callback:function(){n.attr("class","fa "+(a?"fa-2x ":"")),n.val(""),n.attr("value",""),i(n)}},success:{label:"Select",className:"btn-primary",callback:function(){const t=$(".bootbox .selected").attr("class"),e=$("<div></div>").addClass(t).removeClass("fa").removeClass("selected").attr("class"),o=s.find("input").val();e?(n.attr("class","fa "+(a?"fa-2x ":"")+e),n.val(e),n.attr("value",e)):o&&(n.attr("class",o),n.val(o),n.attr("value",o)),i(n)}}}});s.on("show.bs.modal",(function(){const t=$(this),e=t.find("input");o&&(t.find("."+o).addClass("selected"),e.val(o.replace("fa-","")))})).modal("show"),s.on("shown.bs.modal",(function(){const t=$(this),e=t.find("input"),n=t.find(".fa-icons i"),i=t.find("button.btn-primary");function a(n){t.find("i.selected").removeClass("selected"),n?n.addClass("selected"):0===e.val().length?o&&t.find("."+o).addClass("selected"):t.find("i:visible").first().addClass("selected")}e.selectRange(0,e.val().length),t.find(".icon-container").on("click","i",(function(){e.val($(this).attr("class").replace("fa fa-","").replace("selected","")),a($(this))})),e.on("keyup",(function(t){13!==t.keyCode?(n.show(),n.each((function(t,n){n.className.match(new RegExp("^fa fa-.*"+e.val()+".*$"))||$(n).hide()})),a()):i.click()}))}))}))}}}.apply(e,i))||(t.exports=a)},66709:(t,e,n)=>{var i,a,o;!function(s){"use strict";a=[n(19755),n(87285),n(66177),n(85592),n(26891)],i=function(t){return t.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,n=e.accept;this.isover=!1,this.isout=!0,this.accept="function"==typeof n?n:function(t){return t.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e)},_setOption:function(e,n){if("accept"===e)this.accept="function"==typeof n?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,a=!1;return!(!i||(i.currentItem||i.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each((function(){var n=t(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e))return a=!0,!1})),!a&&!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",e,this.ui(i)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),t.ui.intersect=function(){function t(t,e,n){return t>=e&&t<e+n}return function(e,n,i,a){if(!n.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,s=(e.positionAbs||e.position.absolute).top+e.margins.top,r=o+e.helperProportions.width,c=s+e.helperProportions.height,l=n.offset.left,d=n.offset.top,p=l+n.proportions().width,u=d+n.proportions().height;switch(i){case"fit":return l<=o&&r<=p&&d<=s&&c<=u;case"intersect":return l<o+e.helperProportions.width/2&&r-e.helperProportions.width/2<p&&d<s+e.helperProportions.height/2&&c-e.helperProportions.height/2<u;case"pointer":return t(a.pageY,d,n.proportions().height)&&t(a.pageX,l,n.proportions().width);case"touch":return(s>=d&&s<=u||c>=d&&c<=u||s<d&&c>u)&&(o>=l&&o<=p||r>=l&&r<=p||o<l&&r>p);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(e,n){var i,a,o=t.ui.ddmanager.droppables[e.options.scope]||[],s=n?n.type:null,r=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))){for(a=0;a<r.length;a++)if(r[a]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===s&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),(function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))})),i},dragStart:function(e,n){e.element.parentsUntil("body").on("scroll.droppable",(function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}))},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],(function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,a,o,s=t.ui.intersect(e,this,this.options.tolerance,n),r=!s&&this.isover?"isout":s&&!this.isover?"isover":null;r&&(this.options.greedy&&(a=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter((function(){return t(this).droppable("instance").options.scope===a}))).length&&((i=t(o[0]).droppable("instance")).greedyChild="isover"===r)),i&&"isover"===r&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,n),i&&"isout"===r&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}}))},dragStop:function(e,n){e.element.parentsUntil("body").off("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},!1!==t.uiBackCompat&&t.widget("ui.droppable",t.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),t.ui.droppable},void 0===(o=i.apply(e,a))||(t.exports=o)}()}}]);