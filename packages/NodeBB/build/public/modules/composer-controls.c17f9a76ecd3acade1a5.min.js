"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[7986,2735],{99398:(e,t,n)=>{var i,r;i=[n(83713)],void 0===(r=function(e){return{insertIntoTextarea:function(t,n){var i={context:this,textarea:t,value:n,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",i),!i.preventDefault){var r=$(i.textarea),o=r.val(),a=r.parents('[component="composer"]');r.val(o.slice(0,i.textarea.selectionStart)+i.value+o.slice(i.textarea.selectionStart)),e.render(a)}},wrapSelectionInTextareaWith:function(e,t,n){var i={context:this,textarea:e,leading:t,trailing:n,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",i),!i.preventDefault){void 0===n&&(n=t);var r=$(e),o=r.val(),a=/^(\s*)([\s\S]*?)(\s*)$/.exec(o.slice(e.selectionStart,e.selectionEnd));return a[2]||(a=[null,"",o.slice(e.selectionStart,e.selectionEnd),""]),r.val(o.slice(0,e.selectionStart)+a[1]+t+a[2]+n+a[3]+o.slice(e.selectionEnd)),[a[1].length,a[3].length]}},updateTextareaSelection:function(e,t,n){var i={context:this,textarea:e,start:t,end:n,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",i),i.preventDefault||(e.setSelectionRange(i.start,i.end),$(i.textarea).focus())},getBlockData:function(e,t,n){var i=e.value;t=t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var r,o,a=new RegExp(t,"g"),l=[];for(i=i.split("\n").reduce((function(e,t){return null!==e||null===(e=n<=t.length?t:null)&&(n-=t.length+1),e}),null);null!==(r=a.exec(i));)l.push(r.index);return(o={in:!!(l.reduce((function(e,t){return n>=t+2&&(e+=1),e}),0)%2),atEnd:l.reduce((function(e,t){return e||n===t}),!1)}).atEnd=!!o.in&&o.atEnd,o}}}.apply(t,i))||(e.exports=r)},83713:(e,t,n)=>{var i,r;i=[n(85233)],void 0===(r=function(e){var t={render:function(t,n){if(n=n||function(){},!t.find(".preview-container").is(":visible"))return n();var i=t.find("textarea");socket.emit("plugins.composer.renderPreview",i.val(),(function(i,r){i||((r=$("<div>"+r+"</div>")).find("img:not(.not-responsive)").addClass("img-responsive"),t.find(".preview").html(r),e.fire("action:composer.preview"),n())}))},matchScroll:function(e){if(e.find(".preview-container").is(":visible")){var t=e.find("textarea"),n=e.find(".preview");if(t.length&&n.length){var i=t[0].scrollHeight-t.height();if(0===i)return;var r=t.scrollTop()/i;n.scrollTop(Math.max(n[0].scrollHeight-n.height(),0)*r)}}},handleToggler:function(e){t.env=utils.findBootstrapEnvironment();var n=e.find(".write-container .toggle-preview"),i=e.find(".preview-container .toggle-preview"),r=$(".preview-container"),o=$(".write-container");function a(){s(!1),"xs"!==t.env&&"sm"!==t.env&&localStorage.setItem("composer:previewToggled",!0)}function l(){s(!0),"xs"!==t.env&&"sm"!==t.env&&localStorage.removeItem("composer:previewToggled")}function s(i){"xs"===t.env||"sm"===t.env?(r.toggleClass("hide",!1),o.toggleClass("maximized",!1),n.toggleClass("hide",!0),r.toggleClass("hidden-xs hidden-sm",!i),o.toggleClass("hidden-xs hidden-sm",i),i&&t.render(e)):(r.toggleClass("hide",!i),o.toggleClass("maximized",!i),n.toggleClass("hide",i)),t.matchScroll(e)}t.toggle=s,i.on("click",(function(){a(),e.find(".write").focus()})),n.on("click",(function(){l(),e.find(".write").focus()})),localStorage.getItem("composer:previewToggled")||"xs"===t.env||"sm"===t.env?a():l()}};return t}.apply(t,i))||(e.exports=r)}}]);