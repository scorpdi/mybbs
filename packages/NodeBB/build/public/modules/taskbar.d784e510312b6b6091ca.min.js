"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[3034],{27145:(t,a,i)=>{var e,n;t=i.nmd(t),e=[i(59006),i(32230),i(85233)],n=function(a,i,e){const n={};function s(){n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function o(){n.tasklist.find(".active").removeClass("active")}return n.init=function(){const t=this;a.render("modules/taskbar",{}).then((function(a){t.taskbar=$(a),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",(async function(){const t=$(this),a=t.attr("data-module"),i=t.attr("data-uuid"),e=await app.require(a);return t.hasClass("active")?e.minimize(i):(o(),e.load(i),n.toggleNew(i,!1),n.tasklist.removeClass("active"),t.addClass("active")),!1}))})),$(window).on("action:app.loggedOut",(function(){n.closeAll()}))},n.close=async function(a,i){let e="close";if("chat"===a&&(e="closeByUUID"),n.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]').length){const t=await app.require(a);t&&"function"==typeof t[e]&&t[e](i)}},n.closeAll=function(t){let a="[data-uuid]";t&&(a='[data-module="'+t+'"]'+a),n.tasklist.find(a).each((function(a,i){n.close(t||i.getAttribute("data-module"),i.getAttribute("data-uuid"))}))},n.discard=function(t,a){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+a+'"]').remove(),s()},n.push=function(t,a,d,l){l=l||function(){};const u=n.tasklist.find('li[data-uuid="'+a+'"]'),c={module:t,uuid:a,options:d,element:u};e.fire("filter:taskbar.push",c),!u.length&&c.module?function(t,a){i.translate(t.options.title,(function(i){const d=$("<div></div>").text(i||"NodeBB Task").html(),l=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?" style=\"background-image: url('"+t.options.image.replace(/&#x2F;/g,"/")+"'); background-size: cover;\"":"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+d+'" component="taskbar/title">'+d+"</span></a>").attr({title:d,"data-module":t.module,"data-uuid":t.uuid}).addClass(void 0!==t.options.state?t.options.state:"active");t.options.state&&"active"!==t.options.state||o(),n.tasklist.append(l),s(),t.element=l,l.data(t),e.fire("action:taskbar.pushed",t),a(l)}))}(c,l):l(u)},n.get=function(t){return $('[data-module="'+t+'"]').map((function(t,a){return $(a).data()}))},n.minimize=function(t,a){n.tasklist.find('[data-module="'+t+'"][data-uuid="'+a+'"]').toggleClass("active",!1)},n.toggleNew=function(t,a,i){n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",a),i||e.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){const a=n.tasklist.find("li");a.removeClass("active"),a.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")},n.update=function(t,a,i){const e=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+a+'"]');if(!e.length)return;const s=e.data();Object.keys(i).forEach((function(t){s[t]=i[t],function(t,a,i){switch(a){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i)}}(e,t,i[t])})),e.data(s)},n}.apply(a,e),void 0===n||(t.exports=n)}}]);