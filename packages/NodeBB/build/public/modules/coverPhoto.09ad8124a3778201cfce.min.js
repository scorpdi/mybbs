(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[8529,7214,6503,71,7927],{7927:(t,e,n)=>{"use strict";var o,i;o=[n(32230),n(7237),n(85233)],i=function(t,e,n){const o={};function i(t,e){t.find("strong").translateHtml(e.title),t.find("p").translateHtml(e.message),t.attr("class","alert alert-dismissable alert-"+e.type+" clearfix"),clearTimeout(parseInt(t.attr("timeoutId"),10)),e.timeout&&r(t,e),n.fire("action:alert.update",{alert:t,params:e}),t.off("click").removeClass("pointer"),"function"==typeof e.clickfn&&t.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||e.clickfn(),a(t)}))}function a(t){t.fadeOut(500,(function(){$(this).remove()}))}function r(t,e){const o=e.timeout,i=setTimeout((function(){a(t),"function"==typeof e.timeoutfn&&e.timeoutfn(t,e)}),o);t.attr("timeoutId",i),t.css("transition-property","none"),t.removeClass("animate"),setTimeout((function(){t.css("transition-property",""),t.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),t.addClass("animate"),n.fire("action:alert.animate",{alert:t,params:e})}),50),t.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return o.alert=function(t){t.alert_id="alert_button_"+(t.alert_id?t.alert_id:(new Date).getTime()),t.title=t.title&&t.title.trim()||"",t.message=t.message?t.message.trim():"",t.type=t.type||"info";const o=$("#"+t.alert_id);o.length?i(o,t):function(t){app.parseAndTranslate("alert",t,(function(o){let c=$("#"+t.alert_id);if(c.length)return i(c,t);c=o,c.fadeIn(200),e.get("toaster/tray").prepend(c),"function"==typeof t.closefn&&c.find("button").on("click",(function(){return t.closefn(),a(c),!1})),t.timeout&&r(c,t),"function"==typeof t.clickfn&&c.addClass("pointer").on("click",(function(e){$(e.target).is(".close")||t.clickfn(c,t),a(c)})),n.fire("action:alert.new",{alert:c,params:t})}))}(t)},o.success=function(t,e){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:t,type:"success",timeout:e||5e3})},o.error=function(t,e){if("[[error:revalidate-failure]]"===(t=t&&t.message||t))return socket.disconnect(),void app.reconnect();o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:t,type:"danger",timeout:e||1e4})},o.remove=function(t){$("#alert_button_"+t).remove()},o}.apply(e,o),void 0===i||(t.exports=i)},7237:(t,e,n)=>{"use strict";var o;void 0===(o=function(){const t={};return t.core={"topic/teaser":function(t){return t?$('[component="category/topic"][data-tid="'+t+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(t,e){return $('[component="topic"][data-'+t+'="'+e+'"]')},post:function(t,e){return $('[component="post"][data-'+t+'="'+e+'"]')},"post/content":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/content"]')},"post/header":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/header"]')},"post/anchor":function(t){return $('[component="post"][data-index="'+t+'"] [component="post/anchor"]')},"post/vote-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/vote-count"]')},"post/bookmark-count":function(t){return $('[component="post"][data-pid="'+t+'"] [component="post/bookmark-count"]')},"user/postcount":function(t){return $('[component="user/postcount"][data-uid="'+t+'"]')},"user/reputation":function(t){return $('[component="user/reputation"][data-uid="'+t+'"]')},"category/topic":function(t,e){return $('[component="category/topic"][data-'+t+'="'+e+'"]')},"categories/category":function(t,e){return $('[component="categories/category"][data-'+t+'="'+e+'"]')},"chat/message":function(t){return $('[component="chat/message"][data-mid="'+t+'"]')},"chat/message/body":function(t){return $('[component="chat/message"][data-mid="'+t+'"] [component="chat/message/body"]')},"chat/recent/room":function(t){return $('[component="chat/recent/room"][data-roomid="'+t+'"]')}},t.get=function(){const e=Array.prototype.slice.call(arguments,1);return t.core[arguments[0]]&&e.length?t.core[arguments[0]].apply(this,e):$('[component="'+arguments[0]+'"]')},t}.call(e,n,e,t))||(t.exports=o)},38565:(t,e,n)=>{"use strict";var o,i;o=[n(7927),n(80034)],void 0===(i=function(t){const e={coverEl:null,saveFn:null};function n(e){e.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"}),t.alert({alert_id:"drag_start",title:"[[modules:cover.dragging_title]]",message:"[[modules:cover.dragging_message]]",timeout:5e3})}return e.init=function(t,o,i,a){e.coverEl=t,e.saveFn=o,t.find(".upload").on("click",i),t.find(".resize").on("click",(function(){n(t)})),t.find(".remove").on("click",a),t.on("dragover",e.onDragOver).on("drop",e.onDrop),t.find(".save").on("click",e.save),t.addClass("initialised")},e.onDragOver=function(t){t.stopPropagation(),t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy"},e.onDrop=function(t){t.stopPropagation(),t.preventDefault();const o=t.originalEvent.dataTransfer.files,i=new FileReader;o.length&&o[0].type.match("image.*")&&(i.onload=function(t){e.coverEl.css("background-image","url("+t.target.result+")"),e.newCover=t.target.result},i.readAsDataURL(o[0]),n(e.coverEl))},e.save=function(){e.coverEl.addClass("saving"),e.saveFn(e.newCover||void 0,e.coverEl.css("background-position"),(function(n){n?t.error(n):(e.coverEl.toggleClass("active",0),e.coverEl.backgroundDraggable("disable"),e.coverEl.off("dragover",e.onDragOver),e.coverEl.off("drop",e.onDrop),t.success("[[modules:cover.saved]]")),e.coverEl.removeClass("saving")}))},e}.apply(e,o))||(t.exports=i)},80034:()=>{!function(t){var e=t(window),n=function(t,e,n,o){if(3===arguments.length||o){if(n<t)return t;if(n>e)return e}return n},o=function(t){t.clientX=t.originalEvent.touches[0].clientX,t.clientY=t.originalEvent.touches[0].clientY};function i(t,e){this.element=t,this.options=e,this.init()}i.prototype.init=function(){var i=t(this.element),a=(i.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],r=this.options;if(a){var c={width:0,height:0};(r.bound||"percent"==r.units)&&(c=function(t){var e=(t.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(e){var n={width:0,height:0},o=new Image;return o.onload=function(){if("cover"==t.css("background-size")){var e=t.innerWidth(),i=t.innerHeight(),a=e/i;imageAspectRatio=o.width/o.height,scale=1,imageAspectRatio>=a?scale=i/o.height:scale=e/o.width,n.width=o.width*scale,n.height=o.height*scale}else n.width=o.width,n.height=o.height},o.src=e,n}}(i)),i.on("mousedown.dbg touchstart.dbg",(function(t){if(t.target===i[0]){if(t.preventDefault(),t.originalEvent.touches)o(t);else if(1!==t.which)return;var a=t.clientX,s=t.clientY,u=i.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],d=parseInt(u[1])||0,l=parseInt(u[2])||0;"percent"==r.units&&(d=Math.round(d/-200*c.width),l=Math.round(l/-200*c.height)),e.on("mousemove.dbg touchmove.dbg",(function(t){t.preventDefault(),t.originalEvent.touches&&o(t);var e=t.clientX,u=t.clientY;"percent"==r.units?(d="y"===r.axis?d:n(-c.width/2,0,d+e-a,r.bound),l="x"===r.axis?l:n(-c.height/2,0,l+u-s,r.bound),i.css("background-position",d/c.width*-200+"% "+l/c.height*-200+"%")):(d="y"===r.axis?d:n(i.innerWidth()-c.width,0,d+e-a,r.bound),l="x"===r.axis?l:n(i.innerHeight()-c.height,0,l+u-s,r.bound),i.css("background-position",d+"px "+l+"px")),a=e,s=u})),e.on("mouseup.dbg touchend.dbg mouseleave.dbg",(function(){r.done&&r.done(),e.off("mousemove.dbg touchmove.dbg"),e.off("mouseup.dbg touchend.dbg mouseleave.dbg")}))}}))}},i.prototype.disable=function(){t(this.element).off("mousedown.dbg touchstart.dbg"),e.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},t.fn.backgroundDraggable=function(e){var n=Array.prototype.slice.call(arguments,1);return this.each((function(){var o=t(this);if(void 0===e||"object"==typeof e){var a=new i(this,e=t.extend({},t.fn.backgroundDraggable.defaults,e));o.data("dbg",a)}else"string"==typeof e&&o.data("dbg")&&(a=o.data("dbg"),i.prototype[e].apply(a,n))}))},t.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,units:"pixels"}}(jQuery)}}]);