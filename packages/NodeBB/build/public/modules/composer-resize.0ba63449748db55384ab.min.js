"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[882,3034],{38259:(t,e,a)=>{var i,o;i=[a(27145)],void 0===(o=function(t){var e={},a=0,i=$("body"),o=$(window),n=$('[component="navbar"]'),s=document.body,d=n[0];function u(){var t;t=d?d.getBoundingClientRect():{bottom:0};var e=Math.max(t.bottom,0),a={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return a.width=a.right,a.height=a.bottom,a.boundedTop=e,a.boundedHeight=a.bottom-e,a}function c(e,a){var i=u(),o=e[0],n=window.getComputedStyle(o),d=parseInt(n.getPropertyValue("min-height"),10),c=Math.max(d/window.innerHeight,.3);if(i.width>=992){const t=(i.height-i.boundedHeight)/i.height;var l=(a=Math.min(Math.max(a,c+t),1))*i.boundedHeight/i.height;o.style.top=(100*(1-l)).toString()+"%";var r=o.getBoundingClientRect();s.style.paddingBottom=(r.bottom-r.top).toString()+"px"}else e.removeAttr("style"),s.style.paddingBottom=0;e.ratio=a,o.style.visibility="visible",t.updateActive(e.attr("data-uuid"))}var l=c,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return r&&(l=function(t,e){r((function(){c(t,e),setTimeout((function(){o.trigger("action:composer.resize"),t.trigger("action:composer.resize")}),0)}))}),e.reposition=function(t){var e=localStorage.getItem("composer:resizeRatio")||.5;e>=.95&&(e=1,t.addClass("maximized")),l(t,e)},e.maximize=function(t,a){a?l(t,1):e.reposition(t)},e.handleResize=function(t){var e=0,n=0,s=0,d=t.find(".resizer"),c=d[0];function r(t){var a=c.getBoundingClientRect(),s=(a.top+a.bottom)/2;e=(s-t.clientY)/2,n=t.clientY,o.on("mousemove",m),o.on("mouseup",f),i.on("touchmove",g)}function m(a){var i=a.clientY-e,o=u(),n=(o.height-i)/o.boundedHeight;l(t,n)}function f(d){d.preventDefault(),s=d.clientY,t.find("textarea").focus(),o.off("mousemove",m),o.off("mouseup",f),i.off("touchmove",g);var c=s-e,r=u(),p=(r.height-c)/r.boundedHeight;s-n==0&&t.hasClass("maximized")?(t.removeClass("maximized"),l(t,p=!a||a>=.95?.5:a)):s-n==0||p>=.95?(l(t,1),t.addClass("maximized"),a=p):t.removeClass("maximized"),function(t){localStorage.setItem("composer:resizeRatio",Math.min(t,1))}(p)}function g(t){t.preventDefault(),m(t.touches[0])}d.on("mousedown",(function(t){t.preventDefault(),r(t)})).on("touchstart",(function(t){t.preventDefault(),r(t.touches[0])})).on("touchend",f)},e}.apply(e,i))||(t.exports=o)},27145:(t,e,a)=>{var i,o;t=a.nmd(t),i=[a(59006),a(32230),a(85233)],o=function(e,a,i){const o={};function n(){o.tasklist.find("li").length>0?o.taskbar.attr("data-active","1"):o.taskbar.removeAttr("data-active")}function s(){o.tasklist.find(".active").removeClass("active")}return o.init=function(){const t=this;e.render("modules/taskbar",{}).then((function(e){t.taskbar=$(e),t.tasklist=t.taskbar.find("ul"),$(document.body).append(t.taskbar),t.taskbar.on("click","li",(async function(){const t=$(this),e=t.attr("data-module"),a=t.attr("data-uuid"),i=await app.require(e);return t.hasClass("active")?i.minimize(a):(s(),i.load(a),o.toggleNew(a,!1),o.tasklist.removeClass("active"),t.addClass("active")),!1}))})),$(window).on("action:app.loggedOut",(function(){o.closeAll()}))},o.close=async function(e,a){let i="close";if("chat"===e&&(i="closeByUUID"),o.tasklist.find('[data-module="'+t+'"][data-uuid="'+a+'"]').length){const t=await app.require(e);t&&"function"==typeof t[i]&&t[i](a)}},o.closeAll=function(t){let e="[data-uuid]";t&&(e='[data-module="'+t+'"]'+e),o.tasklist.find(e).each((function(e,a){o.close(t||a.getAttribute("data-module"),a.getAttribute("data-uuid"))}))},o.discard=function(t,e){o.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').remove(),n()},o.push=function(t,e,d,u){u=u||function(){};const c=o.tasklist.find('li[data-uuid="'+e+'"]'),l={module:t,uuid:e,options:d,element:c};i.fire("filter:taskbar.push",l),!c.length&&l.module?function(t,e){a.translate(t.options.title,(function(a){const d=$("<div></div>").text(a||"NodeBB Task").html(),u=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?" style=\"background-image: url('"+t.options.image.replace(/&#x2F;/g,"/")+"'); background-size: cover;\"":"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+d+'" component="taskbar/title">'+d+"</span></a>").attr({title:d,"data-module":t.module,"data-uuid":t.uuid}).addClass(void 0!==t.options.state?t.options.state:"active");t.options.state&&"active"!==t.options.state||s(),o.tasklist.append(u),n(),t.element=u,u.data(t),i.fire("action:taskbar.pushed",t),e(u)}))}(l,u):u(c)},o.get=function(t){return $('[data-module="'+t+'"]').map((function(t,e){return $(e).data()}))},o.minimize=function(t,e){o.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').toggleClass("active",!1)},o.toggleNew=function(t,e,a){o.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",e),a||i.fire("action:taskbar.toggleNew",t)},o.updateActive=function(t){const e=o.tasklist.find("li");e.removeClass("active"),e.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},o.isActive=function(t){return o.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")},o.update=function(t,e,a){const i=o.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]');if(!i.length)return;const n=i.data();Object.keys(a).forEach((function(t){n[t]=a[t],function(t,e,a){switch(e){case"title":t.find('[component="taskbar/title"]').text(a);break;case"icon":t.find("i").attr("class","fa fa-"+a);break;case"image":t.find("a").css("background-image",a?'url("'+a.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",a)}}(i,t,a[t])})),i.data(n)},o}.apply(e,i),void 0===o||(t.exports=o)}}]);