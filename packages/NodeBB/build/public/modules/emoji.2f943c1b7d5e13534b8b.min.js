(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1322],{40646:(e,n,t)=>{var r;r=function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.init=n.strategy=n.search=n.table=n.buildEmoji=n.buster=n.base=void 0;var r=config.assetBaseUrl+"/plugins/nodebb-plugin-emoji";n.base=r;var a,i=config["cache-buster"];function o(e,n){var t=":"+e.name+":",a=n?" defer":"";return e.image?"<img\n      "+(n?"data-":"")+'src="'+r+"/emoji/"+e.pack+"/"+e.image+"?"+i+'"\n      class="not-responsive emoji emoji-'+e.pack+" emoji--"+e.name+" "+a+'"\n      title="'+t+'"\n      alt="'+e.character+'"\n    />':'<span\n    class="emoji-'+e.pack+" emoji--"+e.name+'"\n    title="'+t+'"\n  ><span>'+e.character+"</span></span>"}n.buster=i,n.buildEmoji=o,n.strategy={match:/\B:([^\s\n:]+)$/,search:function(e,t){t(n.search(e.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(e){return":"+e.name+": "},template:function(e){return o(e)+" "+e.name},cache:!0},n.init=function(e){return a=a||Promise.all([new Promise((function(e,n){t.e(2645).then(function(){var n=[t(91919)];e.apply(null,n)}.bind(this)).catch(n.bind(this))})),new Promise((function(e,n){t.e(320).then(function(){var n=[t(78726)];e.apply(null,n)}.bind(this)).catch(n.bind(this))})),new Promise((function(e,n){Promise.all([t.e(6177),t.e(2526),t.e(5482),t.e(588)]).then(function(){var n=[t(45482)];e.apply(null,n)}.bind(this)).catch(n.bind(this))})),$.getJSON(r+"/emoji/table.json?"+i)]).then((function(e){var r=e[0],a=e[1],i=e[2],o=e[3];n.table=o;var c=Object.keys(n.table).map((function(e){var t=n.table[e];return{name:e,aliases:t.aliases,keywords:t.keywords,character:t.character,image:t.image,pack:t.pack}}));function s(e,n){for(var t=n.length,a=0;a<t;a+=1)if(r(e,n[a]))return n[a];return null}n.search=function(e){function n(n,t){var r=t*(1+a(e,n));return n.startsWith(e)?r-2:r}return c.filter((function(t){if(r(e,t.name))return t.score=n(t.name,1),!0;var a=s(e,t.aliases);if(a)return t.score=n(a,3),!0;var i=s(e,t.keywords);return!!i&&(t.score=n(i,7),!0)})).sort((function(e,n){return e.score-n.score})).sort((function(n,t){var r=+n.name.startsWith(e);return+t.name.startsWith(e)-r}))},i.addButtonDispatch("emoji-add-emoji",(function(e,n,r,a){new Promise((function(e,n){t.e(5400).then(function(){var n=[t(6721)];e.apply(null,n)}.bind(this)).catch(n.bind(this))})).then((function(t){return(0,t.toggleForInsert)(e,n,r,a)}))}))})).catch((function(e){var n=Error("[[emoji:meta-load-failed]]");throw console.error(n),app.alertError(n),e})),e&&a.then((function(){return setTimeout(e,0)})),a}}.apply(n,[t,n]),void 0===r||(e.exports=r)}}]);