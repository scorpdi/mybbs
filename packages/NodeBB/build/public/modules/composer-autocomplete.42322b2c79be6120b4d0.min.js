"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[8894,2735],{2585:(e,t,n)=>{var i,o;i=[n(83713),n(70675),n(88207),n(62336)],void 0===(o=function(e,{Textcomplete:t},{TextareaEditor:n},{ContenteditableEditor:i}){var o={_active:{}};return $(window).on("action:composer.discard",(function(e,t){o._active.hasOwnProperty(t.post_uuid)&&(o._active[t.post_uuid].destroy(),delete o._active[t.post_uuid])})),o.init=function(t,n){var i,r=t.find(".write"),s="composer-autocomplete-dropdown-"+n;if(r.length){var a={element:r,strategies:[],options:{style:{"z-index":2e4},className:s+" dropdown-menu textcomplete-dropdown"}};r.on("keyup",(function(){clearTimeout(i),i=setTimeout((function(){var e=document.querySelector("."+s);if(e){var t=e.getBoundingClientRect(),n=parseFloat(e.style.marginTop,10)||0,i=window.innerHeight+n-10-t.bottom;e.style.marginTop=Math.min(i,0)+"px"}}),0)})),$(window).trigger("composer:autocomplete:init",a),o._active[n]=o.setup(a),a.element.on("textComplete:select",(function(){e.render(t)}))}},o.setup=function({element:e,strategies:o,options:r}){const s=e.get(0);if(s){var a;"TEXTAREA"===s.nodeName?a=new n(s):"DIV"===s.nodeName&&"true"===s.getAttribute("contenteditable")&&(a=new i(s)),s.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var l=new t(a,o,{dropdown:r});return l.on("rendered",(function(){l.dropdown.items.length&&l.dropdown.items[0].activate()})),l}},o}.apply(t,i))||(e.exports=o)},83713:(e,t,n)=>{var i,o;i=[n(85233)],void 0===(o=function(e){var t={render:function(t,n){if(n=n||function(){},!t.find(".preview-container").is(":visible"))return n();var i=t.find("textarea");socket.emit("plugins.composer.renderPreview",i.val(),(function(i,o){i||((o=$("<div>"+o+"</div>")).find("img:not(.not-responsive)").addClass("img-responsive"),t.find(".preview").html(o),e.fire("action:composer.preview"),n())}))},matchScroll:function(e){if(e.find(".preview-container").is(":visible")){var t=e.find("textarea"),n=e.find(".preview");if(t.length&&n.length){var i=t[0].scrollHeight-t.height();if(0===i)return;var o=t.scrollTop()/i;n.scrollTop(Math.max(n[0].scrollHeight-n.height(),0)*o)}}},handleToggler:function(e){t.env=utils.findBootstrapEnvironment();var n=e.find(".write-container .toggle-preview"),i=e.find(".preview-container .toggle-preview"),o=$(".preview-container"),r=$(".write-container");function s(){l(!1),"xs"!==t.env&&"sm"!==t.env&&localStorage.setItem("composer:previewToggled",!0)}function a(){l(!0),"xs"!==t.env&&"sm"!==t.env&&localStorage.removeItem("composer:previewToggled")}function l(i){"xs"===t.env||"sm"===t.env?(o.toggleClass("hide",!1),r.toggleClass("maximized",!1),n.toggleClass("hide",!0),o.toggleClass("hidden-xs hidden-sm",!i),r.toggleClass("hidden-xs hidden-sm",i),i&&t.render(e)):(o.toggleClass("hide",!i),r.toggleClass("maximized",!i),n.toggleClass("hide",i)),t.matchScroll(e)}t.toggle=l,i.on("click",(function(){s(),e.find(".write").focus()})),n.on("click",(function(){a(),e.find(".write").focus()})),localStorage.getItem("composer:previewToggled")||"xs"===t.env||"sm"===t.env?s():a()}};return t}.apply(t,i))||(e.exports=o)}}]);