"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6721,7214,6503,71,8306,7927,7073],{7927:(e,t,n)=>{var o,r;o=[n(32230),n(7237),n(85233)],r=function(e,t,n){const o={};function r(e,t){e.find("strong").translateHtml(t.title),e.find("p").translateHtml(t.message),e.attr("class","alert alert-dismissable alert-"+t.type+" clearfix"),clearTimeout(parseInt(e.attr("timeoutId"),10)),t.timeout&&i(e,t),n.fire("action:alert.update",{alert:e,params:t}),e.off("click").removeClass("pointer"),"function"==typeof t.clickfn&&e.addClass("pointer").on("click",(function(n){$(n.target).is(".close")||t.clickfn(),s(e)}))}function s(e){e.fadeOut(500,(function(){$(this).remove()}))}function i(e,t){const o=t.timeout,r=setTimeout((function(){s(e),"function"==typeof t.timeoutfn&&t.timeoutfn(e,t)}),o);e.attr("timeoutId",r),e.css("transition-property","none"),e.removeClass("animate"),setTimeout((function(){e.css("transition-property",""),e.css("transition","width "+(o+450)+"ms linear, background-color "+(o+450)+"ms ease-in"),e.addClass("animate"),n.fire("action:alert.animate",{alert:e,params:t})}),50),e.on("mouseenter",(function(){$(this).css("transition-duration",0)}))}return o.alert=function(e){e.alert_id="alert_button_"+(e.alert_id?e.alert_id:(new Date).getTime()),e.title=e.title&&e.title.trim()||"",e.message=e.message?e.message.trim():"",e.type=e.type||"info";const o=$("#"+e.alert_id);o.length?r(o,e):function(e){app.parseAndTranslate("alert",e,(function(o){let a=$("#"+e.alert_id);if(a.length)return r(a,e);a=o,a.fadeIn(200),t.get("toaster/tray").prepend(a),"function"==typeof e.closefn&&a.find("button").on("click",(function(){return e.closefn(),s(a),!1})),e.timeout&&i(a,e),"function"==typeof e.clickfn&&a.addClass("pointer").on("click",(function(t){$(t.target).is(".close")||e.clickfn(a,e),s(a)})),n.fire("action:alert.new",{alert:a,params:e})}))}(e)},o.success=function(e,t){o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.success]]",message:e,type:"success",timeout:t||5e3})},o.error=function(e,t){if("[[error:revalidate-failure]]"===(e=e&&e.message||e))return socket.disconnect(),void app.reconnect();o.alert({alert_id:utils.generateUUID(),title:"[[global:alert.error]]",message:e,type:"danger",timeout:t||1e4})},o.remove=function(e){$("#alert_button_"+e).remove()},o}.apply(t,o),void 0===r||(e.exports=r)},7237:(e,t,n)=>{var o;void 0===(o=function(){const e={};return e.core={"topic/teaser":function(e){return e?$('[component="category/topic"][data-tid="'+e+'"] [component="topic/teaser"]'):$('[component="topic/teaser"]')},topic:function(e,t){return $('[component="topic"][data-'+e+'="'+t+'"]')},post:function(e,t){return $('[component="post"][data-'+e+'="'+t+'"]')},"post/content":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/content"]')},"post/header":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/header"]')},"post/anchor":function(e){return $('[component="post"][data-index="'+e+'"] [component="post/anchor"]')},"post/vote-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/vote-count"]')},"post/bookmark-count":function(e){return $('[component="post"][data-pid="'+e+'"] [component="post/bookmark-count"]')},"user/postcount":function(e){return $('[component="user/postcount"][data-uid="'+e+'"]')},"user/reputation":function(e){return $('[component="user/reputation"][data-uid="'+e+'"]')},"category/topic":function(e,t){return $('[component="category/topic"][data-'+e+'="'+t+'"]')},"categories/category":function(e,t){return $('[component="categories/category"][data-'+e+'="'+t+'"]')},"chat/message":function(e){return $('[component="chat/message"][data-mid="'+e+'"]')},"chat/message/body":function(e){return $('[component="chat/message"][data-mid="'+e+'"] [component="chat/message/body"]')},"chat/recent/room":function(e){return $('[component="chat/recent/room"][data-roomid="'+e+'"]')}},e.get=function(){const t=Array.prototype.slice.call(arguments,1);return e.core[arguments[0]]&&t.length?e.core[arguments[0]].apply(this,t):$('[component="'+arguments[0]+'"]')},e}.call(t,n,t,e))||(e.exports=o)},7073:(e,t,n)=>{var o,r;o=[n(32230),n(66603),n(85233),n(7927)],void 0===(r=function(e,t,n,o){const r={current:{}};function s(e){const t=e.in||"titles",r=e.by||"";let s=e.term.replace(/^[ ?#]*/,"");try{s=encodeURIComponent(s)}catch(e){return o.error("[[error:invalid-search-term]]")}const i={term:s,in:t};return e.matchWords&&(i.matchWords=e.matchWords),r&&r.length&&("posts"===t||"titles"===t||"titlesposts"===t)&&(i.by=r),e.categories&&e.categories.length&&(i.categories=e.categories,e.searchChildren&&(i.searchChildren=e.searchChildren)),e.hasTags&&e.hasTags.length&&(i.hasTags=e.hasTags),parseInt(e.replies,10)>0&&(i.replies=e.replies,i.repliesFilter=e.repliesFilter||"atleast"),e.timeRange&&(i.timeRange=e.timeRange,i.timeFilter=e.timeFilter||"newer"),e.sortBy&&(i.sortBy=e.sortBy,i.sortDirection=e.sortDirection),e.showAs&&(i.showAs=e.showAs),e.searchOnly&&(i.searchOnly=e.searchOnly),n.fire("action:search.createQueryString",{query:i,data:e}),decodeURIComponent($.param(i))}return r.init=function(e){if(!config.searchEnabled)return;e=e||{in:config.searchDefaultInQuick||"titles"};const t=$("#search-button"),s=$("#search-fields"),i=$("#search-fields input"),a=$("#quick-search-container");$("#search-form .advanced-search-link").off("mousedown").on("mousedown",(function(){ajaxify.go("/search")})),$("#search-form").off("submit").on("submit",(function(){i.blur()})),i.off("blur").on("blur",(function(){setTimeout((function(){i.is(":focus")||(s.addClass("hidden"),t.removeClass("hidden"))}),200)})),i.off("focus");const c={inputEl:i,resultEl:a};r.enableQuickSearch({searchOptions:e,searchElements:c}),t.off("click").on("click",(function(e){return config.loggedIn||app.user.privileges["search:content"]?(e.stopPropagation(),r.showAndFocusInput(),!1):(o.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1)})),$("#search-form").off("submit").on("submit",(function(){const t=$(this).find("input"),o=r.getSearchPreferences();return o.term=t.val(),o.in=e.in,n.fire("action:search.submit",{searchOptions:o,searchElements:c}),r.query(o,(function(){t.val("")})),!1}))},r.enableQuickSearch=function(t){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const o=Object.assign({in:config.searchDefaultInQuick||"titles"},t.searchOptions),s=t.searchElements.resultEl,i=t.searchElements.inputEl;let a=i.val();const c=s.find(".filter-category");function l(){ajaxify.data.template.category&&e.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",(function(e){const t=$("<div></div>").html(e).text();c.find(".name").text(t)})),c.toggleClass("hidden",!ajaxify.data.template.category)}function u(){t.searchOptions=Object.assign({},o),t.searchOptions.term=i.val(),l(),ajaxify.data.template.category&&c.find('input[type="checkbox"]').is(":checked")&&(t.searchOptions.categories=[ajaxify.data.cid],t.searchOptions.searchChildren=!0),s.removeClass("hidden").find(".quick-search-results-container").html(""),s.find(".loading-indicator").removeClass("hidden"),n.fire("action:search.quick.start",t),t.searchOptions.searchOnly=1,r.api(t.searchOptions,(function(e){if(s.find(".loading-indicator").addClass("hidden"),!e.posts||t.hideOnNoMatches&&!e.posts.length)return s.addClass("hidden").find(".quick-search-results-container").html("");e.posts.forEach((function(e){const t=$("<div>"+e.content+"</div>").text(),n=i.val().toLowerCase().replace(/^in:topic-\d+/,""),o=Math.max(0,t.toLowerCase().indexOf(n)-40);e.snippet=utils.escapeHTML((o>0?"...":"")+t.slice(o,o+80)+(t.length-o>80?"...":""))})),app.parseAndTranslate("partials/quick-search-results",e,(function(o){o.length&&o.find(".timeago").timeago(),s.toggleClass("hidden",!o.length||!i.is(":focus")).find(".quick-search-results-container").html(o.length?o:"");const a=s.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");r.highlightMatches(t.searchOptions.term,a),n.fire("action:search.quick.complete",{data:e,options:t})}))}))}s.find('.filter-category input[type="checkbox"]').on("change",(function(){i.focus(),u()})),i.off("keyup").on("keyup",utils.debounce((function(){if(i.val().length<3)return s.addClass("hidden"),void(a=i.val());if(i.val()!==a){if(a=i.val(),!i.is(":focus"))return s.addClass("hidden");u()}}),500));let f=!1;s.on("mousedown",(function(){$(window).one("mouseup",(function(){s.addClass("hidden")})),f=!0})),i.on("blur",(function(){i.is(":focus")||f||s.hasClass("hidden")||s.addClass("hidden")}));let p=!1;n.on("action:ajaxify.end",(function(){ajaxify.isCold()||(p=!0)})),i.on("focus",(function(){f=!1;const e=i.val();a=e,e&&s.find("#quick-search-results").children().length&&(l(),p?(u(),p=!1):s.removeClass("hidden"),i[0].setSelectionRange(e.startsWith("in:topic")?e.indexOf(" ")+1:0,e.length))})),i.off("refresh").on("refresh",(function(){u()}))},r.showAndFocusInput=function(){$("#search-fields").removeClass("hidden"),$("#search-button").addClass("hidden"),$("#search-fields input").focus()},r.query=function(e,t){t=t||function(){},ajaxify.go("search?"+s(e)),t()},r.api=function(e,t){const n=config.relative_path+"/api/search?"+s(e);e.searchOnly=void 0;const o=config.relative_path+"/search?"+s(e);$.get(n,(function(e){e.url=o,t(e)}))},r.getSearchPreferences=function(){try{return JSON.parse(t.getItem("search-preferences")||"{}")}catch(e){return{}}},r.highlightMatches=function(e,t){if(!e||!t.length)return;const n=(e=utils.escapeHTML(e.replace(/^"/,"").replace(/"$/,"").trim())).split(" ").map((function(e){return utils.escapeRegexChars(e)})).join("|"),o=new RegExp("("+n+")","gi");t.each((function(){const e=$(this),t=[];e.find("*").each((function(){$(this).after("\x3c!-- "+t.length+" --\x3e"),t.push($("<div></div>").append($(this)))})),e.html(e.html().replace(o,(function(e,t){return'<strong class="search-match">'+t+"</strong>"}))),t.forEach((function(t,n){e.html(e.html().replace("\x3c!-- "+n+" --\x3e",(function(){return t.html()})))}))})),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-responsive")},r}.apply(t,o))||(e.exports=r)},66603:(e,t,n)=>{var o;void 0===(o=function(){function e(){this._store={},this._keys=[]}let t;e.prototype.isMock=!0,e.prototype.setItem=function(e,t){e=String(e),-1===this._keys.indexOf(e)&&this._keys.push(e),this._store[e]=t},e.prototype.getItem=function(e){return e=String(e),-1===this._keys.indexOf(e)?null:this._store[e]},e.prototype.removeItem=function(e){e=String(e),this._keys=this._keys.filter((function(t){return t!==e})),this._store[e]=null},e.prototype.clear=function(){this._keys=[],this._store={}},e.prototype.key=function(e){return e=parseInt(e,10)||0,this._keys[e]},Object.defineProperty&&Object.defineProperty(e.prototype,"length",{get:function(){return this._keys.length}});const n=Date.now().toString();try{if(t=window.localStorage,t.setItem(n,n),t.getItem(n)!==n)throw Error("localStorage behaved unexpectedly");return t.removeItem(n),t}catch(o){console.warn(o),console.warn("localStorage failed, falling back on sessionStorage");try{if(t=window.sessionStorage,t.setItem(n,n),t.getItem(n)!==n)throw Error("sessionStorage behaved unexpectedly");return t.removeItem(n),t}catch(t){return console.warn(t),console.warn("sessionStorage failed, falling back on memory storage"),new e}}}.call(t,n,t,e))||(e.exports=o)}}]);