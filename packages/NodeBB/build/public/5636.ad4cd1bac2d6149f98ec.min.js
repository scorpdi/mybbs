"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[5636],{25636:(t,o,n)=>{var i,e;i=[n(7237),n(3547),n(7927)],void 0===(e=function(t,o,n){const i={};let e,c,s;function a(){"topic"===ajaxify.data.template.name&&ajaxify.data.tid===s||(l(),$(window).off("action:ajaxify.end",a))}function p(){c.attr("disabled",!0),socket.emit("topics.createTopicFromPosts",{title:e.find("#fork-title").val(),pids:o.pids,fromTid:s},(function(i,e){if(c.removeAttr("disabled"),i)return n.error(i.message);n.alert({timeout:5e3,title:"[[global:alert.success]]",message:"[[topic:fork_success]]",type:"success",clickfn:function(){ajaxify.go("topic/"+e.slug)}}),o.pids.forEach((function(o){!function(o){t.get("post","pid",o).fadeOut(500,(function(){$(this).remove()}))}(o)})),l()}))}function d(){o.pids.length?e.find("#fork-pids").translateHtml("[[topic:fork_pid_count, "+o.pids.length+"]]"):e.find("#fork-pids").translateHtml("[[topic:fork_no_pids]]")}function f(){e.find("#fork-title").val().length&&o.pids.length?c.removeAttr("disabled"):c.attr("disabled",!0)}function l(){e&&(e.remove(),e=null,o.disable())}return i.init=function(){s=ajaxify.data.tid,$(window).off("action:ajaxify.end",a).on("action:ajaxify.end",a),e||app.parseAndTranslate("partials/fork_thread_modal",{},(function(t){e=t,c=e.find("#fork_thread_commit"),$("body").append(e),e.find(".close,#fork_thread_cancel").on("click",l),e.find("#fork-title").on("keyup",f),o.init((function(){f(),d()})),d(),c.on("click",p)}))},i}.apply(o,i))||(t.exports=e)},3547:(t,o,n)=>{var i,e;i=[n(7237)],void 0===(e=function(t){const o={};let n;o.pids=[];let i=!1;function e(t){t.stopPropagation();const n=$(this).attr("data-pid"),e=$('[component="topic"] [data-pid="'+n+'"]');(i||0!==parseInt($(this).attr("data-index"),10))&&o.togglePostSelection(e,n)}function c(){return!1}return o.init=function(t,s){o.pids.length=0,n=t,i=(s=s||{}).allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',e),$("#content").on("click",'[component="post"] button, [component="post"] a',c)},o.disable=function(){o.pids.forEach((function(o){t.get("post","pid",o).toggleClass("bg-success",!1)})),$("#content").off("click",'[component="topic"] [component="post"]',e),$("#content").off("click",'[component="post"] button, [component="post"] a',c)},o.togglePostSelection=function(t,i){if(i){const e=o.pids.indexOf(i);-1===e?(o.pids.push(i),t.toggleClass("bg-success",!0)):(o.pids.splice(e,1),t.toggleClass("bg-success",!1)),o.pids.length&&o.pids.sort((function(t,o){return t-o})),"function"==typeof n&&n()}},o}.apply(o,i))||(t.exports=e)}}]);