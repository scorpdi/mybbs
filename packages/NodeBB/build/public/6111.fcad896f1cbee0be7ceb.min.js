"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6111,6193],{6111:(t,n,e)=>{var o,i;o=[e(3547),e(86193),e(7927)],void 0===(i=function(t,n,e){const o={};let i,c,s=0;function a(){t.pids.length?i.find("#pids").translateHtml("[[topic:fork_pid_count, "+t.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:fork_no_pids]]")}function u(){s&&i.find("#username").length&&i.find("#username").val().length&&t.pids.length?c.removeAttr("disabled"):c.attr("disabled",!0)}function r(){u(),a()}function p(){i&&(i.remove(),i=null,t.disable())}return o.init=function(o){i||app.parseAndTranslate("partials/change_owner_modal",{},(function(l){i=l,c=i.find("#change_owner_commit"),$("body").append(i),i.find(".close,#change_owner_cancel").on("click",p),i.find("#username").on("keyup",u),t.init(r,{allowMainPostSelect:!0}),a(),o&&t.togglePostSelection(o,o.attr("data-pid")),c.on("click",(function(){s&&socket.emit("posts.changeOwner",{pids:t.pids,toUid:s},(function(t){if(t)return e.error(t);ajaxify.refresh(),p()}))})),n.user(i.find("#username"),{filters:["notbanned"]},(function(t,n){s=n.item.user.uid,u()}))}))},o}.apply(n,o))||(t.exports=i)},86193:(t,n,e)=>{var o,i;o=[e(74344),e(7927)],i=function(t,n){const e={},o={delay:200};return e.init=t=>{const{input:n,source:e,onSelect:i,delay:c}={...o,...t};app.loadJQueryUI((function(){n.autocomplete({delay:c,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(t,e){!function(t,n,e,o){n=n||function(){};const i=jQuery.Event("keypress");i.which=13,i.keyCode=13,setTimeout((function(){t.trigger(i)}),100),n(e,o)}(n,i,t,e)},source:e})}))},e.user=function(o,i,c){"function"==typeof i&&(c=i,i={}),i=i||{},e.init({input:o,onSelect:c,source:(e,o)=>{i.query=e.term,t.get("/api/users",i,(function(t,e){if(t)return n.error(t);if(e&&e.users){const t=e.users.map((function(t){const n=$("<div></div>").html(t.username).text();return t&&{label:n,value:n,user:{uid:t.uid,name:t.username,slug:t.userslug,username:t.username,userslug:t.userslug,picture:t.picture,banned:t.banned,"icon:text":t["icon:text"],"icon:bgColor":t["icon:bgColor"]}}}));o(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")}))}})},e.group=function(t,o){e.init({input:t,onSelect:o,source:(t,e)=>{socket.emit("groups.search",{query:t.term},(function(t,o){if(t)return n.error(t);if(o&&o.length){const t=o.map((function(t){return t&&{label:t.name,value:t.name,group:t}}));e(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")}))}})},e.tag=function(t,o){e.init({input:t,onSelect:o,delay:100,source:(t,e)=>{socket.emit("topics.autocompleteTags",{query:t.term,cid:ajaxify.data.cid||0},(function(t,o){if(t)return n.error(t);o&&e(o),$(".ui-autocomplete a").attr("data-ajaxify","false")}))}})},e}.apply(n,o),void 0===i||(t.exports=i)},3547:(t,n,e)=>{var o,i;o=[e(7237)],void 0===(i=function(t){const n={};let e;n.pids=[];let o=!1;function i(t){t.stopPropagation();const e=$(this).attr("data-pid"),i=$('[component="topic"] [data-pid="'+e+'"]');(o||0!==parseInt($(this).attr("data-index"),10))&&n.togglePostSelection(i,e)}function c(){return!1}return n.init=function(t,s){n.pids.length=0,e=t,o=(s=s||{}).allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',i),$("#content").on("click",'[component="post"] button, [component="post"] a',c)},n.disable=function(){n.pids.forEach((function(n){t.get("post","pid",n).toggleClass("bg-success",!1)})),$("#content").off("click",'[component="topic"] [component="post"]',i),$("#content").off("click",'[component="post"] button, [component="post"] a',c)},n.togglePostSelection=function(t,o){if(o){const i=n.pids.indexOf(o);-1===i?(n.pids.push(o),t.toggleClass("bg-success",!0)):(n.pids.splice(i,1),t.toggleClass("bg-success",!1)),n.pids.length&&n.pids.sort((function(t,n){return t-n})),"function"==typeof e&&e()}},n}.apply(n,o))||(t.exports=i)}}]);